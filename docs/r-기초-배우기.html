<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>R 기초 배우기 | R을 이용한 퀀트 투자 포트폴리오 만들기(개정판)</title>
  <meta name="description" content="R 기초 배우기 | R을 이용한 퀀트 투자 포트폴리오 만들기(개정판)" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="R 기초 배우기 | R을 이용한 퀀트 투자 포트폴리오 만들기(개정판)" />
  <meta property="og:type" content="book" />
  
  
  
  <meta name="github-repo" content="hyunyulhenry/quant_cookbook" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="R 기초 배우기 | R을 이용한 퀀트 투자 포트폴리오 만들기(개정판)" />
  
  
  

<meta name="author" content="이현열" />


<meta name="date" content="2021-11-20" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="퀀트-투자의-심장-데이터와-프로그래밍.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R을 이용한 퀀트 투자 포트폴리오 만들기</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#지은이-소개"><i class="fa fa-check"></i>지은이 소개</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#머리말"><i class="fa fa-check"></i>머리말</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#이-책의-구성"><i class="fa fa-check"></i>이 책의 구성</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#이-책에서-다루지-않은-주제"><i class="fa fa-check"></i>이 책에서 다루지 않은 주제</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#도움이-될-만한-자료들"><i class="fa fa-check"></i>도움이 될 만한 자료들</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#이-책의-지원-페이지"><i class="fa fa-check"></i>이 책의 지원 페이지</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#종목과-관련된-유의사항"><i class="fa fa-check"></i>종목과 관련된 유의사항</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#세션정보"><i class="fa fa-check"></i>세션정보</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="r-기초-배우기.html"><a href="r-기초-배우기.html"><i class="fa fa-check"></i>R 기초 배우기</a>
<ul>
<li class="chapter" data-level="0.1" data-path="r-기초-배우기.html"><a href="r-기초-배우기.html#r과-r-스튜디오-설치하기"><i class="fa fa-check"></i><b>0.1</b> R과 R 스튜디오 설치하기</a>
<ul>
<li class="chapter" data-level="0.1.1" data-path="r-기초-배우기.html"><a href="r-기초-배우기.html#r-설치하기"><i class="fa fa-check"></i><b>0.1.1</b> R 설치하기</a></li>
<li class="chapter" data-level="0.1.2" data-path="r-기초-배우기.html"><a href="r-기초-배우기.html#r-스튜디오-설치하기"><i class="fa fa-check"></i><b>0.1.2</b> R 스튜디오 설치하기</a></li>
</ul></li>
<li class="chapter" data-level="0.2" data-path="r-기초-배우기.html"><a href="r-기초-배우기.html#r-스튜디오-화면-구성"><i class="fa fa-check"></i><b>0.2</b> R 스튜디오 화면 구성</a></li>
<li class="chapter" data-level="0.3" data-path="r-기초-배우기.html"><a href="r-기초-배우기.html#r-스튜디오-설정하기"><i class="fa fa-check"></i><b>0.3</b> R 스튜디오 설정하기</a></li>
<li class="chapter" data-level="0.4" data-path="r-기초-배우기.html"><a href="r-기초-배우기.html#프로젝트-만들기"><i class="fa fa-check"></i><b>0.4</b> 프로젝트 만들기</a></li>
<li class="chapter" data-level="0.5" data-path="r-기초-배우기.html"><a href="r-기초-배우기.html#데이터-타입별-다루기"><i class="fa fa-check"></i><b>0.5</b> 데이터 타입별 다루기</a>
<ul>
<li class="chapter" data-level="0.5.1" data-path="r-기초-배우기.html"><a href="r-기초-배우기.html#숫자-형태"><i class="fa fa-check"></i><b>0.5.1</b> 숫자 형태</a></li>
<li class="chapter" data-level="0.5.2" data-path="r-기초-배우기.html"><a href="r-기초-배우기.html#문자열-형태"><i class="fa fa-check"></i><b>0.5.2</b> 문자열 형태</a></li>
<li class="chapter" data-level="0.5.3" data-path="r-기초-배우기.html"><a href="r-기초-배우기.html#날짜-형태"><i class="fa fa-check"></i><b>0.5.3</b> 날짜 형태</a></li>
</ul></li>
<li class="chapter" data-level="0.6" data-path="r-기초-배우기.html"><a href="r-기초-배우기.html#데이터-구조-다루기"><i class="fa fa-check"></i><b>0.6</b> 데이터 구조 다루기</a>
<ul>
<li class="chapter" data-level="0.6.1" data-path="r-기초-배우기.html"><a href="r-기초-배우기.html#벡터-다루기"><i class="fa fa-check"></i><b>0.6.1</b> 벡터 다루기</a></li>
<li class="chapter" data-level="0.6.2" data-path="r-기초-배우기.html"><a href="r-기초-배우기.html#리스트-다루기"><i class="fa fa-check"></i><b>0.6.2</b> 리스트 다루기</a></li>
<li class="chapter" data-level="0.6.3" data-path="r-기초-배우기.html"><a href="r-기초-배우기.html#데이터프레임-다루기"><i class="fa fa-check"></i><b>0.6.3</b> 데이터프레임 다루기</a></li>
<li class="chapter" data-level="0.6.4" data-path="r-기초-배우기.html"><a href="r-기초-배우기.html#결측치-처리하기"><i class="fa fa-check"></i><b>0.6.4</b> 결측치 처리하기</a></li>
</ul></li>
<li class="chapter" data-level="0.7" data-path="r-기초-배우기.html"><a href="r-기초-배우기.html#데이터-불러오기-및-내보내기"><i class="fa fa-check"></i><b>0.7</b> 데이터 불러오기 및 내보내기</a>
<ul>
<li class="chapter" data-level="0.7.1" data-path="r-기초-배우기.html"><a href="r-기초-배우기.html#워킹-디렉터리"><i class="fa fa-check"></i><b>0.7.1</b> 워킹 디렉터리</a></li>
<li class="chapter" data-level="0.7.2" data-path="r-기초-배우기.html"><a href="r-기초-배우기.html#csv-파일-불러오기-및-저장하기"><i class="fa fa-check"></i><b>0.7.2</b> csv 파일 불러오기 및 저장하기</a></li>
<li class="chapter" data-level="0.7.3" data-path="r-기초-배우기.html"><a href="r-기초-배우기.html#엑셀-파일-불러오기-및-저장하기"><i class="fa fa-check"></i><b>0.7.3</b> 엑셀 파일 불러오기 및 저장하기</a></li>
</ul></li>
<li class="chapter" data-level="0.8" data-path="r-기초-배우기.html"><a href="r-기초-배우기.html#효율성과-가독성-높이기"><i class="fa fa-check"></i><b>0.8</b> 효율성과 가독성 높이기</a>
<ul>
<li class="chapter" data-level="0.8.1" data-path="r-기초-배우기.html"><a href="r-기초-배우기.html#함수"><i class="fa fa-check"></i><b>0.8.1</b> 함수</a></li>
<li class="chapter" data-level="0.8.2" data-path="r-기초-배우기.html"><a href="r-기초-배우기.html#루프-구문"><i class="fa fa-check"></i><b>0.8.2</b> 루프 구문</a></li>
<li class="chapter" data-level="0.8.3" data-path="r-기초-배우기.html"><a href="r-기초-배우기.html#파이프-오퍼레이터"><i class="fa fa-check"></i><b>0.8.3</b> 파이프 오퍼레이터</a></li>
</ul></li>
<li class="chapter" data-level="0.9" data-path="r-기초-배우기.html"><a href="r-기초-배우기.html#데이터-구조-변형하기"><i class="fa fa-check"></i><b>0.9</b> 데이터 구조 변형하기</a>
<ul>
<li class="chapter" data-level="0.9.1" data-path="r-기초-배우기.html"><a href="r-기초-배우기.html#tidyr-패키지를-이용한-데이터-모양-바꾸기"><i class="fa fa-check"></i><b>0.9.1</b> <code>tidyr</code> 패키지를 이용한 데이터 모양 바꾸기</a></li>
<li class="chapter" data-level="0.9.2" data-path="r-기초-배우기.html"><a href="r-기초-배우기.html#dplyr-패키지를-이용한-데이터-변형하기"><i class="fa fa-check"></i><b>0.9.2</b> <code>dplyr</code> 패키지를 이용한 데이터 변형하기</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="1" data-path="퀀트-투자의-심장-데이터와-프로그래밍.html"><a href="퀀트-투자의-심장-데이터와-프로그래밍.html"><i class="fa fa-check"></i><b>1</b> 퀀트 투자의 심장: 데이터와 프로그래밍</a>
<ul>
<li class="chapter" data-level="1.1" data-path="퀀트-투자의-심장-데이터와-프로그래밍.html"><a href="퀀트-투자의-심장-데이터와-프로그래밍.html#데이터-구하기"><i class="fa fa-check"></i><b>1.1</b> 데이터 구하기</a></li>
<li class="chapter" data-level="1.2" data-path="퀀트-투자의-심장-데이터와-프로그래밍.html"><a href="퀀트-투자의-심장-데이터와-프로그래밍.html#퀀트-투자와-프로그래밍"><i class="fa fa-check"></i><b>1.2</b> 퀀트 투자와 프로그래밍</a></li>
<li class="chapter" data-level="1.3" data-path="퀀트-투자의-심장-데이터와-프로그래밍.html"><a href="퀀트-투자의-심장-데이터와-프로그래밍.html#r-프로그램"><i class="fa fa-check"></i><b>1.3</b> R 프로그램</a></li>
<li class="chapter" data-level="1.4" data-path="퀀트-투자의-심장-데이터와-프로그래밍.html"><a href="퀀트-투자의-심장-데이터와-프로그래밍.html#퀀트-투자에-유용한-r-패키지"><i class="fa fa-check"></i><b>1.4</b> 퀀트 투자에 유용한 R 패키지</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="크롤링을-위한-기본-지식.html"><a href="크롤링을-위한-기본-지식.html"><i class="fa fa-check"></i><b>2</b> 크롤링을 위한 기본 지식</a>
<ul>
<li class="chapter" data-level="2.1" data-path="크롤링을-위한-기본-지식.html"><a href="크롤링을-위한-기본-지식.html#인코딩의-이해와-r에서-utf-8-설정하기"><i class="fa fa-check"></i><b>2.1</b> 인코딩의 이해와 R에서 UTF-8 설정하기</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="크롤링을-위한-기본-지식.html"><a href="크롤링을-위한-기본-지식.html#인간과-컴퓨터-간-번역의-시작-ascii"><i class="fa fa-check"></i><b>2.1.1</b> 인간과 컴퓨터 간 번역의 시작, ASCII</a></li>
<li class="chapter" data-level="2.1.2" data-path="크롤링을-위한-기본-지식.html"><a href="크롤링을-위한-기본-지식.html#한글-인코딩-방식의-종류"><i class="fa fa-check"></i><b>2.1.2</b> 한글 인코딩 방식의 종류</a></li>
<li class="chapter" data-level="2.1.3" data-path="크롤링을-위한-기본-지식.html"><a href="크롤링을-위한-기본-지식.html#r에서-utf-8-설정하기"><i class="fa fa-check"></i><b>2.1.3</b> R에서 UTF-8 설정하기</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="크롤링을-위한-기본-지식.html"><a href="크롤링을-위한-기본-지식.html#웹의-동작-방식"><i class="fa fa-check"></i><b>2.2</b> 웹의 동작 방식</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="크롤링을-위한-기본-지식.html"><a href="크롤링을-위한-기본-지식.html#http"><i class="fa fa-check"></i><b>2.2.1</b> HTTP</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="크롤링을-위한-기본-지식.html"><a href="크롤링을-위한-기본-지식.html#html과-css"><i class="fa fa-check"></i><b>2.3</b> HTML과 CSS</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="크롤링을-위한-기본-지식.html"><a href="크롤링을-위한-기본-지식.html#html-기본-구조"><i class="fa fa-check"></i><b>2.3.1</b> HTML 기본 구조</a></li>
<li class="chapter" data-level="2.3.2" data-path="크롤링을-위한-기본-지식.html"><a href="크롤링을-위한-기본-지식.html#태그와-속성"><i class="fa fa-check"></i><b>2.3.2</b> 태그와 속성</a></li>
<li class="chapter" data-level="2.3.3" data-path="크롤링을-위한-기본-지식.html"><a href="크롤링을-위한-기본-지식.html#h-태그와-p-태그"><i class="fa fa-check"></i><b>2.3.3</b> h 태그와 p 태그</a></li>
<li class="chapter" data-level="2.3.4" data-path="크롤링을-위한-기본-지식.html"><a href="크롤링을-위한-기본-지식.html#리스트를-나타내는-ul-태그와-ol-태그"><i class="fa fa-check"></i><b>2.3.4</b> 리스트를 나타내는 ul 태그와 ol 태그</a></li>
<li class="chapter" data-level="2.3.5" data-path="크롤링을-위한-기본-지식.html"><a href="크롤링을-위한-기본-지식.html#table-태그"><i class="fa fa-check"></i><b>2.3.5</b> table 태그</a></li>
<li class="chapter" data-level="2.3.6" data-path="크롤링을-위한-기본-지식.html"><a href="크롤링을-위한-기본-지식.html#a-태그와-img-태그-및-속성"><i class="fa fa-check"></i><b>2.3.6</b> a 태그와 img 태그 및 속성</a></li>
<li class="chapter" data-level="2.3.7" data-path="크롤링을-위한-기본-지식.html"><a href="크롤링을-위한-기본-지식.html#div-태그"><i class="fa fa-check"></i><b>2.3.7</b> div 태그</a></li>
<li class="chapter" data-level="2.3.8" data-path="크롤링을-위한-기본-지식.html"><a href="크롤링을-위한-기본-지식.html#css"><i class="fa fa-check"></i><b>2.3.8</b> CSS</a></li>
<li class="chapter" data-level="2.3.9" data-path="크롤링을-위한-기본-지식.html"><a href="크롤링을-위한-기본-지식.html#클래스와-id"><i class="fa fa-check"></i><b>2.3.9</b> 클래스와 id</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="크롤링을-위한-기본-지식.html"><a href="크롤링을-위한-기본-지식.html#파이프-오퍼레이터-1"><i class="fa fa-check"></i><b>2.4</b> 파이프 오퍼레이터(<code>%&gt;%</code>)</a></li>
<li class="chapter" data-level="2.5" data-path="크롤링을-위한-기본-지식.html"><a href="크롤링을-위한-기본-지식.html#오류에-대한-예외처리"><i class="fa fa-check"></i><b>2.5</b> 오류에 대한 예외처리</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="api를-이용한-데이터-수집.html"><a href="api를-이용한-데이터-수집.html"><i class="fa fa-check"></i><b>3</b> API를 이용한 데이터 수집</a>
<ul>
<li class="chapter" data-level="3.1" data-path="api를-이용한-데이터-수집.html"><a href="api를-이용한-데이터-수집.html#api를-이용한-quandl-데이터-다운로드"><i class="fa fa-check"></i><b>3.1</b> API를 이용한 Quandl 데이터 다운로드</a></li>
<li class="chapter" data-level="3.2" data-path="api를-이용한-데이터-수집.html"><a href="api를-이용한-데이터-수집.html#getsymbols-함수를-이용한-api-다운로드"><i class="fa fa-check"></i><b>3.2</b> <code>getSymbols()</code> 함수를 이용한 API 다운로드</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="api를-이용한-데이터-수집.html"><a href="api를-이용한-데이터-수집.html#주가-다운로드"><i class="fa fa-check"></i><b>3.2.1</b> 주가 다운로드</a></li>
<li class="chapter" data-level="3.2.2" data-path="api를-이용한-데이터-수집.html"><a href="api를-이용한-데이터-수집.html#국내-종목-주가-다운로드"><i class="fa fa-check"></i><b>3.2.2</b> 국내 종목 주가 다운로드</a></li>
<li class="chapter" data-level="3.2.3" data-path="api를-이용한-데이터-수집.html"><a href="api를-이용한-데이터-수집.html#fred-데이터-다운로드"><i class="fa fa-check"></i><b>3.2.3</b> FRED 데이터 다운로드</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="크롤링-이해하기.html"><a href="크롤링-이해하기.html"><i class="fa fa-check"></i><b>4</b> 크롤링 이해하기</a>
<ul>
<li class="chapter" data-level="4.1" data-path="크롤링-이해하기.html"><a href="크롤링-이해하기.html#get과-post-방식-이해하기"><i class="fa fa-check"></i><b>4.1</b> GET과 POST 방식 이해하기</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="크롤링-이해하기.html"><a href="크롤링-이해하기.html#get-방식"><i class="fa fa-check"></i><b>4.1.1</b> GET 방식</a></li>
<li class="chapter" data-level="4.1.2" data-path="크롤링-이해하기.html"><a href="크롤링-이해하기.html#post-방식"><i class="fa fa-check"></i><b>4.1.2</b> POST 방식</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="크롤링-이해하기.html"><a href="크롤링-이해하기.html#크롤링-예제"><i class="fa fa-check"></i><b>4.2</b> 크롤링 예제</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="크롤링-이해하기.html"><a href="크롤링-이해하기.html#금융-속보-크롤링"><i class="fa fa-check"></i><b>4.2.1</b> 금융 속보 크롤링</a></li>
<li class="chapter" data-level="4.2.2" data-path="크롤링-이해하기.html"><a href="크롤링-이해하기.html#기업공시채널에서-오늘의-공시-불러오기"><i class="fa fa-check"></i><b>4.2.2</b> 기업공시채널에서 오늘의 공시 불러오기</a></li>
<li class="chapter" data-level="4.2.3" data-path="크롤링-이해하기.html"><a href="크롤링-이해하기.html#네이버-금융에서-주식티커-크롤링"><i class="fa fa-check"></i><b>4.2.3</b> 네이버 금융에서 주식티커 크롤링</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="금융-데이터-수집하기-기본.html"><a href="금융-데이터-수집하기-기본.html"><i class="fa fa-check"></i><b>5</b> 금융 데이터 수집하기 (기본)</a>
<ul>
<li class="chapter" data-level="5.1" data-path="금융-데이터-수집하기-기본.html"><a href="금융-데이터-수집하기-기본.html#한국거래소의-산업별-현황-및-개별지표-크롤링"><i class="fa fa-check"></i><b>5.1</b> 한국거래소의 산업별 현황 및 개별지표 크롤링</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="금융-데이터-수집하기-기본.html"><a href="금융-데이터-수집하기-기본.html#업종분류-현황-크롤링"><i class="fa fa-check"></i><b>5.1.1</b> 업종분류 현황 크롤링</a></li>
<li class="chapter" data-level="5.1.2" data-path="금융-데이터-수집하기-기본.html"><a href="금융-데이터-수집하기-기본.html#개별종목-지표-크롤링"><i class="fa fa-check"></i><b>5.1.2</b> 개별종목 지표 크롤링</a></li>
<li class="chapter" data-level="5.1.3" data-path="금융-데이터-수집하기-기본.html"><a href="금융-데이터-수집하기-기본.html#최근-영업일-기준-데이터-받기"><i class="fa fa-check"></i><b>5.1.3</b> 최근 영업일 기준 데이터 받기</a></li>
<li class="chapter" data-level="5.1.4" data-path="금융-데이터-수집하기-기본.html"><a href="금융-데이터-수집하기-기본.html#거래소-데이터-정리하기"><i class="fa fa-check"></i><b>5.1.4</b> 거래소 데이터 정리하기</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="금융-데이터-수집하기-기본.html"><a href="금융-데이터-수집하기-기본.html#wics-기준-섹터정보-크롤링"><i class="fa fa-check"></i><b>5.2</b> WICS 기준 섹터정보 크롤링</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="금융-데이터-수집하기-심화.html"><a href="금융-데이터-수집하기-심화.html"><i class="fa fa-check"></i><b>6</b> 금융 데이터 수집하기 (심화)</a>
<ul>
<li class="chapter" data-level="6.1" data-path="금융-데이터-수집하기-심화.html"><a href="금융-데이터-수집하기-심화.html#수정주가-크롤링"><i class="fa fa-check"></i><b>6.1</b> 수정주가 크롤링</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="금융-데이터-수집하기-심화.html"><a href="금융-데이터-수집하기-심화.html#개별종목-주가-크롤링"><i class="fa fa-check"></i><b>6.1.1</b> 개별종목 주가 크롤링</a></li>
<li class="chapter" data-level="6.1.2" data-path="금융-데이터-수집하기-심화.html"><a href="금융-데이터-수집하기-심화.html#전-종목-주가-크롤링"><i class="fa fa-check"></i><b>6.1.2</b> 전 종목 주가 크롤링</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="금융-데이터-수집하기-심화.html"><a href="금융-데이터-수집하기-심화.html#재무제표-및-가치지표-크롤링"><i class="fa fa-check"></i><b>6.2</b> 재무제표 및 가치지표 크롤링</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="금융-데이터-수집하기-심화.html"><a href="금융-데이터-수집하기-심화.html#재무제표-다운로드"><i class="fa fa-check"></i><b>6.2.1</b> 재무제표 다운로드</a></li>
<li class="chapter" data-level="6.2.2" data-path="금융-데이터-수집하기-심화.html"><a href="금융-데이터-수집하기-심화.html#가치지표-계산하기"><i class="fa fa-check"></i><b>6.2.2</b> 가치지표 계산하기</a></li>
<li class="chapter" data-level="6.2.3" data-path="금융-데이터-수집하기-심화.html"><a href="금융-데이터-수집하기-심화.html#전-종목-재무제표-및-가치지표-다운로드"><i class="fa fa-check"></i><b>6.2.3</b> 전 종목 재무제표 및 가치지표 다운로드</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="금융-데이터-수집하기-심화.html"><a href="금융-데이터-수집하기-심화.html#dart의-open-api를-이용한-데이터-수집하기"><i class="fa fa-check"></i><b>6.3</b> DART의 Open API를 이용한 데이터 수집하기</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="금융-데이터-수집하기-심화.html"><a href="금융-데이터-수집하기-심화.html#api-key발급-및-추가하기"><i class="fa fa-check"></i><b>6.3.1</b> API Key발급 및 추가하기</a></li>
<li class="chapter" data-level="6.3.2" data-path="금융-데이터-수집하기-심화.html"><a href="금융-데이터-수집하기-심화.html#고유번호-다운로드"><i class="fa fa-check"></i><b>6.3.2</b> 고유번호 다운로드</a></li>
<li class="chapter" data-level="6.3.3" data-path="금융-데이터-수집하기-심화.html"><a href="금융-데이터-수집하기-심화.html#공시검색"><i class="fa fa-check"></i><b>6.3.3</b> 공시검색</a></li>
<li class="chapter" data-level="6.3.4" data-path="금융-데이터-수집하기-심화.html"><a href="금융-데이터-수집하기-심화.html#사업보고서-주요-정보"><i class="fa fa-check"></i><b>6.3.4</b> 사업보고서 주요 정보</a></li>
<li class="chapter" data-level="6.3.5" data-path="금융-데이터-수집하기-심화.html"><a href="금융-데이터-수집하기-심화.html#상장기업-재무정보"><i class="fa fa-check"></i><b>6.3.5</b> 상장기업 재무정보</a></li>
<li class="chapter" data-level="6.3.6" data-path="금융-데이터-수집하기-심화.html"><a href="금융-데이터-수집하기-심화.html#단일회사-전체-재무제표"><i class="fa fa-check"></i><b>6.3.6</b> 단일회사 전체 재무제표</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="데이터-정리하기.html"><a href="데이터-정리하기.html"><i class="fa fa-check"></i><b>7</b> 데이터 정리하기</a>
<ul>
<li class="chapter" data-level="7.1" data-path="데이터-정리하기.html"><a href="데이터-정리하기.html#주가-정리하기"><i class="fa fa-check"></i><b>7.1</b> 주가 정리하기</a></li>
<li class="chapter" data-level="7.2" data-path="데이터-정리하기.html"><a href="데이터-정리하기.html#재무제표-정리하기"><i class="fa fa-check"></i><b>7.2</b> 재무제표 정리하기</a></li>
<li class="chapter" data-level="7.3" data-path="데이터-정리하기.html"><a href="데이터-정리하기.html#가치지표-정리하기"><i class="fa fa-check"></i><b>7.3</b> 가치지표 정리하기</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="데이터-분석-및-시각화하기.html"><a href="데이터-분석-및-시각화하기.html"><i class="fa fa-check"></i><b>8</b> 데이터 분석 및 시각화하기</a>
<ul>
<li class="chapter" data-level="8.1" data-path="데이터-분석-및-시각화하기.html"><a href="데이터-분석-및-시각화하기.html#종목정보-데이터-분석"><i class="fa fa-check"></i><b>8.1</b> 종목정보 데이터 분석</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="데이터-분석-및-시각화하기.html"><a href="데이터-분석-및-시각화하기.html#join-데이터-합치기-1"><i class="fa fa-check"></i><b>8.1.1</b> <code>*_join</code>: 데이터 합치기</a></li>
<li class="chapter" data-level="8.1.2" data-path="데이터-분석-및-시각화하기.html"><a href="데이터-분석-및-시각화하기.html#glimpse-데이터-구조-확인하기"><i class="fa fa-check"></i><b>8.1.2</b> <code>glimpse()</code>: 데이터 구조 확인하기</a></li>
<li class="chapter" data-level="8.1.3" data-path="데이터-분석-및-시각화하기.html"><a href="데이터-분석-및-시각화하기.html#rename-열-이름-바꾸기"><i class="fa fa-check"></i><b>8.1.3</b> <code>rename()</code>: 열 이름 바꾸기</a></li>
<li class="chapter" data-level="8.1.4" data-path="데이터-분석-및-시각화하기.html"><a href="데이터-분석-및-시각화하기.html#distinct-고유한-값-확인"><i class="fa fa-check"></i><b>8.1.4</b> distinct(): 고유한 값 확인</a></li>
<li class="chapter" data-level="8.1.5" data-path="데이터-분석-및-시각화하기.html"><a href="데이터-분석-및-시각화하기.html#select-원하는-열만-선택"><i class="fa fa-check"></i><b>8.1.5</b> <code>select()</code>: 원하는 열만 선택</a></li>
<li class="chapter" data-level="8.1.6" data-path="데이터-분석-및-시각화하기.html"><a href="데이터-분석-및-시각화하기.html#mutate-열-생성-및-데이터-변형"><i class="fa fa-check"></i><b>8.1.6</b> <code>mutate()</code>: 열 생성 및 데이터 변형</a></li>
<li class="chapter" data-level="8.1.7" data-path="데이터-분석-및-시각화하기.html"><a href="데이터-분석-및-시각화하기.html#filter-조건을-충족하는-행-선택"><i class="fa fa-check"></i><b>8.1.7</b> <code>filter()</code>: 조건을 충족하는 행 선택</a></li>
<li class="chapter" data-level="8.1.8" data-path="데이터-분석-및-시각화하기.html"><a href="데이터-분석-및-시각화하기.html#summarize-요약-통곗값-계산"><i class="fa fa-check"></i><b>8.1.8</b> <code>summarize()</code>: 요약 통곗값 계산</a></li>
<li class="chapter" data-level="8.1.9" data-path="데이터-분석-및-시각화하기.html"><a href="데이터-분석-및-시각화하기.html#arrange-데이터-정렬"><i class="fa fa-check"></i><b>8.1.9</b> <code>arrange()</code>: 데이터 정렬</a></li>
<li class="chapter" data-level="8.1.10" data-path="데이터-분석-및-시각화하기.html"><a href="데이터-분석-및-시각화하기.html#row_number-순위-계산"><i class="fa fa-check"></i><b>8.1.10</b> <code>row_number()</code>: 순위 계산</a></li>
<li class="chapter" data-level="8.1.11" data-path="데이터-분석-및-시각화하기.html"><a href="데이터-분석-및-시각화하기.html#ntile-분위수-계산"><i class="fa fa-check"></i><b>8.1.11</b> <code>ntile()</code>: 분위수 계산</a></li>
<li class="chapter" data-level="8.1.12" data-path="데이터-분석-및-시각화하기.html"><a href="데이터-분석-및-시각화하기.html#group_by-그룹별로-데이터를-묶기"><i class="fa fa-check"></i><b>8.1.12</b> <code>group_by()</code>: 그룹별로 데이터를 묶기</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="데이터-분석-및-시각화하기.html"><a href="데이터-분석-및-시각화하기.html#ggplot-기초"><i class="fa fa-check"></i><b>8.2</b> <code>ggplot()</code> 기초</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="데이터-분석-및-시각화하기.html"><a href="데이터-분석-및-시각화하기.html#diamonds-데이터셋"><i class="fa fa-check"></i><b>8.2.1</b> diamonds 데이터셋</a></li>
<li class="chapter" data-level="8.2.2" data-path="데이터-분석-및-시각화하기.html"><a href="데이터-분석-및-시각화하기.html#data-aesthetics-geometrics"><i class="fa fa-check"></i><b>8.2.2</b> Data, Aesthetics, Geometrics</a></li>
<li class="chapter" data-level="8.2.3" data-path="데이터-분석-및-시각화하기.html"><a href="데이터-분석-및-시각화하기.html#facets"><i class="fa fa-check"></i><b>8.2.3</b> Facets</a></li>
<li class="chapter" data-level="8.2.4" data-path="데이터-분석-및-시각화하기.html"><a href="데이터-분석-및-시각화하기.html#statistics"><i class="fa fa-check"></i><b>8.2.4</b> Statistics</a></li>
<li class="chapter" data-level="8.2.5" data-path="데이터-분석-및-시각화하기.html"><a href="데이터-분석-및-시각화하기.html#coordinates"><i class="fa fa-check"></i><b>8.2.5</b> Coordinates</a></li>
<li class="chapter" data-level="8.2.6" data-path="데이터-분석-및-시각화하기.html"><a href="데이터-분석-및-시각화하기.html#theme"><i class="fa fa-check"></i><b>8.2.6</b> Theme</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="데이터-분석-및-시각화하기.html"><a href="데이터-분석-및-시각화하기.html#종목정보-시각화"><i class="fa fa-check"></i><b>8.3</b> 종목정보 시각화</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="데이터-분석-및-시각화하기.html"><a href="데이터-분석-및-시각화하기.html#geom_point-산점도-나타내기"><i class="fa fa-check"></i><b>8.3.1</b> <code>geom_point()</code>: 산점도 나타내기</a></li>
<li class="chapter" data-level="8.3.2" data-path="데이터-분석-및-시각화하기.html"><a href="데이터-분석-및-시각화하기.html#geom_histogram-히스토그램-나타내기"><i class="fa fa-check"></i><b>8.3.2</b> <code>geom_histogram()</code>: 히스토그램 나타내기</a></li>
<li class="chapter" data-level="8.3.3" data-path="데이터-분석-및-시각화하기.html"><a href="데이터-분석-및-시각화하기.html#geom_boxplot-박스-플롯-나타내기"><i class="fa fa-check"></i><b>8.3.3</b> <code>geom_boxplot()</code>: 박스 플롯 나타내기</a></li>
<li class="chapter" data-level="8.3.4" data-path="데이터-분석-및-시각화하기.html"><a href="데이터-분석-및-시각화하기.html#dplyr과-ggplot을-연결하여-사용하기"><i class="fa fa-check"></i><b>8.3.4</b> <code>dplyr</code>과 <code>ggplot</code>을 연결하여 사용하기</a></li>
<li class="chapter" data-level="8.3.5" data-path="데이터-분석-및-시각화하기.html"><a href="데이터-분석-및-시각화하기.html#geom_bar-막대-그래프-나타내기"><i class="fa fa-check"></i><b>8.3.5</b> <code>geom_bar()</code>: 막대 그래프 나타내기</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="데이터-분석-및-시각화하기.html"><a href="데이터-분석-및-시각화하기.html#주가-및-수익률-시각화"><i class="fa fa-check"></i><b>8.4</b> 주가 및 수익률 시각화</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="데이터-분석-및-시각화하기.html"><a href="데이터-분석-및-시각화하기.html#주가-그래프-나타내기"><i class="fa fa-check"></i><b>8.4.1</b> 주가 그래프 나타내기</a></li>
<li class="chapter" data-level="8.4.2" data-path="데이터-분석-및-시각화하기.html"><a href="데이터-분석-및-시각화하기.html#인터랙티브-그래프-나타내기"><i class="fa fa-check"></i><b>8.4.2</b> 인터랙티브 그래프 나타내기</a></li>
<li class="chapter" data-level="8.4.3" data-path="데이터-분석-및-시각화하기.html"><a href="데이터-분석-및-시각화하기.html#연도별-수익률-나타내기"><i class="fa fa-check"></i><b>8.4.3</b> 연도별 수익률 나타내기</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="퀀트-전략을-이용한-종목선정-기본.html"><a href="퀀트-전략을-이용한-종목선정-기본.html"><i class="fa fa-check"></i><b>9</b> 퀀트 전략을 이용한 종목선정 (기본)</a>
<ul>
<li class="chapter" data-level="9.1" data-path="퀀트-전략을-이용한-종목선정-기본.html"><a href="퀀트-전략을-이용한-종목선정-기본.html#베타-이해하기"><i class="fa fa-check"></i><b>9.1</b> 베타 이해하기</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="퀀트-전략을-이용한-종목선정-기본.html"><a href="퀀트-전략을-이용한-종목선정-기본.html#베타-계산하기"><i class="fa fa-check"></i><b>9.1.1</b> 베타 계산하기</a></li>
<li class="chapter" data-level="9.1.2" data-path="퀀트-전략을-이용한-종목선정-기본.html"><a href="퀀트-전략을-이용한-종목선정-기본.html#베타-시각화"><i class="fa fa-check"></i><b>9.1.2</b> 베타 시각화</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="퀀트-전략을-이용한-종목선정-기본.html"><a href="퀀트-전략을-이용한-종목선정-기본.html#저변동성-전략"><i class="fa fa-check"></i><b>9.2</b> 저변동성 전략</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="퀀트-전략을-이용한-종목선정-기본.html"><a href="퀀트-전략을-이용한-종목선정-기본.html#저변동성-포트폴리오-구하기-일간-기준"><i class="fa fa-check"></i><b>9.2.1</b> 저변동성 포트폴리오 구하기: 일간 기준</a></li>
<li class="chapter" data-level="9.2.2" data-path="퀀트-전략을-이용한-종목선정-기본.html"><a href="퀀트-전략을-이용한-종목선정-기본.html#저변동성-포트폴리오-구하기-주간-기준"><i class="fa fa-check"></i><b>9.2.2</b> 저변동성 포트폴리오 구하기: 주간 기준</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="퀀트-전략을-이용한-종목선정-기본.html"><a href="퀀트-전략을-이용한-종목선정-기본.html#모멘텀-전략"><i class="fa fa-check"></i><b>9.3</b> 모멘텀 전략</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="퀀트-전략을-이용한-종목선정-기본.html"><a href="퀀트-전략을-이용한-종목선정-기본.html#모멘텀-포트폴리오-구하기-12개월-모멘텀"><i class="fa fa-check"></i><b>9.3.1</b> 모멘텀 포트폴리오 구하기: 12개월 모멘텀</a></li>
<li class="chapter" data-level="9.3.2" data-path="퀀트-전략을-이용한-종목선정-기본.html"><a href="퀀트-전략을-이용한-종목선정-기본.html#모멘텀-포트폴리오-구하기-위험조정-수익률"><i class="fa fa-check"></i><b>9.3.2</b> 모멘텀 포트폴리오 구하기: 위험조정 수익률</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="퀀트-전략을-이용한-종목선정-기본.html"><a href="퀀트-전략을-이용한-종목선정-기본.html#밸류-전략"><i class="fa fa-check"></i><b>9.4</b> 밸류 전략</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="퀀트-전략을-이용한-종목선정-기본.html"><a href="퀀트-전략을-이용한-종목선정-기본.html#밸류-포트폴리오-구하기-저pbr"><i class="fa fa-check"></i><b>9.4.1</b> 밸류 포트폴리오 구하기: 저PBR</a></li>
<li class="chapter" data-level="9.4.2" data-path="퀀트-전략을-이용한-종목선정-기본.html"><a href="퀀트-전략을-이용한-종목선정-기본.html#각-지표-결합하기"><i class="fa fa-check"></i><b>9.4.2</b> 각 지표 결합하기</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="퀀트-전략을-이용한-종목선정-기본.html"><a href="퀀트-전략을-이용한-종목선정-기본.html#퀄리티-전략"><i class="fa fa-check"></i><b>9.5</b> 퀄리티 전략</a>
<ul>
<li class="chapter" data-level="9.5.1" data-path="퀀트-전략을-이용한-종목선정-기본.html"><a href="퀀트-전략을-이용한-종목선정-기본.html#f-score"><i class="fa fa-check"></i><b>9.5.1</b> F-Score</a></li>
<li class="chapter" data-level="9.5.2" data-path="퀀트-전략을-이용한-종목선정-기본.html"><a href="퀀트-전략을-이용한-종목선정-기본.html#각-지표를-결합하기"><i class="fa fa-check"></i><b>9.5.2</b> 각 지표를 결합하기</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="퀀트-전략을-이용한-종목선정-심화.html"><a href="퀀트-전략을-이용한-종목선정-심화.html"><i class="fa fa-check"></i><b>10</b> 퀀트 전략을 이용한 종목선정 (심화)</a>
<ul>
<li class="chapter" data-level="10.1" data-path="퀀트-전략을-이용한-종목선정-심화.html"><a href="퀀트-전략을-이용한-종목선정-심화.html#섹터-중립-포트폴리오"><i class="fa fa-check"></i><b>10.1</b> 섹터 중립 포트폴리오</a></li>
<li class="chapter" data-level="10.2" data-path="퀀트-전략을-이용한-종목선정-심화.html"><a href="퀀트-전략을-이용한-종목선정-심화.html#마법공식"><i class="fa fa-check"></i><b>10.2</b> 마법공식</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="퀀트-전략을-이용한-종목선정-심화.html"><a href="퀀트-전략을-이용한-종목선정-심화.html#퀄리티와-밸류-간의-관계"><i class="fa fa-check"></i><b>10.2.1</b> 퀄리티와 밸류 간의 관계</a></li>
<li class="chapter" data-level="10.2.2" data-path="퀀트-전략을-이용한-종목선정-심화.html"><a href="퀀트-전략을-이용한-종목선정-심화.html#마법공식-이해하기"><i class="fa fa-check"></i><b>10.2.2</b> 마법공식 이해하기</a></li>
<li class="chapter" data-level="10.2.3" data-path="퀀트-전략을-이용한-종목선정-심화.html"><a href="퀀트-전략을-이용한-종목선정-심화.html#마법공식-구성하기"><i class="fa fa-check"></i><b>10.2.3</b> 마법공식 구성하기</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="퀀트-전략을-이용한-종목선정-심화.html"><a href="퀀트-전략을-이용한-종목선정-심화.html#이상치-데이터-제거-및-팩터의-결합"><i class="fa fa-check"></i><b>10.3</b> 이상치 데이터 제거 및 팩터의 결합</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="퀀트-전략을-이용한-종목선정-심화.html"><a href="퀀트-전략을-이용한-종목선정-심화.html#트림trim-이상치-데이터-삭제"><i class="fa fa-check"></i><b>10.3.1</b> 트림(Trim): 이상치 데이터 삭제</a></li>
<li class="chapter" data-level="10.3.2" data-path="퀀트-전략을-이용한-종목선정-심화.html"><a href="퀀트-전략을-이용한-종목선정-심화.html#윈저라이징winsorizing-이상치-데이터-대체"><i class="fa fa-check"></i><b>10.3.2</b> 윈저라이징(Winsorizing): 이상치 데이터 대체</a></li>
<li class="chapter" data-level="10.3.3" data-path="퀀트-전략을-이용한-종목선정-심화.html"><a href="퀀트-전략을-이용한-종목선정-심화.html#팩터의-결합-방법"><i class="fa fa-check"></i><b>10.3.3</b> 팩터의 결합 방법</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="퀀트-전략을-이용한-종목선정-심화.html"><a href="퀀트-전략을-이용한-종목선정-심화.html#멀티팩터-포트폴리오"><i class="fa fa-check"></i><b>10.4</b> 멀티팩터 포트폴리오</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="포트폴리오-구성.html"><a href="포트폴리오-구성.html"><i class="fa fa-check"></i><b>11</b> 포트폴리오 구성</a>
<ul>
<li class="chapter" data-level="11.1" data-path="포트폴리오-구성.html"><a href="포트폴리오-구성.html#최소분산-포트폴리오"><i class="fa fa-check"></i><b>11.1</b> 최소분산 포트폴리오</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="포트폴리오-구성.html"><a href="포트폴리오-구성.html#slsqp-함수를-이용한-최적화"><i class="fa fa-check"></i><b>11.1.1</b> <code>slsqp()</code> 함수를 이용한 최적화</a></li>
<li class="chapter" data-level="11.1.2" data-path="포트폴리오-구성.html"><a href="포트폴리오-구성.html#solve.qp-함수를-이용한-최적화"><i class="fa fa-check"></i><b>11.1.2</b> <code>solve.QP()</code> 함수를 이용한 최적화</a></li>
<li class="chapter" data-level="11.1.3" data-path="포트폴리오-구성.html"><a href="포트폴리오-구성.html#optimalportfolio-함수를-이용한-최적화"><i class="fa fa-check"></i><b>11.1.3</b> <code>optimalPortfolio()</code> 함수를 이용한 최적화</a></li>
<li class="chapter" data-level="11.1.4" data-path="포트폴리오-구성.html"><a href="포트폴리오-구성.html#결괏값들의-비교"><i class="fa fa-check"></i><b>11.1.4</b> 결괏값들의 비교</a></li>
<li class="chapter" data-level="11.1.5" data-path="포트폴리오-구성.html"><a href="포트폴리오-구성.html#최소-및-최대-투자비중-제약조건"><i class="fa fa-check"></i><b>11.1.5</b> 최소 및 최대 투자비중 제약조건</a></li>
<li class="chapter" data-level="11.1.6" data-path="포트폴리오-구성.html"><a href="포트폴리오-구성.html#각-자산별-제약조건의-추가"><i class="fa fa-check"></i><b>11.1.6</b> 각 자산별 제약조건의 추가</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="포트폴리오-구성.html"><a href="포트폴리오-구성.html#최대분산효과-포트폴리오"><i class="fa fa-check"></i><b>11.2</b> 최대분산효과 포트폴리오</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="포트폴리오-구성.html"><a href="포트폴리오-구성.html#solve.qp-함수를-이용한-최적화-1"><i class="fa fa-check"></i><b>11.2.1</b> <code>solve.QP()</code> 함수를 이용한 최적화</a></li>
<li class="chapter" data-level="11.2.2" data-path="포트폴리오-구성.html"><a href="포트폴리오-구성.html#optimalportfolio-함수를-이용한-최적화-1"><i class="fa fa-check"></i><b>11.2.2</b> <code>optimalPortfolio()</code> 함수를 이용한 최적화</a></li>
<li class="chapter" data-level="11.2.3" data-path="포트폴리오-구성.html"><a href="포트폴리오-구성.html#최소-및-최대-투자비중-제약조건-1"><i class="fa fa-check"></i><b>11.2.3</b> 최소 및 최대 투자비중 제약조건</a></li>
<li class="chapter" data-level="11.2.4" data-path="포트폴리오-구성.html"><a href="포트폴리오-구성.html#각-자산-별-제약조건의-추가"><i class="fa fa-check"></i><b>11.2.4</b> 각 자산 별 제약조건의 추가</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="포트폴리오-구성.html"><a href="포트폴리오-구성.html#위험균형-포트폴리오"><i class="fa fa-check"></i><b>11.3</b> 위험균형 포트폴리오</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="포트폴리오-구성.html"><a href="포트폴리오-구성.html#주식-60와-채권-40-포트폴리오의-위험기여도"><i class="fa fa-check"></i><b>11.3.1</b> 주식 60%와 채권 40% 포트폴리오의 위험기여도</a></li>
<li class="chapter" data-level="11.3.2" data-path="포트폴리오-구성.html"><a href="포트폴리오-구성.html#rp-함수를-이용한-최적화"><i class="fa fa-check"></i><b>11.3.2</b> <code>rp()</code> 함수를 이용한 최적화</a></li>
<li class="chapter" data-level="11.3.3" data-path="포트폴리오-구성.html"><a href="포트폴리오-구성.html#위험예산-포트폴리오"><i class="fa fa-check"></i><b>11.3.3</b> 위험예산 포트폴리오</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="포트폴리오-구성.html"><a href="포트폴리오-구성.html#인덱스-포트폴리오-구성하기"><i class="fa fa-check"></i><b>11.4</b> 인덱스 포트폴리오 구성하기</a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="포트폴리오-구성.html"><a href="포트폴리오-구성.html#시가총액비중-계산하기"><i class="fa fa-check"></i><b>11.4.1</b> 시가총액비중 계산하기</a></li>
<li class="chapter" data-level="11.4.2" data-path="포트폴리오-구성.html"><a href="포트폴리오-구성.html#인덱스-포트폴리오-복제하기"><i class="fa fa-check"></i><b>11.4.2</b> 인덱스 포트폴리오 복제하기</a></li>
<li class="chapter" data-level="11.4.3" data-path="포트폴리오-구성.html"><a href="포트폴리오-구성.html#팩터를-이용한-인핸스드-포트폴리오-구성하기"><i class="fa fa-check"></i><b>11.4.3</b> 팩터를 이용한 인핸스드 포트폴리오 구성하기</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="포트폴리오-백테스트.html"><a href="포트폴리오-백테스트.html"><i class="fa fa-check"></i><b>12</b> 포트폴리오 백테스트</a>
<ul>
<li class="chapter" data-level="12.1" data-path="포트폴리오-백테스트.html"><a href="포트폴리오-백테스트.html#return.portfolio-함수"><i class="fa fa-check"></i><b>12.1</b> <code>Return.Portfolio()</code> 함수</a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="포트폴리오-백테스트.html"><a href="포트폴리오-백테스트.html#인자-목록-살펴보기"><i class="fa fa-check"></i><b>12.1.1</b> 인자 목록 살펴보기</a></li>
<li class="chapter" data-level="12.1.2" data-path="포트폴리오-백테스트.html"><a href="포트폴리오-백테스트.html#출력값-살펴보기"><i class="fa fa-check"></i><b>12.1.2</b> 출력값 살펴보기</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="포트폴리오-백테스트.html"><a href="포트폴리오-백테스트.html#전통적인-60대-40-포트폴리오-백테스트"><i class="fa fa-check"></i><b>12.2</b> 전통적인 60대 40 포트폴리오 백테스트</a></li>
<li class="chapter" data-level="12.3" data-path="포트폴리오-백테스트.html"><a href="포트폴리오-백테스트.html#시점-선택-전략-백테스트"><i class="fa fa-check"></i><b>12.3</b> 시점 선택 전략 백테스트</a></li>
<li class="chapter" data-level="12.4" data-path="포트폴리오-백테스트.html"><a href="포트폴리오-백테스트.html#동적-자산배분-백테스트"><i class="fa fa-check"></i><b>12.4</b> 동적 자산배분 백테스트</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="성과-및-위험-평가.html"><a href="성과-및-위험-평가.html"><i class="fa fa-check"></i><b>13</b> 성과 및 위험 평가</a>
<ul>
<li class="chapter" data-level="13.1" data-path="성과-및-위험-평가.html"><a href="성과-및-위험-평가.html#결과-측정-지표"><i class="fa fa-check"></i><b>13.1</b> 결과 측정 지표</a>
<ul>
<li class="chapter" data-level="13.1.1" data-path="성과-및-위험-평가.html"><a href="성과-및-위험-평가.html#수익률-및-변동성"><i class="fa fa-check"></i><b>13.1.1</b> 수익률 및 변동성</a></li>
<li class="chapter" data-level="13.1.2" data-path="성과-및-위험-평가.html"><a href="성과-및-위험-평가.html#낙폭과-최대낙폭"><i class="fa fa-check"></i><b>13.1.2</b> 낙폭과 최대낙폭</a></li>
<li class="chapter" data-level="13.1.3" data-path="성과-및-위험-평가.html"><a href="성과-및-위험-평가.html#연도별-수익률"><i class="fa fa-check"></i><b>13.1.3</b> 연도별 수익률</a></li>
<li class="chapter" data-level="13.1.4" data-path="성과-및-위험-평가.html"><a href="성과-및-위험-평가.html#승률-및-롤링-윈도우-값"><i class="fa fa-check"></i><b>13.1.4</b> 승률 및 롤링 윈도우 값</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="성과-및-위험-평가.html"><a href="성과-및-위험-평가.html#팩터-회귀분석-및-테이블로-나타내기"><i class="fa fa-check"></i><b>13.2</b> 팩터 회귀분석 및 테이블로 나타내기</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="http://www.yes24.com/Product/Goods/97163849" target="blank">책 구입하러 가기</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R을 이용한 퀀트 투자 포트폴리오 만들기(개정판)</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="r-기초-배우기" class="section level1 unnumbered">
<h1>R 기초 배우기</h1>
<p>이번 장에서는 본 책의 핵심이 되는 언어인 R과 R 스튜디오의 설치, R 스튜디오의 화면 구성과 간단한 사용법에 대해서 배우도록 하겠습니다. 본 장은 R의 기초 중에서도 핵심만을 추린 것으로써, 기초에 대해 세세하게 다루지는 않습니다. 좀 더 탄탄한 기본기를 배우고 싶으신 분은 시중에 나와있는 훌륭한 R 기본 서적을 추가로 보실 것을 추천드립니다.</p>
<div id="r과-r-스튜디오-설치하기" class="section level2" number="0.1">
<h2><span class="header-section-number">0.1</span> R과 R 스튜디오 설치하기</h2>
<div id="r-설치하기" class="section level3" number="0.1.1">
<h3><span class="header-section-number">0.1.1</span> R 설치하기</h3>
<p>먼저 R 프로젝트 공식 사이트인 <a href="https://cran.r-project.org/" class="uri">https://cran.r-project.org/</a> 에 접속하여 본인의 OS에 맞는 설치 파일을 다운로드 합니다.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-2"></span>
<img src="images/rbasic_cran.png" alt="CRAN 사이트" width="100%" />
<p class="caption">
그림 0.1: CRAN 사이트
</p>
</div>
<p>가장 상단의 [base]를 선택합니다.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-3"></span>
<img src="images/rbasic_cran2.png" alt="R 다운로드 화면" width="100%" />
<p class="caption">
그림 0.2: R 다운로드 화면
</p>
</div>
<p>[Download R x.x.x for Windows] 항목을 클릭하면 설치 파일이 다운로드 됩니다. 다운로드 받은 파일을 실행해 설치를 하며, 옵션은 수정하지 않아도 됩니다.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-4"></span>
<img src="images/rbasic_cran3.png" alt="R 설치파일 다운로드" width="100%" />
<p class="caption">
그림 0.3: R 설치파일 다운로드
</p>
</div>
</div>
<div id="r-스튜디오-설치하기" class="section level3" number="0.1.2">
<h3><span class="header-section-number">0.1.2</span> R 스튜디오 설치하기</h3>
<p>위에서 설치한 R GUI를 그대로 쓰는 사용자는 거의 없습니다. 대부분의 경우 R을 사용하기 편리하게 만들어주는 IDE 소프트웨어인 R 스튜디오를 사용하므로, 해당 프로그램을 설치하도록 합니다. R 스튜디오를 사용하려면 R이 먼저 설치되어 있어야 하며, R과 마찬가지로 무료로 사용할 수 있습니다. 먼저 아래 사이트에 접속합니다.</p>
<pre><code>https://www.rstudio.com/products/rstudio/download/</code></pre>
<p>하단의 [All Installers] 항목에서 본인의 OS에 해당하는 파일을 다운로드 받아 설치합니다.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-5"></span>
<img src="images/rbasic_rstudio.png" alt="R 스튜디오 설치파일 다운로드" width="100%" />
<p class="caption">
그림 0.4: R 스튜디오 설치파일 다운로드
</p>
</div>
<div class="infobox note">
<p>윈도우 사용자의 경우 간혹 R 스튜디오를 실행하는데 있어 오류가 발생할 수 있습니다.</p>
<ol style="list-style-type: decimal">
<li>R 스튜디오가 관리자 권한으로 실행되지 않으면 오류가 발생할 수 있으며, 이 경우 아래와 같은 방법으로 해결이 가능합니다.</li>
</ol>
<ul>
<li>R 스튜디오 바로가기 아이콘을 마우스 우클릭으로 연 후, [속성] → [호환성]을 클릭합니다.</li>
<li>[관리자 권한으로 이 프로그램 실행]에 체크한 후 [확인]을 누릅니다.</li>
</ul>
<p><br>
2. 윈도우 사용자 계정이 한글인 경우 기존 사용자 계정을 영문으로 변경하거나, 영문으로 된 사용자 계정을 새로 추가합니다.</p>
</div>
</div>
</div>
<div id="r-스튜디오-화면-구성" class="section level2" number="0.2">
<h2><span class="header-section-number">0.2</span> R 스튜디오 화면 구성</h2>
<p>처음으로 R 스튜디오를 실행하면 다음과 같은 화면으로 구성되어 있습니다. 이 중 소스 창을 열기 위해 네모 2개가 겹쳐 있는 모양(<img src="images/rbasic_rstudio_small.png" />)의 버튼을 클릭합니다.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-6"></span>
<img src="images/rbasic_rstudio_base1.png" alt="R 스튜디오 화면구성" width="100%" />
<p class="caption">
그림 0.5: R 스튜디오 화면구성
</p>
</div>
<p>소스 창이 활성화되면 총 4개의 창으로 화면이 구성되며, 각 창의 크기는 경계선 부분을 드래그하여 조절할 수 있습니다.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-7"></span>
<img src="images/rbasic_rstudio_base2.png" alt="R 스튜디오 화면구성 (2)" width="100%" />
<p class="caption">
그림 0.6: R 스튜디오 화면구성 (2)
</p>
</div>
<p><strong>1. 콘솔 창</strong></p>
<p>좌측 하단에 있는 콘솔 창은 코드를 입력하고 결과물을 출력하는 곳입니다.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-8"></span>
<img src="images/rbasic_rstudio_console.png" alt="R 스튜디오 콘솔 창" width="100%" />
<p class="caption">
그림 0.7: R 스튜디오 콘솔 창
</p>
</div>
<p>콘솔 창의 &gt; 기호 뒤에 <strong>1+1</strong>을 입력하면 그 결과값인 <strong>2</strong>가 출력됩니다.</p>
<p>이 외에도 [Terminal] 탭에서는 시스템 쉘을 이용해 운영 체제를 조작할 수 있습니다.</p>
<p><strong>2. 소스 창</strong></p>
<p>좌측 상단에 있는 소스 창은 코드를 기록할 수 있는 공간이며, 이를 저장한 파일을 스크립트라고 합니다. 콘솔 창과는 다르게 코드를 입력하여도 바로 실행이 되지 않으며, 엔터를 누르면 행이 바뀝니다. 실행하고자 하는 코드가 있는 행을 선택한 후, [Ctrl + Enter]키를 누르면 해당 코드가 실행됩니다.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-9"></span>
<img src="images/rbasic_rstudio_console2.png" alt="R 스튜디오 소스 창의 실행" width="100%" />
<p class="caption">
그림 0.8: R 스튜디오 소스 창의 실행
</p>
</div>
<p>3*7이란 코드가 있는 곳에 커서를 둔 후 [Ctrl + Enter]키를 누르면 해당 코드가 콘솔 창에서 실행됩니다. 만일 여러줄의 명령어를 한번에 실행하고 할 경우, 원하는 부분의 코드를 마우스로 드래그하여 선택한 후 [Ctrl + Enter]키를 누르면 코드가 순차적으로 콘솔 창에 입력되면서 실행됩니다.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-10"></span>
<img src="images/rbasic_rstudio_console3.png" alt="R 스튜디오 소스 저장하기" width="100%" />
<p class="caption">
그림 0.9: R 스튜디오 소스 저장하기
</p>
</div>
<p>위에서 작성한 코드를 저장해보도록 하겠습니다. 저장 버튼(<img src="images/rbasic_rstudio_save.png" />)을 클릭한 후 원하는 폴더 및 파일 이름을 입력 한 후 [Save] 버튼을 누릅니다.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-11"></span>
<img src="images/rbasic_rstudio_console4.png" alt="R 스튜디오 소스 저장하기 (2)" width="100%" />
<p class="caption">
그림 0.10: R 스튜디오 소스 저장하기 (2)
</p>
</div>
<p>Untitled1로 되어 있던 스크립트의 이름이 저장한 이름으로 바뀌며, 스크립트가 저장되어 있는 것이 확인됩니다. 이처럼 코딩을 한 후 스크립트를 저장할 경우, 나중에 해당 내역을 그대로 불러올 수 있습니다.</p>
<p><strong>3. 환경 창</strong></p>
<p>우측 상단에 있는 환경 창은 생성된 데이터를 보여주는 화면입니다.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-12"></span>
<img src="images/rbasic_rstudio_env.png" alt="R 스튜디오 환경 창" width="100%" />
<p class="caption">
그림 0.11: R 스튜디오 환경 창
</p>
</div>
<p>스크립트 창에서 <strong>a = 1</strong>을 입력하면, 환경 창의 Values 목록에 a가 생기며 그 값은 1로 표시됩니다.</p>
<p>이 외에도 환경 창의 [History] 탭은 이제까지 실행했던 코드의 내역을 볼 수 있으며, [Connections] 탭은 SQL이나 Spark 등 데이터베이스와의 연결을 도와줍니다.</p>
<p><strong>4. 파일 창</strong></p>
<p>우측 하단에 있는 파일 창은 윈도우의 파일 탐색기와 비슷한 역할을 하며, 워킹 디렉터리 내의 파일을 보여줍니다. 이 외에도 [Plots] 탭은 그래프를 보여주며 [Packages] 탭은 설치된 패키지의 목록을 보여줍니다. [Help] 탭은 도움말을 보여주며, [Viewer] 탭은 분석 결과를 HTML 등 웹 문서로 출력한 모습을 보여줍니다.</p>
</div>
<div id="r-스튜디오-설정하기" class="section level2" number="0.3">
<h2><span class="header-section-number">0.3</span> R 스튜디오 설정하기</h2>
<p>R 스튜디오는 기본적으로 흰색 바탕에 검은색 글씨로 설정되어 있습니다. 그러나 흰 화면에서 작업을 하게 되면 눈이 쉽게 피로해지며, 시력에도 좋지 않습니다. 이를 방지하기 위해 어두운 화면으로 설정을 변경해주는 것이 좋습니다.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-13"></span>
<img src="images/rbasic_rstudio_dark.png" alt="R 스튜디오의 테마 선택" width="100%" />
<p class="caption">
그림 0.12: R 스튜디오의 테마 선택
</p>
</div>
<p>상단 탭에서 [Tools] → [Global Options]를 선택한 후, Options의 [Appearance] 탭의 [Editor theme]을 통해 각종 테마를 적용할 수 있습니다. 이 중 본인의 마음에 드는 테마를 선택한 후, [OK] 버튼을 누릅니다.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-14"></span>
<img src="images/rbasic_rstudio_dark2.png" alt="R 스튜디오의 다크모드 적용" width="100%" />
<p class="caption">
그림 0.13: R 스튜디오의 다크모드 적용
</p>
</div>
<p>화면의 배경이 어두워져 눈이 한결 편해졌습니다.</p>
<p>또한 스크립트 내용 중 한글이 깨지는 것을 방지하기 위해 인코딩 방식을 설정할 필요도 있습니다.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-15"></span>
<img src="images/rbasic_rstudio_encoding.png" alt="R 스튜디오의 인코딩 변경" width="100%" />
<p class="caption">
그림 0.14: R 스튜디오의 인코딩 변경
</p>
</div>
<p>상단 탭에서 [Tools] → [Global Options]를 선택한 후, Options의 [Code] 탭의 [Default text encoding] 부분의 [Change]를 눌러 <strong>UTF-8</strong>로 변경해줍니다.</p>
<div class="infobox note">
<p>인코딩은 컴퓨터가 문자를 표현하는 방식을 의미하며, 이에 대해서는 나중 장에서 다시 자세하게 다루도록 합니다.</p>
</div>
<p>해당 방법으로도 스크립트의 인코딩이 깨질 경우 [File → Reopen with Encoding] 메뉴에서 [UTF-8] 항목을 선택하고 [Set as default encoding for source files] 항목을 선택한 후 [OK]를 클릭합니다. UTF-8로 인코딩이 설정된 후 파일을 다시 열리게 됩니다.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-16"></span>
<img src="images/rbasic_reopen.png" alt="인코딩 변경 후 재시작" width="100%" />
<p class="caption">
그림 0.15: 인코딩 변경 후 재시작
</p>
</div>
</div>
<div id="프로젝트-만들기" class="section level2" number="0.4">
<h2><span class="header-section-number">0.4</span> 프로젝트 만들기</h2>
<p>R 스튜디오에서 코딩을 하기 전에 프로젝트(Project)를 만들면 하나의 프로젝트에 사용되는 소스 코드, 이미지, 문서 등의 파일을 폴더별로 관리하여 효율적으로 관리할 수 있습니다.</p>
<p>먼저 R 스튜디오 상단의 육각형 모양 버튼(<img src="images/rbasic_rstudio_project.png" />)을 클릭하거나 [File → New Project]를 클릭합니다.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-17"></span>
<img src="images/rbasic_project.png" alt="프로젝트 생성" width="100%" />
<p class="caption">
그림 0.16: 프로젝트 생성
</p>
</div>
<p>[Create Project] 화면에서 가장 상단의 [New Directory]를 클릭합니다. 참고로 Existing Directory는 기존 폴더에 새로운 프로젝트를 만들때, Version Control은 깃허브 등의 버전 관리 시스템을 이용할 때 사용됩니다.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-18"></span>
<img src="images/rbasic_newproject.png" alt="새 프로젝트 생성" width="100%" />
<p class="caption">
그림 0.17: 새 프로젝트 생성
</p>
</div>
<p>[Project Type]에서 가장 상단의 [New Project]를 클릭합니다.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-19"></span>
<img src="images/rbasic_newproject2.png" alt="새 프로젝트 생성 (2)" width="100%" />
<p class="caption">
그림 0.18: 새 프로젝트 생성 (2)
</p>
</div>
<p>[Create New Project] 창에서 [Directory name] 항목에 새로 만들 프로젝트 이름을 입력합니다. [Create project as subdirectory of] 항목에는 프로젝트 폴더를 만들 위치를 선택하며, [Browse]를 클릭해 원하는 위치를 선택합니다. 그 후 하단의 [Creage Project]를 클릭합니다.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-20"></span>
<img src="images/rbasic_newproject3.png" alt="새 프로젝트 생성 (3)" width="100%" />
<p class="caption">
그림 0.19: 새 프로젝트 생성 (3)
</p>
</div>
<p>R 스튜디오가 재시작되면 우측 상단 부분이 프로젝트 이름으로 바뀌며, 파일 창의 윗부분도 프로젝트 폴더의 위치로 바뀝니다. 또한 폴더 내에 fin_ds.Rpoj 라는 파일이 생성됩니다. 스크립트 및 각종 파일들을 해당 프로젝트 폴더에 저장하여, 효율적으로 각종 작업을 관리할 수 있습니다.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-21"></span>
<img src="images/rbasic_newproject4.png" alt="새 프로젝트 생성 (4)" width="100%" />
<p class="caption">
그림 0.20: 새 프로젝트 생성 (4)
</p>
</div>
<div class="infobox note">
<p>프로젝트 이름과 폴더 경로에 한글이 들어가면 오류가 발생할 수 있으니, 영문으로 입력하는 것이 좋습니다.</p>
</div>
</div>
<div id="데이터-타입별-다루기" class="section level2" number="0.5">
<h2><span class="header-section-number">0.5</span> 데이터 타입별 다루기</h2>
<p>R과 R 스튜디오 설치가 끝났으면 본격적으로 R의 기본적인 사용법에 대해 배워보겠으며, 먼저 데이터의 타입별로 다루는 법부터 시작하겠습니다.</p>
<p>R 뿐만 아니라 각종 프로그래밍에는 여러가지 데이터 타입이 있으며, 이를 다루는 방법은 각각 다릅니다. 예를 들어 같은 ’3’도 숫자 3인지 문자 3인지에 따라 다루는 방법이 다릅니다. 따라서 데이터 타입의 종류와 이들을 어떻게 다루어야 하는지를 아는 것이 프로그래밍의 기초라고 할 수 있습니다.</p>
<div id="숫자-형태" class="section level3" number="0.5.1">
<h3><span class="header-section-number">0.5.1</span> 숫자 형태</h3>
<p>R에서 숫자(Numbers) 형태는 크게 integer와 double로 나눌 수 있습니다. 이 중 integer는 정수를 의미하며, double은 부동소수점 실수를 의미합니다.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="r-기초-배우기.html#cb2-1" aria-hidden="true" tabindex="-1"></a>dbl_var <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="fl">2.5</span>, <span class="fl">4.5</span>)</span>
<span id="cb2-2"><a href="r-기초-배우기.html#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="r-기초-배우기.html#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(dbl_var)</span></code></pre></div>
<pre><code>## [1] 1.0 2.5 4.5</code></pre>
<p>위와 같이 입력하면 double, 즉 소수점 형태의 숫자가 만들어 집니다.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="r-기초-배우기.html#cb4-1" aria-hidden="true" tabindex="-1"></a>int_var <span class="ot">=</span> <span class="fu">c</span>(1L, 6L, 5L)</span>
<span id="cb4-2"><a href="r-기초-배우기.html#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="r-기초-배우기.html#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(int_var)</span></code></pre></div>
<pre><code>## [1] 1 6 5</code></pre>
<p>만일 숫자 뒤에 <strong>L</strong>을 붙이면, integer(정수) 형태의 숫자가 만들어 집니다.</p>
<p>double 형태를 integer 형태로 바꾸려면 할 경우, <code>as.integer()</code> 함수를 사용해 쉽게 변경할 수 있습니다. 이처럼 R에서는 <code>as.*()</code> 함수의 형태로 각 데이터의 형태를 바꿀 수 있습니다.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="r-기초-배우기.html#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.integer</span>(dbl_var)</span></code></pre></div>
<pre><code>## [1] 1 2 4</code></pre>
<p>[1.0 2.5 4.5] 이던 dbl_var 값이 <code>as.integer()</code> 함수를 통해 소수점이 사라지고 정수 형태인 [1 2 4]로 변경되었습니다.</p>
<div id="숫자-생성하기" class="section level4" number="0.5.1.1">
<h4><span class="header-section-number">0.5.1.1</span> 숫자 생성하기</h4>
<p>R에서는 콜론(:)과 <code>c()</code> 함수를 통해 순서가 있는 숫자 벡터를 생성할 수 있습니다.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="r-기초-배우기.html#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
<p><strong>시작숫자:끝숫자</strong>의 형태로 입력하여 1에서 10까지 숫자가 생성됩니다.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="r-기초-배우기.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">10</span>)</span></code></pre></div>
<pre><code>## [1]  1  5 10</code></pre>
<p><code>c()</code> 함수 내부에 각각의 숫자를 입력할 경우, 이로 구성된 숫자 벡터가 생성됩니다.</p>
<p><code>seq()</code> 함수를 이용할 경우 더욱 다양하게 숫자 벡터를 생성할 수 있습니다. seq는 Sequence 즉 ’순서’의 약어입니다. 이처럼 R이나 여타 프로그래밍에서는 함수의 이름을 통해 대략적인 기능을 추론할 수 있습니다.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="r-기초-배우기.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">1</span>, <span class="at">to =</span> <span class="dv">21</span>, <span class="at">by =</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>##  [1]  1  3  5  7  9 11 13 15 17 19 21</code></pre>
<p><code>seq()</code> 함수 내부에 from에는 시작 숫자, to에는 종료 숫자, by에는 간격을 입력합니다. 즉 1에서 21까지 2 단위로 숫자가 생성됩니다.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="r-기초-배우기.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">21</span>, <span class="at">length.out =</span> <span class="dv">15</span>)</span></code></pre></div>
<pre><code>##  [1]  0.0  1.5  3.0  4.5  6.0  7.5  9.0 10.5 12.0 13.5 15.0 16.5 18.0 19.5 21.0</code></pre>
<p>만일 입력값에 <strong>by</strong> 대신 <strong>length.out</strong>을 쓸 경우 from에서 to 까지 동일한 증가폭으로 length.out 만큼의 숫자를 생성하며, 해당 예제에서는 총 15개의 숫자가 만들어집니다.</p>
<p><code>rep()</code> 함수 역시 숫자를 생성해주는 함수입니다.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="r-기초-배우기.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">times =</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 1 2 3 4 1 2 3 4</code></pre>
<p>rep는 Replicate 즉 ’복제하다’의 약어 입니다. 해당 함수 내에 <strong>times</strong>라는 입력값을 추가해줄 경우, 해당 숫자만큼 반복되어 벡터가 생성됩니다.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="r-기초-배우기.html#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">each =</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 1 1 2 2 3 3 4 4</code></pre>
<p>만일 <strong>each</strong>라는 입력값을 추가할 경우, 각각의 숫자를 n번 반복하여 벡터가 생성됩니다.</p>
</div>
<div id="올림-내림-반올림" class="section level4" number="0.5.1.2">
<h4><span class="header-section-number">0.5.1.2</span> 올림, 내림, 반올림</h4>
<p>함수를 통해 간단하게 숫자의 올림, 내림, 반올림을 할 수도 있습니다. 먼저 다음과 같이 숫자를 입력합니다.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="r-기초-배우기.html#cb20-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="fl">1.35</span>, <span class="fl">1.7</span>, <span class="fl">2.053</span>, <span class="fl">2.4</span>, <span class="fl">2.758</span>, <span class="fl">3.1</span>, <span class="fl">3.45</span>,</span>
<span id="cb20-2"><a href="r-기초-배우기.html#cb20-2" aria-hidden="true" tabindex="-1"></a>      <span class="fl">3.8</span>, <span class="fl">4.15</span>, <span class="fl">4.5</span>, <span class="fl">4.855</span>, <span class="fl">5.2</span>, <span class="fl">5.55</span>, <span class="fl">5.9</span>)</span></code></pre></div>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="r-기초-배우기.html#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(x)</span></code></pre></div>
<pre><code>##  [1] 1 1 2 2 2 3 3 3 4 4 4 5 5 6 6</code></pre>
<p><code>round()</code> 함수는 가장 가까운 정수로 반올림을 합니다.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="r-기초-배우기.html#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(x, <span class="at">digits =</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>##  [1] 1.00 1.35 1.70 2.05 2.40 2.76 3.10 3.45 3.80 4.15 4.50 4.86 5.20 5.55 5.90</code></pre>
<p>함수 내부에 <strong>digits</strong> 입력값을 추가해 줄 경우, 해당 자리수 만큼 반올림을 합니다. 위 예제에서는 소수 둘째자리 만큼 반올림을 하였습니다.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="r-기초-배우기.html#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ceiling</span>(x)</span></code></pre></div>
<pre><code>##  [1] 1 2 2 3 3 3 4 4 4 5 5 5 6 6 6</code></pre>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="r-기초-배우기.html#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">floor</span>(x)</span></code></pre></div>
<pre><code>##  [1] 1 1 1 2 2 2 3 3 3 4 4 4 5 5 5</code></pre>
<p><code>ceiling()</code> 함수는 올림을, <code>floor()</code> 함수는 내림을 실행합니다.</p>
</div>
</div>
<div id="문자열-형태" class="section level3" number="0.5.2">
<h3><span class="header-section-number">0.5.2</span> 문자열 형태</h3>
<p>일반적인 글자 혹은 텍스트를 문자열(Character Strings)이라고 합니다.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="r-기초-배우기.html#cb29-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">=</span> <span class="st">&#39;learning to create&#39;</span></span>
<span id="cb29-2"><a href="r-기초-배우기.html#cb29-2" aria-hidden="true" tabindex="-1"></a>b <span class="ot">=</span> <span class="st">&#39;character strings&#39;</span></span>
<span id="cb29-3"><a href="r-기초-배우기.html#cb29-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-4"><a href="r-기초-배우기.html#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(a, b)</span></code></pre></div>
<pre><code>## [1] &quot;learning to create character strings&quot;</code></pre>
<p>먼저 a와 b 변수에 각각의 문자를 입력한 후, R의 기본함수인 <code>paste()</code> 함수를 이용해 두 문자를 붙일 수 있습니다.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="r-기초-배우기.html#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(pi)</span></code></pre></div>
<pre><code>## [1] 3.142</code></pre>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="r-기초-배우기.html#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(<span class="st">&#39;pi is&#39;</span>, pi)</span></code></pre></div>
<pre><code>## [1] &quot;pi is 3.14159265358979&quot;</code></pre>
<p>원주율을 의미하는 pi는 원래 3.14159 라는 숫자가 입력되어 있습니다. 그러나 <code>paste()</code> 함수를 통해 문자열과 숫자를 합칠 경우, 그 결과값은 문자열이 됩니다.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="r-기초-배우기.html#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(<span class="st">&#39;I&#39;</span>, <span class="st">&#39;love&#39;</span>, <span class="st">&#39;R&#39;</span>, <span class="at">sep =</span> <span class="st">&#39;,&#39;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;I,love,R&quot;</code></pre>
<p><code>paste()</code> 함수 내부에 sep 인자를 추가할 경우, 각 단어를 구분하는 문자를 입력할 수 있습니다. 기존에는 각 문자가 공백을 기준으로 합쳐졌다면, 이번에는 콤마(,)를 기준으로 합쳐졌습니다.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="r-기초-배우기.html#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">paste0</span>(<span class="st">&#39;I&#39;</span>, <span class="st">&#39;love&#39;</span>, <span class="st">&#39;R&#39;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;IloveR&quot;</code></pre>
<p><code>paste0()</code> 함수는 구분 문자가 없이 결합됩니다.</p>
<div id="stringr-패키지를-이용한-문자열-다루기" class="section level4" number="0.5.2.1">
<h4><span class="header-section-number">0.5.2.1</span> <code>stringr</code> 패키지를 이용한 문자열 다루기</h4>
<p>R의 기본함수를 이용하여도 문자열을 다룰 수 있지만, <code>stringr</code> 패키지를 이용할 경우 더욱 다양한 작업을 수행할 수 있습니다.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="r-기초-배우기.html#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb39-2"><a href="r-기초-배우기.html#cb39-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-3"><a href="r-기초-배우기.html#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str_c</span>(<span class="st">&#39;Learning&#39;</span>, <span class="st">&#39;to&#39;</span>, <span class="st">&#39;use&#39;</span>, <span class="st">&#39;the&#39;</span>, <span class="st">&#39;stringr&#39;</span>, <span class="st">&#39;package&#39;</span>, <span class="at">sep =</span> <span class="st">&#39; &#39;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Learning to use the stringr package&quot;</code></pre>
<p><code>str_c()</code> 함수는 <code>paste()</code> 함수와 기능이 동일하며, sep 인자를 통해 구분자를 추가할 수 있습니다.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="r-기초-배우기.html#cb41-1" aria-hidden="true" tabindex="-1"></a>text <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&#39;Learning&#39;</span>, <span class="st">&#39;to&#39;</span>, <span class="cn">NA</span>, <span class="st">&#39;use&#39;</span>, <span class="st">&#39;the&#39;</span>, <span class="cn">NA</span>, <span class="st">&#39;stringr&#39;</span>, <span class="st">&#39;package&#39;</span>)</span>
<span id="cb41-2"><a href="r-기초-배우기.html#cb41-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-3"><a href="r-기초-배우기.html#cb41-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str_length</span>(text)</span></code></pre></div>
<pre><code>## [1]  8  2 NA  3  3 NA  7  7</code></pre>
<p><code>str_length()</code> 함수는 문자열 각각의 텍스트 갯수를 세줍니다.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="r-기초-배우기.html#cb43-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="st">&#39;Learning to use the stringr package&#39;</span></span>
<span id="cb43-2"><a href="r-기초-배우기.html#cb43-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-3"><a href="r-기초-배우기.html#cb43-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str_sub</span>(x, <span class="at">start =</span> <span class="dv">1</span>, <span class="at">end =</span> <span class="dv">15</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Learning to use&quot;</code></pre>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="r-기초-배우기.html#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_sub</span>(x, <span class="at">start =</span> <span class="sc">-</span><span class="dv">7</span>, <span class="at">end =</span> <span class="sc">-</span><span class="dv">1</span>)</span></code></pre></div>
<pre><code>## [1] &quot;package&quot;</code></pre>
<p><code>str_sub()</code> 함수는 start부터 end까지의 문자를 출력합니다. 만일 start 혹은 end에 음수를 입력하면, 문장의 뒤에서부터 start/end 지점이 계산됩니다. 즉, start와 end에 각각 -7와 -1을 입력하면 끝에서부터 일곱번째와 첫번째 지점이 시작점과 끝점이 됩니다.</p>
<p>텍스트 데이터를 다룰때는 빈 공백이 따라오는 경우가 많으며, 이는 대부분 제거해주어야 할 대상입니다.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="r-기초-배우기.html#cb47-1" aria-hidden="true" tabindex="-1"></a>text <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&#39;Text &#39;</span>, <span class="st">&#39; with&#39;</span>, <span class="st">&#39; whitespace &#39;</span>, <span class="st">&#39; on&#39;</span>, <span class="st">&#39;both &#39;</span>, <span class="st">&#39;sides &#39;</span>)</span>
<span id="cb47-2"><a href="r-기초-배우기.html#cb47-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-3"><a href="r-기초-배우기.html#cb47-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(text)</span></code></pre></div>
<pre><code>## [1] &quot;Text &quot;        &quot; with&quot;        &quot; whitespace &quot; &quot; on&quot;          &quot;both &quot;       
## [6] &quot;sides &quot;</code></pre>
<p>각 단어를 자세히 살펴보면 좌/우 혹은 양쪽에 공백이 있습니다. 이를 제거하도록 하겠습니다.</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="r-기초-배우기.html#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_trim</span>(text, <span class="at">side =</span> <span class="st">&#39;left&#39;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Text &quot;       &quot;with&quot;        &quot;whitespace &quot; &quot;on&quot;          &quot;both &quot;      
## [6] &quot;sides &quot;</code></pre>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="r-기초-배우기.html#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_trim</span>(text, <span class="at">side =</span> <span class="st">&#39;right&#39;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Text&quot;        &quot; with&quot;       &quot; whitespace&quot; &quot; on&quot;         &quot;both&quot;       
## [6] &quot;sides&quot;</code></pre>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="r-기초-배우기.html#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_trim</span>(text, <span class="at">side =</span> <span class="st">&#39;both&#39;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Text&quot;       &quot;with&quot;       &quot;whitespace&quot; &quot;on&quot;         &quot;both&quot;      
## [6] &quot;sides&quot;</code></pre>
<p><code>str_trim()</code> 함수는 공백을 제거해주는 기능을 합니다. side 인자에 <strong>left</strong>를 입력할 경우 각 텍스트 왼쪽의 공백을, <strong>right</strong>를 입력할 경우 오른쪽의 공백을, <strong>both</strong>를 입력할 경우 양쪽의 공백을 제거해줍니다.</p>
<p>마지막으로 원하는 자리수를 채우기 위해 문자열에 공백 혹은 특정 문자를 입력할 수도 있으며, <code>str_pad()</code> 함수를 통해 손쉽게 작업을 할 수 있습니다.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="r-기초-배우기.html#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_pad</span>(<span class="st">&#39;beer&#39;</span>, <span class="at">width =</span> <span class="dv">10</span>, <span class="at">side =</span> <span class="st">&#39;left&#39;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;      beer&quot;</code></pre>
<p>width에 해당하는 10자리를 맞추기 위해 side의 입력값인 좌측에 공백이 추가되었습니다.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="r-기초-배우기.html#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_pad</span>(<span class="st">&#39;beer&#39;</span>, <span class="at">width =</span> <span class="dv">10</span>, <span class="at">side =</span> <span class="st">&#39;left&#39;</span>, <span class="at">pad =</span> <span class="st">&#39;!&#39;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;!!!!!!beer&quot;</code></pre>
<p>pad 인자를 추가할 경우, 공백이 아닌 입력한 문자가 추가됩니다</p>
<p>아래 페이지에는 <code>stringr</code> 패키지의 자세한 사용법이 나와 있습니다.</p>
<pre><code>https://stringr.tidyverse.org/</code></pre>
</div>
</div>
<div id="날짜-형태" class="section level3" number="0.5.3">
<h3><span class="header-section-number">0.5.3</span> 날짜 형태</h3>
<p>시계열 작업을 위해서는 날짜(Date), 혹은 시간(Datetime) 형태를 다루어야 합니다.</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="r-기초-배우기.html#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Sys.timezone</span>()</span></code></pre></div>
<pre><code>## [1] &quot;Asia/Seoul&quot;</code></pre>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="r-기초-배우기.html#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Sys.Date</span>()</span></code></pre></div>
<pre><code>## [1] &quot;2021-11-20&quot;</code></pre>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="r-기초-배우기.html#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Sys.time</span>()</span></code></pre></div>
<pre><code>## [1] &quot;2021-11-20 16:43:47 KST&quot;</code></pre>
<p><code>Sys.timezone()</code> 함수는 현재 타임존을 출력합니다. <code>Sys.Date()</code> 함수는 현재 날짜를, <code>Sys.time()</code> 함수는 날짜와 시간을 출력합니다.</p>
<p>’2018-12-31’과 같이 사용자가 보기에는 날짜 형태이지만 문자열 형태로 데이터가 들어오는 경우, 이를 날짜 형태로 변경해야 할 경우가 있습니다.</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="r-기초-배우기.html#cb66-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&#39;2021-07-01&#39;</span>, <span class="st">&#39;2021-08-01&#39;</span>, <span class="st">&#39;2021-09-01&#39;</span>)</span>
<span id="cb66-2"><a href="r-기초-배우기.html#cb66-2" aria-hidden="true" tabindex="-1"></a>x_date <span class="ot">=</span> <span class="fu">as.Date</span>(x)</span>
<span id="cb66-3"><a href="r-기초-배우기.html#cb66-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-4"><a href="r-기초-배우기.html#cb66-4" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(x_date)</span></code></pre></div>
<pre><code>##  Date[1:3], format: &quot;2021-07-01&quot; &quot;2021-08-01&quot; &quot;2021-09-01&quot;</code></pre>
<p><code>as.Date()</code> 함수를 이용하면 문자열을 손쉽게 날짜 형태로 변경할 수 있습니다. <code>str()</code> 함수는 데이터의 형태를 확인하는 함수로써, Date 형태임이 확인됩니다.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="r-기초-배우기.html#cb68-1" aria-hidden="true" tabindex="-1"></a>y <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&#39;07/01/2015&#39;</span>, <span class="st">&#39;08/01/2015&#39;</span>, <span class="st">&#39;09/01/2015&#39;</span>)</span>
<span id="cb68-2"><a href="r-기초-배우기.html#cb68-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-3"><a href="r-기초-배우기.html#cb68-3" aria-hidden="true" tabindex="-1"></a><span class="fu">as.Date</span>(y, <span class="at">format =</span> <span class="st">&#39;%m/%d/%Y&#39;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2015-07-01&quot; &quot;2015-08-01&quot; &quot;2015-09-01&quot;</code></pre>
<p>YYYY-MM-DD 형태가 아닌 다른 형태(MM/DD/YYYY)로 입력된 경우, format을 직접 입력하여 Date 형태로 변경할 수 있습니다.</p>
<div class="infobox note">
<p>YYYY는 연, MM은 월, DD는 일을 나타냅니다.</p>
</div>
<div id="lubridate-패키지를-이용한-날짜-다루기" class="section level4" number="0.5.3.1">
<h4><span class="header-section-number">0.5.3.1</span> <code>lubridate</code> 패키지를 이용한 날짜 다루기</h4>
<p><code>lubridate</code> 패키지를 이용할 경우 날짜 형태와 관련된 다양한 작업을 수행할 수 있습니다.</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="r-기초-배우기.html#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb70-2"><a href="r-기초-배우기.html#cb70-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-3"><a href="r-기초-배우기.html#cb70-3" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&#39;2021-07-01&#39;</span>, <span class="st">&#39;2021-08-01&#39;</span>, <span class="st">&#39;2021-09-01&#39;</span>)</span>
<span id="cb70-4"><a href="r-기초-배우기.html#cb70-4" aria-hidden="true" tabindex="-1"></a>y <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&#39;07/01/2015&#39;</span>, <span class="st">&#39;08/01/2015&#39;</span>, <span class="st">&#39;09/01/2015&#39;</span>)</span>
<span id="cb70-5"><a href="r-기초-배우기.html#cb70-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-6"><a href="r-기초-배우기.html#cb70-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ymd</span>(x)</span></code></pre></div>
<pre><code>## [1] &quot;2021-07-01&quot; &quot;2021-08-01&quot; &quot;2021-09-01&quot;</code></pre>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="r-기초-배우기.html#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mdy</span>(y)</span></code></pre></div>
<pre><code>## [1] &quot;2015-07-01&quot; &quot;2015-08-01&quot; &quot;2015-09-01&quot;</code></pre>
<p><code>lubridate</code> 패키지를 이용할 경우 YYYY-MM-DD 형태는 <code>ymd()</code>, MM-DD-YYYY 형태는 <code>mdy()</code> 함수를 사용해 손쉽게 Date 형태로 변경할 수 있습니다. 이 외에도 <code>lubridate</code>에는 Date 형태로 변경하기 위한 다양한 함수가 존재합니다.</p>
<table class="table table-striped table-hover" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-50">표 0.1: </span>lubridate 패키지의 Date 형태 변경 함수
</caption>
<thead>
<tr>
<th style="text-align:center;">
순서
</th>
<th style="text-align:center;">
함수
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
연, 월, 일
</td>
<td style="text-align:center;">
ymd()
</td>
</tr>
<tr>
<td style="text-align:center;">
연, 일, 월
</td>
<td style="text-align:center;">
ydm()
</td>
</tr>
<tr>
<td style="text-align:center;">
월, 일, 연
</td>
<td style="text-align:center;">
mdy()
</td>
</tr>
<tr>
<td style="text-align:center;">
일, 월, 연
</td>
<td style="text-align:center;">
dmy()
</td>
</tr>
<tr>
<td style="text-align:center;">
시, 분
</td>
<td style="text-align:center;">
hm()
</td>
</tr>
<tr>
<td style="text-align:center;">
시, 분, 초
</td>
<td style="text-align:center;">
hms()
</td>
</tr>
<tr>
<td style="text-align:center;">
연, 월, 일, 시, 분, 초
</td>
<td style="text-align:center;">
ymd_hms()
</td>
</tr>
</tbody>
</table>
<p><code>lubridate</code> 패키지에는 날짜 관련 정보를 추출할 수 있는 다양한 함수가 존재합니다.</p>
<table class="table table-striped table-hover" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-51">표 0.2: </span>lubridate 패키지의 날짜 관련 정보 추출 함수
</caption>
<thead>
<tr>
<th style="text-align:center;">
정보
</th>
<th style="text-align:center;">
함수
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
연
</td>
<td style="text-align:center;">
year()
</td>
</tr>
<tr>
<td style="text-align:center;">
월
</td>
<td style="text-align:center;">
month()
</td>
</tr>
<tr>
<td style="text-align:center;">
주
</td>
<td style="text-align:center;">
week()
</td>
</tr>
<tr>
<td style="text-align:center;">
연도 내 일수
</td>
<td style="text-align:center;">
yday()
</td>
</tr>
<tr>
<td style="text-align:center;">
월 내 일수
</td>
<td style="text-align:center;">
mday()
</td>
</tr>
<tr>
<td style="text-align:center;">
주 내 일수
</td>
<td style="text-align:center;">
wday()
</td>
</tr>
<tr>
<td style="text-align:center;">
시
</td>
<td style="text-align:center;">
hour()
</td>
</tr>
<tr>
<td style="text-align:center;">
분
</td>
<td style="text-align:center;">
minute()
</td>
</tr>
<tr>
<td style="text-align:center;">
초
</td>
<td style="text-align:center;">
second()
</td>
</tr>
<tr>
<td style="text-align:center;">
타임존
</td>
<td style="text-align:center;">
tz()
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="r-기초-배우기.html#cb74-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&#39;2021-07-01&#39;</span>, <span class="st">&#39;2021-08-01&#39;</span>, <span class="st">&#39;2021-09-01&#39;</span>)</span>
<span id="cb74-2"><a href="r-기초-배우기.html#cb74-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-3"><a href="r-기초-배우기.html#cb74-3" aria-hidden="true" tabindex="-1"></a><span class="fu">year</span>(x)</span></code></pre></div>
<pre><code>## [1] 2021 2021 2021</code></pre>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="r-기초-배우기.html#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="fu">month</span>(x)</span></code></pre></div>
<pre><code>## [1] 7 8 9</code></pre>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="r-기초-배우기.html#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="fu">week</span>(x)</span></code></pre></div>
<pre><code>## [1] 26 31 35</code></pre>
<p><code>year()</code>, <code>month()</code>, <code>week()</code> 함수를 통해 년도, 월, 주 정보를 확인할 수 있습니다.</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="r-기초-배우기.html#cb80-1" aria-hidden="true" tabindex="-1"></a>z <span class="ot">=</span> <span class="st">&#39;2021-09-15&#39;</span></span>
<span id="cb80-2"><a href="r-기초-배우기.html#cb80-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-3"><a href="r-기초-배우기.html#cb80-3" aria-hidden="true" tabindex="-1"></a><span class="fu">yday</span>(z)</span></code></pre></div>
<pre><code>## [1] 258</code></pre>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="r-기초-배우기.html#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mday</span>(z)</span></code></pre></div>
<pre><code>## [1] 15</code></pre>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="r-기초-배우기.html#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="fu">wday</span>(z)</span></code></pre></div>
<pre><code>## [1] 4</code></pre>
<p><code>yday()</code>, <code>mday()</code>, <code>wday()</code> 함수는 각각 해당 년도에서 몇번째 일인지, 해당 월에서 몇번째 일인지, 해당 주에서 몇번째 일인지를 계산합니다.</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="r-기초-배우기.html#cb86-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="fu">ymd</span>(<span class="st">&#39;2021-07-01&#39;</span>, <span class="st">&#39;2021-08-01&#39;</span>, <span class="st">&#39;2021-09-01&#39;</span>) </span>
<span id="cb86-2"><a href="r-기초-배우기.html#cb86-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-3"><a href="r-기초-배우기.html#cb86-3" aria-hidden="true" tabindex="-1"></a>x <span class="sc">+</span> <span class="fu">years</span>(<span class="dv">1</span>) <span class="sc">-</span> <span class="fu">days</span>(<span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">9</span>, <span class="dv">21</span>))</span></code></pre></div>
<pre><code>## [1] &quot;2022-06-29&quot; &quot;2022-07-23&quot; &quot;2022-08-11&quot;</code></pre>
<p>날짜에서 연과 월, 일자를 더하거나 빼는 계산 역시 가능합니다. 먼저 <code>year()</code> 함수를 통해 1년씩을 더 하였으며, <code>days()</code> 함수를 통해 각각의 일자 만큼을 뺍니다.</p>
</div>
<div id="날짜-순서-생성하기" class="section level4" number="0.5.3.2">
<h4><span class="header-section-number">0.5.3.2</span> 날짜 순서 생성하기</h4>
<p>숫자와 마찬가지로 <code>seq()</code> 함수를 이용할 경우 날짜 벡터를 생성할 수 있습니다.</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="r-기초-배우기.html#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(<span class="fu">ymd</span>(<span class="st">&#39;2015-01-01&#39;</span>), <span class="fu">ymd</span>(<span class="st">&#39;2021-01-01&#39;</span>), <span class="at">by =</span><span class="st">&#39;years&#39;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2015-01-01&quot; &quot;2016-01-01&quot; &quot;2017-01-01&quot; &quot;2018-01-01&quot; &quot;2019-01-01&quot;
## [6] &quot;2020-01-01&quot; &quot;2021-01-01&quot;</code></pre>
<p>2015년 1월 1일부터 2021년 1월 1일까지 1년을 기준으로 벡터가 생성됩니다.</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="r-기초-배우기.html#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(<span class="fu">ymd</span>(<span class="st">&#39;2021-09-01&#39;</span>), <span class="fu">ymd</span>(<span class="st">&#39;2021-09-30&#39;</span>), <span class="at">by =</span><span class="st">&#39;2 days&#39;</span>)</span></code></pre></div>
<pre><code>##  [1] &quot;2021-09-01&quot; &quot;2021-09-03&quot; &quot;2021-09-05&quot; &quot;2021-09-07&quot; &quot;2021-09-09&quot;
##  [6] &quot;2021-09-11&quot; &quot;2021-09-13&quot; &quot;2021-09-15&quot; &quot;2021-09-17&quot; &quot;2021-09-19&quot;
## [11] &quot;2021-09-21&quot; &quot;2021-09-23&quot; &quot;2021-09-25&quot; &quot;2021-09-27&quot; &quot;2021-09-29&quot;</code></pre>
<p>지정한 일수인 2일 단위로 날짜 벡터를 생성할 수도 있습니다. 이 외에도 by 인자를 통해 원하는 기간 단위의 벡터를 생성할 수 있습니다.</p>
<p>아래 페이지에는 lubridate 패키지의 자세한 사용법이 나와 있습니다.</p>
<pre><code>https://lubridate.tidyverse.org/</code></pre>
</div>
</div>
</div>
<div id="데이터-구조-다루기" class="section level2" number="0.6">
<h2><span class="header-section-number">0.6</span> 데이터 구조 다루기</h2>
<p>R에서 자주 사용되는 데이터구조는 벡터(Vector), 리스트(List), 데이터프레임(Dataframe) 입니다.</p>
<div id="벡터-다루기" class="section level3" number="0.6.1">
<h3><span class="header-section-number">0.6.1</span> 벡터 다루기</h3>
<p>벡터는 R의 가장 기본적인 데이터 구조로써 integer, double, logical, character로 이루어져 있습니다. 벡터를 만드는 방법에 대해서는 앞서 다루었습니다.</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="r-기초-배우기.html#cb93-1" aria-hidden="true" tabindex="-1"></a>vec_integer <span class="ot">=</span> <span class="dv">8</span><span class="sc">:</span><span class="dv">17</span></span>
<span id="cb93-2"><a href="r-기초-배우기.html#cb93-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-3"><a href="r-기초-배우기.html#cb93-3" aria-hidden="true" tabindex="-1"></a>vec_integer</span></code></pre></div>
<pre><code>##  [1]  8  9 10 11 12 13 14 15 16 17</code></pre>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="r-기초-배우기.html#cb95-1" aria-hidden="true" tabindex="-1"></a>vec_double <span class="ot">=</span> <span class="fu">c</span>(<span class="fl">0.5</span>, <span class="fl">0.6</span>, <span class="fl">0.2</span>)</span>
<span id="cb95-2"><a href="r-기초-배우기.html#cb95-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-3"><a href="r-기초-배우기.html#cb95-3" aria-hidden="true" tabindex="-1"></a>vec_double</span></code></pre></div>
<pre><code>## [1] 0.5 0.6 0.2</code></pre>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="r-기초-배우기.html#cb97-1" aria-hidden="true" tabindex="-1"></a>vec_char <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&#39;a&#39;</span>, <span class="st">&#39;b&#39;</span>, <span class="st">&#39;c&#39;</span>)</span>
<span id="cb97-2"><a href="r-기초-배우기.html#cb97-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-3"><a href="r-기초-배우기.html#cb97-3" aria-hidden="true" tabindex="-1"></a>vec_char</span></code></pre></div>
<pre><code>## [1] &quot;a&quot; &quot;b&quot; &quot;c&quot;</code></pre>
<p>integer의 경우 start:end 형태를 통해서, 그 외에는 <code>c()</code> 함수를 통해 벡터를 만들 수 있습니다.</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="r-기초-배우기.html#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="st">&#39;a&#39;</span>, <span class="st">&#39;b&#39;</span>, <span class="st">&#39;c&#39;</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;1&quot; &quot;2&quot; &quot;3&quot;</code></pre>
<p>숫자와 문자가 같이 벡터로 묶일 경우, 숫자는 모두 문자 형태로 변경됩니다.</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="r-기초-배우기.html#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>## [1] 1 2 3 1 0</code></pre>
<p>TRUE와 FALSE는 참 혹은 거짓을 나타내는 논리값(logical) 입니다. 숫자와 논리값이 같이 묶일 경우 TRUE는 1, FALSE는 0으로 치환된 후 숫자 형태로 변경됩니다.</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="r-기초-배우기.html#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="st">&#39;a&#39;</span>, <span class="st">&#39;b&#39;</span>, <span class="st">&#39;c&#39;</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>## [1] &quot;a&quot;     &quot;b&quot;     &quot;c&quot;     &quot;TRUE&quot;  &quot;FALSE&quot;</code></pre>
<p>문자와 논리값이 같이 묶일 경우 모두 문자 형태로 변경됩니다. 이처럼 문자와 다른 형태가 묶일 경우엔 모든 데이터가 문자로 변경됩니다.</p>
<p>이번에는 기존의 벡터에 새로운 값을 추가해보겠습니다.</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="r-기초-배우기.html#cb105-1" aria-hidden="true" tabindex="-1"></a>v1 <span class="ot">=</span> <span class="dv">8</span><span class="sc">:</span><span class="dv">17</span></span>
<span id="cb105-2"><a href="r-기초-배우기.html#cb105-2" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(v1, <span class="dv">18</span><span class="sc">:</span><span class="dv">22</span>)</span></code></pre></div>
<pre><code>##  [1]  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22</code></pre>
<p>기존 8부터 17까지의 숫자로 이루어진 v1 벡터에, <code>c()</code> 함수를 이용하여 새로운 값을 추가할 수 있습니다.</p>
<p>만약 벡터에서 원하는 부분의 데이터를 추출하려면 대괄호([])를 이용하면 됩니다.</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="r-기초-배우기.html#cb107-1" aria-hidden="true" tabindex="-1"></a>v1[<span class="dv">2</span>]</span></code></pre></div>
<pre><code>## [1] 9</code></pre>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="r-기초-배우기.html#cb109-1" aria-hidden="true" tabindex="-1"></a>v1[<span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>]</span></code></pre></div>
<pre><code>## [1]  9 10 11</code></pre>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="r-기초-배우기.html#cb111-1" aria-hidden="true" tabindex="-1"></a>v1[<span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>)]</span></code></pre></div>
<pre><code>## [1]  9 11 13</code></pre>
<p>대괄호 안에 숫자를 입력하면, 벡터에서 해당 순서의 데이터가 추출됩니다. <strong>c(2,4,6)</strong>과 같이 특정 위치를 지정하여 데이터를 추출할 수도 있습니다.</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="r-기초-배우기.html#cb113-1" aria-hidden="true" tabindex="-1"></a>v1[<span class="sc">-</span><span class="dv">1</span>]</span></code></pre></div>
<pre><code>## [1]  9 10 11 12 13 14 15 16 17</code></pre>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="r-기초-배우기.html#cb115-1" aria-hidden="true" tabindex="-1"></a>v1[<span class="sc">-</span><span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">8</span>)]</span></code></pre></div>
<pre><code>## [1]  8 10 12 14 16 17</code></pre>
<p>마이너스 기호를 입력하면, 해당 순서를 제외한 데이터가 추출됩니다.</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="r-기초-배우기.html#cb117-1" aria-hidden="true" tabindex="-1"></a>v1 <span class="sc">&lt;</span> <span class="dv">12</span></span></code></pre></div>
<pre><code>##  [1]  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE</code></pre>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="r-기초-배우기.html#cb119-1" aria-hidden="true" tabindex="-1"></a>v1[v1 <span class="sc">&lt;</span> <span class="dv">12</span>]</span></code></pre></div>
<pre><code>## [1]  8  9 10 11</code></pre>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="r-기초-배우기.html#cb121-1" aria-hidden="true" tabindex="-1"></a>v1[v1 <span class="sc">&lt;</span> <span class="dv">12</span> <span class="sc">|</span> v1 <span class="sc">&gt;</span> <span class="dv">15</span>]</span></code></pre></div>
<pre><code>## [1]  8  9 10 11 16 17</code></pre>
<p>먼저 <strong>v1 &lt; 12</strong>를 입력하면 해당 조건에 해당하는 부분은 TRUE, 그렇지 않은 부분은 FALSE를 반환합니다. 그 후 대괄호 안에 다시 결과를 입력하면 TRUE에 해당하는 순서의 데이터만 반환합니다. 이처럼 대괄호 내부에 조건을 설정하여 원하는 데이터를 추출할 수도 있습니다.</p>
</div>
<div id="리스트-다루기" class="section level3" number="0.6.2">
<h3><span class="header-section-number">0.6.2</span> 리스트 다루기</h3>
<p>먼저 리스트를 생성합니다.</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="r-기초-배우기.html#cb123-1" aria-hidden="true" tabindex="-1"></a>l <span class="ot">=</span> <span class="fu">list</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="st">&#39;a&#39;</span>, <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>), <span class="fu">c</span>(<span class="fl">2.5</span>, <span class="fl">4.2</span>))</span>
<span id="cb123-2"><a href="r-기초-배우기.html#cb123-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-3"><a href="r-기초-배우기.html#cb123-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(l)</span></code></pre></div>
<pre><code>## List of 4
##  $ : int [1:3] 1 2 3
##  $ : chr &quot;a&quot;
##  $ : logi [1:3] TRUE FALSE TRUE
##  $ : num [1:2] 2.5 4.2</code></pre>
<p>첫번째 원소는 정수(int), 두번째 원소는 문자(chr), 세번째 원소는 논리값(logi), 네번째 원손,ㄴ 숫자(num)으로 이루어져 있습니다. 이처럼 리스트는 각 원소간 타입이나 길이가 달라도 데이터가 결합할 수 특징이 있습니다.</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="r-기초-배우기.html#cb125-1" aria-hidden="true" tabindex="-1"></a>l2 <span class="ot">=</span> <span class="fu">list</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="fu">list</span>(letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>], <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>)))</span>
<span id="cb125-2"><a href="r-기초-배우기.html#cb125-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-3"><a href="r-기초-배우기.html#cb125-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(l2)</span></code></pre></div>
<pre><code>## List of 2
##  $ : int [1:3] 1 2 3
##  $ :List of 2
##   ..$ : chr [1:5] &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot; ...
##   ..$ : logi [1:3] TRUE FALSE TRUE</code></pre>
<p>위 예제에서 두번째 원소는 리스트로 구성되어 있습니다. 이처럼 리스트 내에 또 다른 리스트를 생성하는 것 역시 가능합니다.</p>
<p>이번에는 기존 리스트에 새로운 원소를 추가하도록 하겠습니다.</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="r-기초-배우기.html#cb127-1" aria-hidden="true" tabindex="-1"></a>l3 <span class="ot">=</span> <span class="fu">list</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="st">&#39;a&#39;</span>, <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>))</span>
<span id="cb127-2"><a href="r-기초-배우기.html#cb127-2" aria-hidden="true" tabindex="-1"></a>l4 <span class="ot">=</span> <span class="fu">append</span>(l3, <span class="fu">list</span>(<span class="fu">c</span>(<span class="fl">2.5</span>, <span class="fl">4.2</span>)))</span>
<span id="cb127-3"><a href="r-기초-배우기.html#cb127-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb127-4"><a href="r-기초-배우기.html#cb127-4" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(l4)</span></code></pre></div>
<pre><code>## [[1]]
## [1] 1 2 3
## 
## [[2]]
## [1] &quot;a&quot;
## 
## [[3]]
## [1]  TRUE FALSE  TRUE
## 
## [[4]]
## [1] 2.5 4.2</code></pre>
<p><code>append()</code> 함수를 이용하면 기존 리스트에 추가로 원소를 붙일 수 있습니다.</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="r-기초-배우기.html#cb129-1" aria-hidden="true" tabindex="-1"></a>l4<span class="sc">$</span>item5 <span class="ot">=</span> <span class="st">&#39;new list item&#39;</span></span>
<span id="cb129-2"><a href="r-기초-배우기.html#cb129-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-3"><a href="r-기초-배우기.html#cb129-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(l4)</span></code></pre></div>
<pre><code>## [[1]]
## [1] 1 2 3
## 
## [[2]]
## [1] &quot;a&quot;
## 
## [[3]]
## [1]  TRUE FALSE  TRUE
## 
## [[4]]
## [1] 2.5 4.2
## 
## $item5
## [1] &quot;new list item&quot;</code></pre>
<p>또한 기존 리스트에 달러 사인($)을 입력할 경우, 원소에 이름이 생성되며 데이터가 추가됩니다.</p>
<p>리스트에서 원하는 데이터를 추출할 때는, 벡터와 동일하게 대괄호를 이용하면 됩니다.</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="r-기초-배우기.html#cb131-1" aria-hidden="true" tabindex="-1"></a>l4[<span class="dv">1</span>]</span></code></pre></div>
<pre><code>## [[1]]
## [1] 1 2 3</code></pre>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="r-기초-배우기.html#cb133-1" aria-hidden="true" tabindex="-1"></a>l4[<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>)]</span></code></pre></div>
<pre><code>## [[1]]
## [1] 1 2 3
## 
## [[2]]
## [1]  TRUE FALSE  TRUE</code></pre>
<p>원소에 이름이 있을 경우, 이를 이용해 추출도 가능합니다.</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="r-기초-배우기.html#cb135-1" aria-hidden="true" tabindex="-1"></a>l4[<span class="st">&#39;item5&#39;</span>]</span></code></pre></div>
<pre><code>## $item5
## [1] &quot;new list item&quot;</code></pre>
<p>원소의 이름인 <strong>item5</strong>를 입력하면 해당 원소만 반환합니다.</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="r-기초-배우기.html#cb137-1" aria-hidden="true" tabindex="-1"></a>l4[[<span class="dv">1</span>]]</span></code></pre></div>
<pre><code>## [1] 1 2 3</code></pre>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="r-기초-배우기.html#cb139-1" aria-hidden="true" tabindex="-1"></a>l4<span class="sc">$</span>item5</span></code></pre></div>
<pre><code>## [1] &quot;new list item&quot;</code></pre>
<p>대괄호를 두번, 혹은 달러 사인($)을 이용해 데이터를 추출할 경우 원소 내의 형태가 반환되며, 위의 예제들과는 다르게 벡터 형태가 반환되었습니다.</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="r-기초-배우기.html#cb141-1" aria-hidden="true" tabindex="-1"></a>l4[[<span class="dv">1</span>]]</span></code></pre></div>
<pre><code>## [1] 1 2 3</code></pre>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="r-기초-배우기.html#cb143-1" aria-hidden="true" tabindex="-1"></a>l4[[<span class="dv">1</span>]][<span class="dv">3</span>]</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<p>특정 원소의 항목을 추출하기 위해서는 [[와 [를 함께 사용합니다. 위 예제는 l4 리스트의 첫번째 원소에서 3번째 항목을 추출하게 됩니다.</p>
</div>
<div id="데이터프레임-다루기" class="section level3" number="0.6.3">
<h3><span class="header-section-number">0.6.3</span> 데이터프레임 다루기</h3>
<p>데이터프레임은 R에서 가장 널리 사용되는 형식으로써, 각 컬럼이 다른 형태를 가질 수 있습니다.</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="r-기초-배우기.html#cb145-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">=</span> <span class="fu">data.frame</span> (<span class="at">col1 =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>,</span>
<span id="cb145-2"><a href="r-기초-배우기.html#cb145-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">col2 =</span> <span class="fu">c</span> (<span class="st">&quot;this&quot;</span>, <span class="st">&quot;is&quot;</span>, <span class="st">&quot;text&quot;</span>),</span>
<span id="cb145-3"><a href="r-기초-배우기.html#cb145-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">col3 =</span> <span class="fu">c</span> (<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>),</span>
<span id="cb145-4"><a href="r-기초-배우기.html#cb145-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">col4 =</span> <span class="fu">c</span> (<span class="fl">2.5</span>, <span class="fl">4.2</span>, pi))</span>
<span id="cb145-5"><a href="r-기초-배우기.html#cb145-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb145-6"><a href="r-기초-배우기.html#cb145-6" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    3 obs. of  4 variables:
##  $ col1: int  1 2 3
##  $ col2: chr  &quot;this&quot; &quot;is&quot; &quot;text&quot;
##  $ col3: logi  TRUE FALSE TRUE
##  $ col4: num  2.5 4.2 3.14</code></pre>
<p>col1은 숫자(int), col2는 문자(chr), col3는 논리연산자(logi), col4는 숫자(num)로 구성되어 있습니다. 또한 벡터 혹은 리스트를 이용해 데이터프레임을 생성할 수도 있습니다.</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="r-기초-배우기.html#cb147-1" aria-hidden="true" tabindex="-1"></a>v1 <span class="ot">=</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span></span>
<span id="cb147-2"><a href="r-기초-배우기.html#cb147-2" aria-hidden="true" tabindex="-1"></a>v2 <span class="ot">=</span> <span class="fu">c</span> (<span class="st">&quot;this&quot;</span>, <span class="st">&quot;is&quot;</span>, <span class="st">&quot;text&quot;</span>)</span>
<span id="cb147-3"><a href="r-기초-배우기.html#cb147-3" aria-hidden="true" tabindex="-1"></a>v3 <span class="ot">=</span> <span class="fu">c</span> (<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>)</span>
<span id="cb147-4"><a href="r-기초-배우기.html#cb147-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb147-5"><a href="r-기초-배우기.html#cb147-5" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(<span class="at">col1 =</span> v1, <span class="at">col2 =</span> v2, <span class="at">col3 =</span> v3)</span></code></pre></div>
<pre><code>##   col1 col2  col3
## 1    1 this  TRUE
## 2    2   is FALSE
## 3    3 text  TRUE</code></pre>
<p>v1, v2, v3는 각각 숫자, 문자, 논리연산로 구성된 벡터입니다. 이를 <code>data.frame()</code> 함수 내에 입력할 경우 col1, col2, col3 열 이름에 해당 데이터들이 입력됩니다. 주의해야 할 점은 각 벡터의 길이가 동일해야 데이터프레임 형태를 만들 수 있습니다.</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="r-기초-배우기.html#cb149-1" aria-hidden="true" tabindex="-1"></a>l <span class="ot">=</span> <span class="fu">list</span> (<span class="at">item1 =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>,</span>
<span id="cb149-2"><a href="r-기초-배우기.html#cb149-2" aria-hidden="true" tabindex="-1"></a>          <span class="at">item2 =</span> <span class="fu">c</span> (<span class="st">&quot;this&quot;</span>, <span class="st">&quot;is&quot;</span>, <span class="st">&quot;text&quot;</span>),</span>
<span id="cb149-3"><a href="r-기초-배우기.html#cb149-3" aria-hidden="true" tabindex="-1"></a>          <span class="at">item3 =</span> <span class="fu">c</span> (<span class="fl">2.5</span>, <span class="fl">4.2</span>, <span class="fl">5.1</span>))</span>
<span id="cb149-4"><a href="r-기초-배우기.html#cb149-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb149-5"><a href="r-기초-배우기.html#cb149-5" aria-hidden="true" tabindex="-1"></a>l</span></code></pre></div>
<pre><code>## $item1
## [1] 1 2 3
## 
## $item2
## [1] &quot;this&quot; &quot;is&quot;   &quot;text&quot;
## 
## $item3
## [1] 2.5 4.2 5.1</code></pre>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="r-기초-배우기.html#cb151-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(l)</span></code></pre></div>
<pre><code>##   item1 item2 item3
## 1     1  this   2.5
## 2     2    is   4.2
## 3     3  text   5.1</code></pre>
<p>리스트 역시 <code>data.frame()</code> 함수를 이용할 경우, 각 원소명을 열이름으로 한 데이터프레임이 생성됩니다. 이 경우 역시 각 원소의 데이터 길이가 동일해야 합니다.</p>
<p>기존 데이터프레임에 행방향 혹은 열방향으로 데이터를 추가할 수 있습니다.</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="r-기초-배우기.html#cb153-1" aria-hidden="true" tabindex="-1"></a>df</span></code></pre></div>
<pre><code>##   col1 col2  col3  col4
## 1    1 this  TRUE 2.500
## 2    2   is FALSE 4.200
## 3    3 text  TRUE 3.142</code></pre>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="r-기초-배우기.html#cb155-1" aria-hidden="true" tabindex="-1"></a>v4 <span class="ot">=</span> <span class="fu">c</span> (<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>)</span>
<span id="cb155-2"><a href="r-기초-배우기.html#cb155-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cbind</span>(df, v4)</span></code></pre></div>
<pre><code>##   col1 col2  col3  col4 v4
## 1    1 this  TRUE 2.500  A
## 2    2   is FALSE 4.200  B
## 3    3 text  TRUE 3.142  C</code></pre>
<p><code>cbind()</code> 함수는 ’column bind’의 약어로써, 기존 데이터프레임에 새로운 열을 추가합니다.</p>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="r-기초-배우기.html#cb157-1" aria-hidden="true" tabindex="-1"></a>v5 <span class="ot">=</span> <span class="fu">c</span> (<span class="dv">4</span>, <span class="st">&quot;R&quot;</span>, F, <span class="fl">1.1</span>)</span>
<span id="cb157-2"><a href="r-기초-배우기.html#cb157-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rbind</span>(df, v5)</span></code></pre></div>
<pre><code>##   col1 col2  col3             col4
## 1    1 this  TRUE              2.5
## 2    2   is FALSE              4.2
## 3    3 text  TRUE 3.14159265358979
## 4    4    R FALSE              1.1</code></pre>
<p><code>rbind()</code> 함수는 ’row bind’의 약어로써, 기존 데이터프레임에 새로운 행을 추가합니다. 주의할 점은 각 행의 데이터 형태가 기존 데이터의 형태와 일치해야 합니다.</p>
<p>데이터프레임 역시 대괄호를 이용해 데이터를 추출할 수 있으며, 공백으로 두면 모든 행(열)을 선택하게 됩니다.</p>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="r-기초-배우기.html#cb159-1" aria-hidden="true" tabindex="-1"></a>df</span></code></pre></div>
<pre><code>##   col1 col2  col3  col4
## 1    1 this  TRUE 2.500
## 2    2   is FALSE 4.200
## 3    3 text  TRUE 3.142</code></pre>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="r-기초-배우기.html#cb161-1" aria-hidden="true" tabindex="-1"></a>df[<span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>, ]</span></code></pre></div>
<pre><code>##   col1 col2  col3  col4
## 2    2   is FALSE 4.200
## 3    3 text  TRUE 3.142</code></pre>
<p>데이터프레임중 2:3, 즉 두번째부터 세번째까지의 행과 모든 열을 선택하게 됩니다.</p>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="r-기초-배우기.html#cb163-1" aria-hidden="true" tabindex="-1"></a>df[ , <span class="fu">c</span>(<span class="st">&#39;col2&#39;</span>, <span class="st">&#39;col4&#39;</span>)]</span></code></pre></div>
<pre><code>##   col2  col4
## 1 this 2.500
## 2   is 4.200
## 3 text 3.142</code></pre>
<p>행이름 혹은 열이름 직접 입력하여 해당값을 추출할 수도 있습니다. 위 예제에서는 열이름이 col2와 col4인 열을 추출합니다.</p>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="r-기초-배우기.html#cb165-1" aria-hidden="true" tabindex="-1"></a>df[, <span class="dv">2</span>]</span></code></pre></div>
<pre><code>## [1] &quot;this&quot; &quot;is&quot;   &quot;text&quot;</code></pre>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="r-기초-배우기.html#cb167-1" aria-hidden="true" tabindex="-1"></a>df[, <span class="dv">2</span>, drop <span class="ot">=</span> <span class="cn">FALSE</span>]</span></code></pre></div>
<pre><code>##   col2
## 1 this
## 2   is
## 3 text</code></pre>
<p>만일 하나의 열만 선택시 결과가 벡터 형태로 추출되며, drop = FALSE 인자를 추가해주면 데이터프레임의 형태가 유지되어 추출됩니다.</p>
</div>
<div id="결측치-처리하기" class="section level3" number="0.6.4">
<h3><span class="header-section-number">0.6.4</span> 결측치 처리하기</h3>
<p>결측치란 누락된 데이터를 의미하며, 데이터 분석에서 결측치를 처리하는 것은 매우 중요합니다. R에서 결측치는 <code>NA</code>로 표시되며, <code>is.na()</code> 함수를 통해 결측치 여부를 확인할 수 있습니다.</p>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="r-기초-배우기.html#cb169-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="cn">NA</span>, <span class="dv">6</span><span class="sc">:</span><span class="dv">7</span>, <span class="cn">NA</span>)</span>
<span id="cb169-2"><a href="r-기초-배우기.html#cb169-2" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>## [1]  1  2  3  4 NA  6  7 NA</code></pre>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="r-기초-배우기.html#cb171-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.na</span>(x)</span></code></pre></div>
<pre><code>## [1] FALSE FALSE FALSE FALSE  TRUE FALSE FALSE  TRUE</code></pre>
<p>데이터가 NA인 경우에는 TRUE, 그렇지 않을 경우 FALSE를 반환합니다. 데이터프레임에도 해당 함수를 적용할 수 있습니다.</p>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb173-1"><a href="r-기초-배우기.html#cb173-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">=</span> <span class="fu">data.frame</span> (<span class="at">col1 =</span> <span class="fu">c</span> (<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="cn">NA</span>),</span>
<span id="cb173-2"><a href="r-기초-배우기.html#cb173-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">col2 =</span> <span class="fu">c</span> (<span class="st">&quot;this&quot;</span>, <span class="cn">NA</span>,<span class="st">&quot;is&quot;</span>, <span class="st">&quot;text&quot;</span>),</span>
<span id="cb173-3"><a href="r-기초-배우기.html#cb173-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">col3 =</span> <span class="fu">c</span> (<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>),</span>
<span id="cb173-4"><a href="r-기초-배우기.html#cb173-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">col4 =</span> <span class="fu">c</span> (<span class="fl">2.5</span>, <span class="fl">4.2</span>, <span class="fl">3.2</span>, <span class="cn">NA</span>),</span>
<span id="cb173-5"><a href="r-기초-배우기.html#cb173-5" aria-hidden="true" tabindex="-1"></a>                 <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb173-6"><a href="r-기초-배우기.html#cb173-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb173-7"><a href="r-기초-배우기.html#cb173-7" aria-hidden="true" tabindex="-1"></a>df</span></code></pre></div>
<pre><code>##   col1 col2  col3 col4
## 1    1 this  TRUE  2.5
## 2    2 &lt;NA&gt; FALSE  4.2
## 3    3   is  TRUE  3.2
## 4   NA text  TRUE   NA</code></pre>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb175-1"><a href="r-기초-배우기.html#cb175-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.na</span>(df)</span></code></pre></div>
<pre><code>##       col1  col2  col3  col4
## [1,] FALSE FALSE FALSE FALSE
## [2,] FALSE  TRUE FALSE FALSE
## [3,] FALSE FALSE FALSE FALSE
## [4,]  TRUE FALSE FALSE  TRUE</code></pre>
<p>데이터에 결측치가 있는 경우 계산이 불가능하다는 문제가 발생합니다.</p>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb177-1"><a href="r-기초-배우기.html#cb177-1" aria-hidden="true" tabindex="-1"></a>y <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="cn">NA</span>, <span class="dv">4</span>)</span>
<span id="cb177-2"><a href="r-기초-배우기.html#cb177-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb177-3"><a href="r-기초-배우기.html#cb177-3" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(y)</span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<p>데이터의 중간에 결측치인 NA가 존재하여 평균을 계산할 수 없으며, 이 외에도 모든 연산이 불가능하게 됩니다.</p>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="r-기초-배우기.html#cb179-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(y, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## [1] 2.667</code></pre>
<p>na.rm에서 rm은 ’remove’의 약어입니다. 즉 해당 인자를 TRUE로 설정할 경우 NA를 제외하고 연산을 수행합니다. 따라서 1,3,4의 평균인 <span class="math inline">\(\frac{1+3+4}{3} = 2.6667\)</span>이 계산됩니다.</p>
<p>일반적으로 결측치가 있는 경우 해당 데이터는 문제가 있다고 판단하여 제거하거나, 다른 데이터로 대체하여 채워넣기도 합니다. 먼저 결측치가 있는 데이터를 제거하는 법을 알아보겠습니다.</p>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="r-기초-배우기.html#cb181-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">=</span> <span class="fu">data.frame</span> (<span class="at">col1 =</span> <span class="fu">c</span> (<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>),</span>
<span id="cb181-2"><a href="r-기초-배우기.html#cb181-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">col2 =</span> <span class="fu">c</span> (<span class="st">&quot;this&quot;</span>, <span class="cn">NA</span>,<span class="st">&quot;is&quot;</span>, <span class="st">&quot;text&quot;</span>),</span>
<span id="cb181-3"><a href="r-기초-배우기.html#cb181-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">col3 =</span> <span class="fu">c</span> (<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>),</span>
<span id="cb181-4"><a href="r-기초-배우기.html#cb181-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">col4 =</span> <span class="fu">c</span> (<span class="fl">2.5</span>, <span class="fl">4.2</span>, <span class="fl">3.2</span>, <span class="fl">5.0</span>)</span>
<span id="cb181-5"><a href="r-기초-배우기.html#cb181-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb181-6"><a href="r-기초-배우기.html#cb181-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb181-7"><a href="r-기초-배우기.html#cb181-7" aria-hidden="true" tabindex="-1"></a>df</span></code></pre></div>
<pre><code>##   col1 col2  col3 col4
## 1    1 this  TRUE  2.5
## 2    2 &lt;NA&gt; FALSE  4.2
## 3    3   is  TRUE  3.2
## 4    4 text  TRUE  5.0</code></pre>
<p>두번째 행 col2 열에 결측치가 있으므로, 해당 부분을 제거해주도록 합니다.</p>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="r-기초-배우기.html#cb183-1" aria-hidden="true" tabindex="-1"></a><span class="fu">na.omit</span>(df)</span></code></pre></div>
<pre><code>##   col1 col2 col3 col4
## 1    1 this TRUE  2.5
## 3    3   is TRUE  3.2
## 4    4 text TRUE  5.0</code></pre>
<p><code>na.omit()</code> 함수를 이용하면 NA가 위치한 부분의 데이터가 제거됩니다.</p>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="r-기초-배우기.html#cb185-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="cn">NA</span>, <span class="dv">6</span><span class="sc">:</span><span class="dv">7</span>, <span class="cn">NA</span>)</span>
<span id="cb185-2"><a href="r-기초-배우기.html#cb185-2" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>## [1]  1  2  3  4 NA  6  7 NA</code></pre>
<p>이번에는 위와 같이 결측치가 있는 경우, 다른 데이터로 대체하도록 하겠습니다.</p>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="r-기초-배우기.html#cb187-1" aria-hidden="true" tabindex="-1"></a>x[<span class="fu">is.na</span>(x)] <span class="ot">=</span> <span class="fu">mean</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb187-2"><a href="r-기초-배우기.html#cb187-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb187-3"><a href="r-기초-배우기.html#cb187-3" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>## [1] 1.000 2.000 3.000 4.000 3.833 6.000 7.000 3.833</code></pre>
<p><code>mean()</code> 함수 내부를 통해 값들의 평균을 구한 후, <code>is.na()</code> 함수를 통해 결측치가 위치한 부분의 데이터를 평균값인 3.833 으로 대체하였습니다. 이 외에도 결측치를 대체하는데는 다양한 방법이 존재합니다.</p>
</div>
</div>
<div id="데이터-불러오기-및-내보내기" class="section level2" number="0.7">
<h2><span class="header-section-number">0.7</span> 데이터 불러오기 및 내보내기</h2>
<p>일반적으로 사람들은 csv 혹은 엑셀 파일로 저장된 데이터를 주고 받으며 데이터 분석을 하는 경우가 많습니다. 해당 형식의 파일을 R로 불러오는 법 그리고 저장하는 법에 대해 알아보겠습니다.</p>
<p>csv와 엑셀 샘플 파일의 주소는 다음과 같습니다.</p>
<pre><code>https://github.com/hyunyulhenry/fin_ds/blob/master/data/kospi.csv
https://github.com/hyunyulhenry/fin_ds/blob/master/data/kospi.xlsx</code></pre>
<p>아래의 코드를 실행하면 해당 파일을 PC에 다운로드 받을 수 있습니다.</p>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="r-기초-배우기.html#cb190-1" aria-hidden="true" tabindex="-1"></a><span class="fu">download.file</span>(<span class="st">&#39;https://raw.githubusercontent.com/hyunyulhenry/fin_ds/master/data/kospi.csv&#39;</span>, <span class="st">&#39;kospi.csv&#39;</span>)</span>
<span id="cb190-2"><a href="r-기초-배우기.html#cb190-2" aria-hidden="true" tabindex="-1"></a><span class="fu">download.file</span>(<span class="st">&#39;https://github.com/hyunyulhenry/fin_ds/raw/master/data/kospi.xlsx&#39;</span>, <span class="st">&#39;kospi.xlsx&#39;</span>, <span class="at">mode =</span> <span class="st">&#39;wb&#39;</span>)</span></code></pre></div>
<div id="워킹-디렉터리" class="section level3" number="0.7.1">
<h3><span class="header-section-number">0.7.1</span> 워킹 디렉터리</h3>
<p>데이터를 불러오거나 내보낼 때 초보자들이 가장 많이 하는 실수가 워킹 디렉터리를 제대로 설정하지 않는 것입니다. 워킹 디렉터리(Working Directory)란 현재 사용중인 폴더를 의미하며, 현재 워킹 디렉터리는 콘솔창 상단 <code>getwd()</code> 함수를 통해 확인할 수 있습니다.</p>
<div class="sourceCode" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb191-1"><a href="r-기초-배우기.html#cb191-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getwd</span>()</span>
<span id="cb191-2"><a href="r-기초-배우기.html#cb191-2" aria-hidden="true" tabindex="-1"></a><span class="co"># [1] &quot;C:/Users/henry/Documents/R/fin_ds&quot;</span></span></code></pre></div>
<p>파일들이 A 폴더에 있는데 워킹 디렉터리가 B 폴더인 상태에서는 파일을 불러올 수 없으므로, 해당 파일들이 현재 워킹 디렉터리에 있어야 합니다.</p>
<p>워킹 디렉터리를 변경할때는 <code>setwd()</code> 함수를 통해 위치를 직접 지정해주어도 되지만, R 스튜디오의 파일 창을 이용하면 손쉽게 변경할 수 있습니다. 먼저 파일 창 상단의 […] 부분을 클릭합니다.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-93"></span>
<img src="images/rbasic_setwd.png" alt="워킹 디렉터리 변경" width="100%" />
<p class="caption">
그림 0.21: 워킹 디렉터리 변경
</p>
</div>
<p>탐색기 화면에서 원하는 폴더를 선택한 후 하단의 [Open]을 클릭합니다.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-94"></span>
<img src="images/rbasic_setwd2.png" alt="워킹 디렉터리 변경 (2)" width="100%" />
<p class="caption">
그림 0.22: 워킹 디렉터리 변경 (2)
</p>
</div>
<p>탐색기 화면에 선택한 폴더의 파일들이 보입니다. 이제 [Move → Set As Working Directory]를 클릭하면 콘솔창에 해당 폴더를 워킹 디렉터리로 변경하는 코드가 입력되면서, 워킹 디렉터리 위치가 해당 폴더로 변경됩니다.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-95"></span>
<img src="images/rbasic_setwd3.png" alt="워킹 디렉터리 변경 (3)" width="100%" />
<p class="caption">
그림 0.23: 워킹 디렉터리 변경 (3)
</p>
</div>
</div>
<div id="csv-파일-불러오기-및-저장하기" class="section level3" number="0.7.2">
<h3><span class="header-section-number">0.7.2</span> csv 파일 불러오기 및 저장하기</h3>
<p>먼저 R의 기본함수인 <code>read.csv()</code> 함수를 이용하면 매우 손쉽게 csv 파일을 불러올 수 있습니다.</p>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="r-기초-배우기.html#cb192-1" aria-hidden="true" tabindex="-1"></a>kospi <span class="ot">=</span> <span class="fu">read.csv</span>(<span class="st">&#39;kospi.csv&#39;</span>)</span>
<span id="cb192-2"><a href="r-기초-배우기.html#cb192-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb192-3"><a href="r-기초-배우기.html#cb192-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(kospi)</span></code></pre></div>
<pre><code>##      癤풡ate Close   Ret
## 1 2020-01-02  2175 -1.02
## 2 2020-01-03  2176  0.06
## 3 2020-01-06  2155 -0.98
## 4 2020-01-07  2176  0.95
## 5 2020-01-08  2151 -1.11
## 6 2020-01-09  2186  1.63</code></pre>
<p><code>readr</code> 패키지의 <code>read._csv()</code> 함수를 이용하면 기본 함수 대비 10배 정도 빠르게 데이터를 불러올 수 있으며, 훨씬 다양한 조건을 입력할 수도 있습니다.</p>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb194-1"><a href="r-기초-배우기.html#cb194-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb194-2"><a href="r-기초-배우기.html#cb194-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb194-3"><a href="r-기초-배우기.html#cb194-3" aria-hidden="true" tabindex="-1"></a>kospi2 <span class="ot">=</span> <span class="fu">read_csv</span>(<span class="st">&#39;kospi.csv&#39;</span>)</span>
<span id="cb194-4"><a href="r-기초-배우기.html#cb194-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb194-5"><a href="r-기초-배우기.html#cb194-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(kospi2)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 3
##   Date       Close   Ret
##   &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt;
## 1 2020-01-02 2175. -1.02
## 2 2020-01-03 2176.  0.06
## 3 2020-01-06 2155. -0.98
## 4 2020-01-07 2176.  0.95
## 5 2020-01-08 2151. -1.11
## 6 2020-01-09 2186.  1.63</code></pre>
<p>R의 데이터를 csv로 저장하는 법은 기본함수의 <code>write.csv()</code> 혹은 <code>readr</code> 패키지의 <code>write_csv()</code> 함수를 이용하면 됩니다.</p>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb196-1"><a href="r-기초-배우기.html#cb196-1" aria-hidden="true" tabindex="-1"></a><span class="co"># using write.csv</span></span>
<span id="cb196-2"><a href="r-기초-배우기.html#cb196-2" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(kospi, <span class="st">&#39;kospi2.csv&#39;</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb196-3"><a href="r-기초-배우기.html#cb196-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb196-4"><a href="r-기초-배우기.html#cb196-4" aria-hidden="true" tabindex="-1"></a><span class="co"># using write_csv</span></span>
<span id="cb196-5"><a href="r-기초-배우기.html#cb196-5" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(kospi2, <span class="st">&#39;kospi2.csv&#39;</span>)</span></code></pre></div>
<p>기본함수인 <code>write.csv()</code> 의 경우 행이름이 자동으로 새로운 열로 추가되어 저장되므로, 이를 원하지 않을 경우 row.names = FALSE 를 추가로 입력해주어야 합니다.</p>
</div>
<div id="엑셀-파일-불러오기-및-저장하기" class="section level3" number="0.7.3">
<h3><span class="header-section-number">0.7.3</span> 엑셀 파일 불러오기 및 저장하기</h3>
<p>R의 기본함수 중에는 엑셀 파일을 불러오는 함수가 없지만, 해당 작업을 수행하는 다양한 패키지가 존재합니다. 그 중에서 <code>readr</code> 패키지와 쌍둥이 격인 <code>readxl</code> 패키지를 이용해보겠습니다.</p>
<p>먼저 해당 패키지의 <code>read_excel()</code> 함수를 이용해 엑셀 파일을 불러올 수 있습니다.</p>
<div class="sourceCode" id="cb197"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb197-1"><a href="r-기초-배우기.html#cb197-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb197-2"><a href="r-기초-배우기.html#cb197-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb197-3"><a href="r-기초-배우기.html#cb197-3" aria-hidden="true" tabindex="-1"></a>kospi_excel <span class="ot">=</span> <span class="fu">read_excel</span>(<span class="st">&#39;kospi.xlsx&#39;</span>, <span class="at">sheet =</span> <span class="st">&#39;kospi&#39;</span>)</span>
<span id="cb197-4"><a href="r-기초-배우기.html#cb197-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb197-5"><a href="r-기초-배우기.html#cb197-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(kospi_excel)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 3
##   Date                Close   Ret
##   &lt;dttm&gt;              &lt;dbl&gt; &lt;dbl&gt;
## 1 2020-01-02 00:00:00 2175. -1.02
## 2 2020-01-03 00:00:00 2176.  0.06
## 3 2020-01-06 00:00:00 2155. -0.98
## 4 2020-01-07 00:00:00 2176.  0.95
## 5 2020-01-08 00:00:00 2151. -1.11
## 6 2020-01-09 00:00:00 2186.  1.63</code></pre>
<p>엑셀은 여러 시트로 구성된 경우가 많으며, sheet에 특정 시트명을 입력하면 해당 시트의 내용을 불러오게 됩니다. 만일 아무값도 입력하지 않을 경우 가장 첫번째 시트의 데이터를 불러옵니다.</p>
<p>반대로 R의 데이터를 엑셀로 저장하는 방법은 <code>writexl</code> 패키지의 <code>write_xlsx()</code> 함수를 이용하면 됩니다.</p>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb199-1"><a href="r-기초-배우기.html#cb199-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(writexl)</span>
<span id="cb199-2"><a href="r-기초-배우기.html#cb199-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb199-3"><a href="r-기초-배우기.html#cb199-3" aria-hidden="true" tabindex="-1"></a><span class="fu">write_xlsx</span>(kospi_excel, <span class="st">&#39;kospi_excel.xlsx&#39;</span>)</span></code></pre></div>
</div>
</div>
<div id="효율성과-가독성-높이기" class="section level2" number="0.8">
<h2><span class="header-section-number">0.8</span> 효율성과 가독성 높이기</h2>
<p>이번에는 프로그래밍의 효율성을 높이기 위해 자주 사용되는 함수와 루프 구문, 그리고 가독성을 높이기 위한 파이프 오퍼레이터에 대해 알아보겠습니다.</p>
<div id="함수" class="section level3" number="0.8.1">
<h3><span class="header-section-number">0.8.1</span> 함수</h3>
<p>동일하거나 비슷한 작업을 반복해야 하는 경우 매번 실행하거나 복사-붙여넣기 하기 보다는 경우 함수를 작성하여 사용하면 매우 효율적으로 작업이 가능합니다.</p>
<p>함수는 크게 세가지 요소로 구성됩니다.</p>
<ul>
<li><code>body()</code>: 함수 내부의 코드</li>
<li><code>formals()</code>: 인자(argument) 내역</li>
<li><code>environment()</code>: 함수의 변수에 대한 위치</li>
</ul>
<p>예를 들어 금융 자산의 현재 가치는 다음과 같이 계산됩니다.</p>
<p><span class="math display">\[PV = FV / (1+r)^n\]</span></p>
<ul>
<li>PV: 현재 가치</li>
<li>FV: 미래 가치</li>
<li>r: 할인률</li>
<li>n: 기간</li>
</ul>
<p>즉, 1년 뒤에 110만원을 받는 돈의 현재가치는 <span class="math inline">\(110만원/(1+0.1)^1 = 100만원\)</span> 이라 볼 수 있습니다. 이러한 값을 구하기 위해 매번 계산기를 사용하기 보다는 함수를 이용하면, 훨씬 효율적인 작업이 가능합니다. 위의 수식을 함수로 나타내면 다음과 같습니다.</p>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb200-1"><a href="r-기초-배우기.html#cb200-1" aria-hidden="true" tabindex="-1"></a>PV <span class="ot">=</span> <span class="cf">function</span>(FV, r, n) {</span>
<span id="cb200-2"><a href="r-기초-배우기.html#cb200-2" aria-hidden="true" tabindex="-1"></a>  PV <span class="ot">=</span> FV <span class="sc">/</span> (<span class="dv">1</span><span class="sc">+</span>r)<span class="sc">^</span>n</span>
<span id="cb200-3"><a href="r-기초-배우기.html#cb200-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">round</span>(PV, <span class="dv">2</span>))</span>
<span id="cb200-4"><a href="r-기초-배우기.html#cb200-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>R에서는 <code>함수명 = function(인자) {함수 내용}</code>의 형태로 함수를 만들수 있으며, 반환하고자 하는 결과를 <code>return()</code> 내부에 작성합니다. 함수의 구성요소 세가지를 한번 확인해보도록 하겠습니다.</p>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="r-기초-배우기.html#cb201-1" aria-hidden="true" tabindex="-1"></a><span class="fu">body</span>(PV)</span></code></pre></div>
<pre><code>## {
##     PV = FV/(1 + r)^n
##     return(round(PV, 2))
## }</code></pre>
<p>먼저 body는 함수 내부의 코드를 의미합니다.</p>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb203-1"><a href="r-기초-배우기.html#cb203-1" aria-hidden="true" tabindex="-1"></a><span class="fu">formals</span>(PV)</span></code></pre></div>
<pre><code>## $FV
## 
## 
## $r
## 
## 
## $n</code></pre>
<p>formals에는 함수의 인자인 FV, r, n이 있습니다.</p>
<div class="sourceCode" id="cb205"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb205-1"><a href="r-기초-배우기.html#cb205-1" aria-hidden="true" tabindex="-1"></a><span class="fu">environment</span>(PV)</span></code></pre></div>
<pre><code>## &lt;environment: R_GlobalEnv&gt;</code></pre>
<p>함수는 GlobalEnv에 위치하고 있습니다.</p>
<p>이제 해당함수를 이용해 현재가치를 계산해보도록 하겠습니다.</p>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb207-1"><a href="r-기초-배우기.html#cb207-1" aria-hidden="true" tabindex="-1"></a><span class="fu">PV</span>(<span class="at">FV =</span> <span class="dv">1000</span>, <span class="at">r =</span> <span class="fl">0.08</span>, <span class="at">n =</span> <span class="dv">5</span>)</span></code></pre></div>
<pre><code>## [1] 680.6</code></pre>
<p><span class="math inline">\(1000 / (1.08)^5\)</span>의 값인 680.58이 간단하게 계산됩니다.</p>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb209-1"><a href="r-기초-배우기.html#cb209-1" aria-hidden="true" tabindex="-1"></a><span class="fu">PV</span>(<span class="dv">1000</span>, <span class="fl">0.08</span>, <span class="dv">5</span>)</span></code></pre></div>
<pre><code>## [1] 680.6</code></pre>
<p>만약 인자의 리스트를 생략하면, 입력한 순서대로 값이 입력됩니다.</p>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb211-1"><a href="r-기초-배우기.html#cb211-1" aria-hidden="true" tabindex="-1"></a><span class="fu">PV</span>(<span class="at">r =</span> <span class="fl">0.08</span>, <span class="at">FV =</span> <span class="dv">1000</span>, <span class="at">n =</span> <span class="dv">5</span>)</span></code></pre></div>
<pre><code>## [1] 680.6</code></pre>
<p>인자의 내역을 정확하게 지정해준다면, 순서대로 입력하지 않아도 됩니다.</p>
<div class="sourceCode" id="cb213"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb213-1"><a href="r-기초-배우기.html#cb213-1" aria-hidden="true" tabindex="-1"></a><span class="fu">PV</span>(<span class="dv">1000</span>, <span class="fl">0.08</span>)</span></code></pre></div>
<pre><code>## Error in PV(1000, 0.08): 기본값이 없는 인수 &quot;n&quot;가 누락되어 있습니다</code></pre>
<p><code>PV()</code> 함수에 필요한 인자는 3개인 반면, 2개만 입력하였으므로 에러가 발생합니다.</p>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb215-1"><a href="r-기초-배우기.html#cb215-1" aria-hidden="true" tabindex="-1"></a>PV <span class="ot">=</span> <span class="cf">function</span>(<span class="at">FV =</span> <span class="dv">1000</span>, <span class="at">r =</span> .<span class="dv">08</span>, <span class="at">n =</span> <span class="dv">5</span>) {</span>
<span id="cb215-2"><a href="r-기초-배우기.html#cb215-2" aria-hidden="true" tabindex="-1"></a>  PV <span class="ot">=</span> FV <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">+</span> r)<span class="sc">^</span>n</span>
<span id="cb215-3"><a href="r-기초-배우기.html#cb215-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">round</span>(PV, <span class="dv">2</span>))</span>
<span id="cb215-4"><a href="r-기초-배우기.html#cb215-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb215-5"><a href="r-기초-배우기.html#cb215-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb215-6"><a href="r-기초-배우기.html#cb215-6" aria-hidden="true" tabindex="-1"></a><span class="fu">PV</span>(<span class="dv">1000</span>, <span class="fl">0.08</span>)</span></code></pre></div>
<pre><code>## [1] 680.6</code></pre>
<p>만일 함수의 인자에 디폴트 값이 입력되어 있다면, 함수 실행시 이를 생략하여도 디폴트 값이 입력됩니다. 위 예제에서는 n 디폴트 값으로 5가 들어가있으며, <code>PV()</code> 함수 내에 입력값이 3개만 입력될 경우 마지막 인자는 디폴트 값인 5를 적용합니다.</p>
</div>
<div id="루프-구문" class="section level3" number="0.8.2">
<h3><span class="header-section-number">0.8.2</span> 루프 구문</h3>
<p>루프 및 각종 구문을 이용하여 휴율적인 작업을 하는것도 가능합니다.</p>
<div id="if-구문" class="section level4" number="0.8.2.1">
<h4><span class="header-section-number">0.8.2.1</span> <code>if</code> 구문</h4>
<p>먼저 <code>if</code> 구문은 다음과 같이 구성됩니다.</p>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb217-1"><a href="r-기초-배우기.html#cb217-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (test_expression) {</span>
<span id="cb217-2"><a href="r-기초-배우기.html#cb217-2" aria-hidden="true" tabindex="-1"></a>  statement</span>
<span id="cb217-3"><a href="r-기초-배우기.html#cb217-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>괄호 안의 <strong>test_expression</strong>이 TRUE일 경우에만 statement 코드가 실행됩니다. 간단한 예제를 살펴보겠습니다.</p>
<div class="sourceCode" id="cb218"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb218-1"><a href="r-기초-배우기.html#cb218-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">8</span>, <span class="dv">3</span>, <span class="sc">-</span><span class="dv">2</span>, <span class="dv">5</span>)</span>
<span id="cb218-2"><a href="r-기초-배우기.html#cb218-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb218-3"><a href="r-기초-배우기.html#cb218-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">any</span>(x <span class="sc">&lt;</span> <span class="dv">0</span>)) {</span>
<span id="cb218-4"><a href="r-기초-배우기.html#cb218-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&#39;x contains negative number&#39;</span>)</span>
<span id="cb218-5"><a href="r-기초-배우기.html#cb218-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;x contains negative number&quot;</code></pre>
<p><code>any()</code> 함수는 적어도 하나의 값이 참이면 참으로 출력하는 함수입니다. 즉, 위의 코드는 x중 하나라도 0보다 작은 값이 있으면 <strong>x contains negative number</strong>라는 문장을 출력하며, -2가 0보다 작으므로 해당 문장을 출력합니다.</p>
<div class="sourceCode" id="cb220"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb220-1"><a href="r-기초-배우기.html#cb220-1" aria-hidden="true" tabindex="-1"></a>y <span class="ot">=</span> <span class="fu">c</span> (<span class="dv">8</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">5</span>)</span>
<span id="cb220-2"><a href="r-기초-배우기.html#cb220-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb220-3"><a href="r-기초-배우기.html#cb220-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">any</span> (y <span class="sc">&lt;</span> <span class="dv">0</span>)) {</span>
<span id="cb220-4"><a href="r-기초-배우기.html#cb220-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span> (<span class="st">&quot;y contains negative numbers&quot;</span>)</span>
<span id="cb220-5"><a href="r-기초-배우기.html#cb220-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>이번에는 y에 0보다 작은 값이 없으므로, 구문이 실행되지 않아 문장을 출력하지 않습니다. 이처럼 <code>if</code> 구문만 존재할 시 이를 만족하지 않는 경우 아무런 구문도 실행되지 않습니다. 만일 조건을 충족하지 않을 때 동작을 추가하고 싶을 경우 <code>if else</code> 구문을 사용하며, 이는 if의 조건을 만족하지 않을 경우 else에 해당하는 구문이 실행됩니다.</p>
<div class="sourceCode" id="cb221"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb221-1"><a href="r-기초-배우기.html#cb221-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (test_expression) {</span>
<span id="cb221-2"><a href="r-기초-배우기.html#cb221-2" aria-hidden="true" tabindex="-1"></a>  statement <span class="dv">1</span></span>
<span id="cb221-3"><a href="r-기초-배우기.html#cb221-3" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb221-4"><a href="r-기초-배우기.html#cb221-4" aria-hidden="true" tabindex="-1"></a>  statement <span class="dv">2</span></span>
<span id="cb221-5"><a href="r-기초-배우기.html#cb221-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>만일 test_expression 구문이 TRUE이면 statement 1이 실행되며, 그렇지 않을 경우 statement 2가 실행됩니다. 실제 예제를 살펴봅시다.</p>
<div class="sourceCode" id="cb222"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb222-1"><a href="r-기초-배우기.html#cb222-1" aria-hidden="true" tabindex="-1"></a>y <span class="ot">=</span> <span class="fu">c</span> (<span class="dv">8</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">5</span>)</span>
<span id="cb222-2"><a href="r-기초-배우기.html#cb222-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb222-3"><a href="r-기초-배우기.html#cb222-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">any</span> (y <span class="sc">&lt;</span> <span class="dv">0</span>)) {</span>
<span id="cb222-4"><a href="r-기초-배우기.html#cb222-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span> (<span class="st">&quot;y contains negative numbers&quot;</span>)</span>
<span id="cb222-5"><a href="r-기초-배우기.html#cb222-5" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb222-6"><a href="r-기초-배우기.html#cb222-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span> (<span class="st">&quot;y contains all positive numbers&quot;</span>)</span>
<span id="cb222-7"><a href="r-기초-배우기.html#cb222-7" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;y contains all positive numbers&quot;</code></pre>
<p>y에 음수가 존재하는 <code>if</code> 구문이 FALSE 이므로, else에 해당하는 메세지가 출력됩니다. <code>ifelse</code> 구문은 <code>ifelse()</code> 함수로 간단히 나타낼 수도 있습니다.</p>
<div class="sourceCode" id="cb224"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb224-1"><a href="r-기초-배우기.html#cb224-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="fu">c</span> (<span class="dv">8</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">5</span>)</span>
<span id="cb224-2"><a href="r-기초-배우기.html#cb224-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb224-3"><a href="r-기초-배우기.html#cb224-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ifelse</span>(<span class="fu">any</span>(x <span class="sc">&lt;</span> <span class="dv">0</span>), <span class="st">&quot;x contains negative numbers&quot;</span>, <span class="st">&quot;x contains all positive numbers&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;x contains all positive numbers&quot;</code></pre>
<p>해당 함수는 <code>ifelse(test, yes, no)</code> 형태로 입력되며, test를 충족하면 yes가 그렇지 않으면 no가 실행됩니다. 위의 예에서는 x에 0보다 작은 값이 없으므로, no에 해당하는 내용이 실행됩니다.</p>
<p>또한 <code>if</code>와 <code>else</code> 사이에 <code>else if</code> 조건을 통해, 여러 조건을 추가할 수도 있습니다.</p>
<div class="sourceCode" id="cb226"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb226-1"><a href="r-기초-배우기.html#cb226-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="dv">7</span></span>
<span id="cb226-2"><a href="r-기초-배우기.html#cb226-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb226-3"><a href="r-기초-배우기.html#cb226-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (x <span class="sc">&gt;=</span> <span class="dv">10</span>) {</span>
<span id="cb226-4"><a href="r-기초-배우기.html#cb226-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span> (<span class="st">&quot;x exceeds acceptable tolerance levels&quot;</span>)</span>
<span id="cb226-5"><a href="r-기초-배우기.html#cb226-5" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> <span class="cf">if</span>(x <span class="sc">&gt;=</span> <span class="dv">0</span> <span class="sc">&amp;</span> x <span class="sc">&lt;</span> <span class="dv">10</span>) {</span>
<span id="cb226-6"><a href="r-기초-배우기.html#cb226-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span> (<span class="st">&quot;x is within acceptable tolerance levels&quot;</span>)</span>
<span id="cb226-7"><a href="r-기초-배우기.html#cb226-7" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb226-8"><a href="r-기초-배우기.html#cb226-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span> (<span class="st">&quot;x is negative&quot;</span>)</span>
<span id="cb226-9"><a href="r-기초-배우기.html#cb226-9" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;x is within acceptable tolerance levels&quot;</code></pre>
<p>위 조건은 다음과 같습니다.</p>
<ol style="list-style-type: decimal">
<li>x가 10 이상일 경우 <strong>x exceeds acceptable tolerance levels</strong>을 출력합니다.</li>
<li>만일 x가 10 이상, 10 미만일경우 <strong>x is within acceptable tolerance levels</strong>을 출력합니다.</li>
<li>그렇지 않을 경우 <strong>x is negative</strong>을 출력합니다.</li>
</ol>
<p>x는 7 이므로 else에 해당하는 내용이 출력됩니다.</p>
</div>
<div id="for-loop-구문" class="section level4" number="0.8.2.2">
<h4><span class="header-section-number">0.8.2.2</span> <code>for loop</code> 구문</h4>
<p><code>for loop</code> 구문은 특정한 부분의 코드가 반복적으로 수행될 수 있도록 하며, 다음과 같이 구성됩니다.</p>
<div class="sourceCode" id="cb228"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb228-1"><a href="r-기초-배우기.html#cb228-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">100</span>) {</span>
<span id="cb228-2"><a href="r-기초-배우기.html#cb228-2" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>code<span class="sc">:</span> do stuff here with i<span class="sc">&gt;</span></span>
<span id="cb228-3"><a href="r-기초-배우기.html#cb228-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>먼저 i에 1이 들어간 뒤 code에 해당하는 부분이 실행됩니다. 그 후, i에 2가 들어간 뒤 다시 code가 실행되며 이 작업이 100까지 반복됩니다. 실제 예제를 살펴보도록 하겠습니다.</p>
<div class="sourceCode" id="cb229"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb229-1"><a href="r-기초-배우기.html#cb229-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">2016</span><span class="sc">:</span><span class="dv">2020</span>) {</span>
<span id="cb229-2"><a href="r-기초-배우기.html#cb229-2" aria-hidden="true" tabindex="-1"></a>  output <span class="ot">=</span> <span class="fu">paste</span>(<span class="st">&quot;The year is&quot;</span>, i)</span>
<span id="cb229-3"><a href="r-기초-배우기.html#cb229-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(output)</span>
<span id="cb229-4"><a href="r-기초-배우기.html#cb229-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;The year is 2016&quot;
## [1] &quot;The year is 2017&quot;
## [1] &quot;The year is 2018&quot;
## [1] &quot;The year is 2019&quot;
## [1] &quot;The year is 2020&quot;</code></pre>
<p>i에 2010부터 2016 까지 대입되며, <strong>The year is</strong>라는 문자와 결합해 결과가 출력됩니다.</p>
</div>
<div id="apply-계열-함수" class="section level4" number="0.8.2.3">
<h4><span class="header-section-number">0.8.2.3</span> <code>apply</code> 계열 함수</h4>
<p><code>apply</code> 계열의 함수는 loop 구문과 비슷한 역할을 하며, 코드를 훨씬 간결하게 표현할 수 있습니다. 먼저 가장 기본이 되는 <code>apply()</code> 함수는 데이터프레임의 행 혹은 열단위 계산에 자주 사용됩니다. 해당 함수는 다음과 같이 구성됩니다.</p>
<div class="sourceCode" id="cb231"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb231-1"><a href="r-기초-배우기.html#cb231-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apply</span>(x, MARGIN, FUN, ...)</span></code></pre></div>
<ul>
<li>x: 매트릭스, 데이터프레임, 혹은 어레이</li>
<li>MARGIN: 함수가 적용될 벡. 1은 행을, 2는 열을, c(1, 2)는 행과 열을 의미</li>
<li>FUN: 적용될 함수</li>
<li>…: 기타</li>
</ul>
<p>실제 사용 예제를 살펴보도록 하겠습니다.</p>
<div class="sourceCode" id="cb232"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb232-1"><a href="r-기초-배우기.html#cb232-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(mtcars)</span></code></pre></div>
<pre><code>##                    mpg cyl disp  hp drat    wt  qsec vs am gear carb
## Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
## Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
## Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
## Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
## Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
## Valiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1</code></pre>
<p>먼저 위 데이터에서 각 열의 평균을 구하도록 합니다.</p>
<div class="sourceCode" id="cb234"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb234-1"><a href="r-기초-배우기.html#cb234-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apply</span>(mtcars, <span class="dv">2</span>, mean)</span></code></pre></div>
<pre><code>##      mpg      cyl     disp       hp     drat       wt     qsec       vs 
##  20.0906   6.1875 230.7219 146.6875   3.5966   3.2172  17.8487   0.4375 
##       am     gear     carb 
##   0.4062   3.6875   2.8125</code></pre>
<p>mtcars에서 2 즉 열의 방향으로 평균(mean)을 구합니다.</p>
<p><code>lapply()</code> 함수는 리스트에 적용되며, 결과 또한 리스트로 반환됩니다. 해당 함수는 다음과 같이 구성됩니다.</p>
<div class="sourceCode" id="cb236"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb236-1"><a href="r-기초-배우기.html#cb236-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(x, FUN, ...)</span></code></pre></div>
<ul>
<li>x: 리스트</li>
<li>FUN: 적용될 함수</li>
<li>…: 기타</li>
</ul>
<p>실제 사용 예제를 살펴보도록 하겠습니다.</p>
<div class="sourceCode" id="cb237"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb237-1"><a href="r-기초-배우기.html#cb237-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">=</span> <span class="fu">list</span>(<span class="at">item1 =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>,</span>
<span id="cb237-2"><a href="r-기초-배우기.html#cb237-2" aria-hidden="true" tabindex="-1"></a>            <span class="at">item2 =</span> <span class="fu">rnorm</span>(<span class="dv">10</span>),</span>
<span id="cb237-3"><a href="r-기초-배우기.html#cb237-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">item3 =</span> <span class="fu">rnorm</span>(<span class="dv">20</span>, <span class="dv">1</span>),</span>
<span id="cb237-4"><a href="r-기초-배우기.html#cb237-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">item4 =</span> <span class="fu">rnorm</span>(<span class="dv">100</span>, <span class="dv">5</span>))</span>
<span id="cb237-5"><a href="r-기초-배우기.html#cb237-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb237-6"><a href="r-기초-배우기.html#cb237-6" aria-hidden="true" tabindex="-1"></a>data</span></code></pre></div>
<pre><code>## $item1
## [1] 1 2 3 4
## 
## $item2
##  [1] -0.56048 -0.23018  1.55871  0.07051  0.12929  1.71506  0.46092 -1.26506
##  [9] -0.68685 -0.44566
## 
## $item3
##  [1]  2.22408  1.35981  1.40077  1.11068  0.44416  2.78691  1.49785 -0.96662
##  [9]  1.70136  0.52721 -0.06782  0.78203 -0.02600  0.27111  0.37496 -0.68669
## [17]  1.83779  1.15337 -0.13814  2.25381
## 
## $item4
##   [1] 5.426 4.705 5.895 5.878 5.822 5.689 5.554 4.938 4.694 4.620 4.305 4.792
##  [13] 3.735 7.169 6.208 3.877 4.597 4.533 5.780 4.917 5.253 4.971 4.957 6.369
##  [25] 4.774 6.516 3.451 5.585 5.124 5.216 5.380 4.498 4.667 3.981 3.928 5.304
##  [37] 5.448 5.053 5.922 7.050 4.509 2.691 6.006 4.291 4.312 6.026 4.715 3.779
##  [49] 5.181 4.861 5.006 5.385 4.629 5.644 4.780 5.332 6.097 5.435 4.674 6.149
##  [61] 5.994 5.548 5.239 4.372 6.361 4.400 7.187 6.533 4.764 3.974 4.290 5.257
##  [73] 4.753 4.652 4.048 4.955 4.215 3.332 4.620 5.919 4.425 5.608 3.382 4.944
##  [85] 5.519 5.301 5.106 4.359 4.150 3.976 5.118 4.053 4.509 4.744 6.844 4.348
##  [97] 5.235 5.078 4.038 4.929</code></pre>
<p>4개의 원소로 구성된 리스트에서 각 원소의 평균을 구하고자 할 경우, 리스트에 적용되는 apply인 <code>lapply()</code> 함수를 사용해야 합니다.</p>
<div class="sourceCode" id="cb239"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb239-1"><a href="r-기초-배우기.html#cb239-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(data, mean)</span></code></pre></div>
<pre><code>## $item1
## [1] 2.5
## 
## $item2
## [1] 0.07463
## 
## $item3
## [1] 0.892
## 
## $item4
## [1] 5.022</code></pre>
<p><code>lapply()</code> 함수를 통해 각 항목의 평균을 구할 수 있으며, 결과 또한 리스트 형태로 반환됩니다. 해당 함수는 좀더 복잡한 형태로 응용도 가능합니다.</p>
<div class="sourceCode" id="cb241"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb241-1"><a href="r-기초-배우기.html#cb241-1" aria-hidden="true" tabindex="-1"></a>beaver_data <span class="ot">=</span> <span class="fu">list</span>(<span class="at">beaver1 =</span> beaver1, <span class="at">beaver2 =</span> beaver2)</span>
<span id="cb241-2"><a href="r-기초-배우기.html#cb241-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb241-3"><a href="r-기초-배우기.html#cb241-3" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(beaver_data, head)</span></code></pre></div>
<pre><code>## $beaver1
##   day time  temp activ
## 1 346  840 36.33     0
## 2 346  850 36.34     0
## 3 346  900 36.35     0
## 4 346  910 36.42     0
## 5 346  920 36.55     0
## 6 346  930 36.69     0
## 
## $beaver2
##   day time  temp activ
## 1 307  930 36.58     0
## 2 307  940 36.73     0
## 3 307  950 36.93     0
## 4 307 1000 37.15     0
## 5 307 1010 37.23     0
## 6 307 1020 37.24     0</code></pre>
<p>위 데이터의 각 항목에서 열 별 평균을 구하고자 할 경우 <code>lapply()</code> 함수 만으로는 계산이 불가능합니다. 이러한 경우 해당 함수 내부에 새로운 함수인 <code>function()</code>을 정의하여 복잡한 계산을 수행할 수 있습니다.</p>
<div class="sourceCode" id="cb243"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb243-1"><a href="r-기초-배우기.html#cb243-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(beaver_data, <span class="cf">function</span>(x) {</span>
<span id="cb243-2"><a href="r-기초-배우기.html#cb243-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">round</span>(<span class="fu">apply</span>(x, <span class="dv">2</span>, mean), <span class="dv">2</span>)</span>
<span id="cb243-3"><a href="r-기초-배우기.html#cb243-3" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div>
<pre><code>## $beaver1
##     day    time    temp   activ 
##  346.20 1312.02   36.86    0.05 
## 
## $beaver2
##     day    time    temp   activ 
##  307.13 1446.20   37.60    0.62</code></pre>
<p>function(x)를 통해 각 항목에 적용될 함수를 직접 정의할 수 있습니다. 우리가 정의한 함수는 <code>apply()</code> 함수를 통해 열의 방향으로 평균을 구한 뒤 소수 둘째 자리까지 반올림을 하는 것이며, 해당 함수가 리스트의 모든 원소에 적용됩니다.</p>
<p>마지막으로 살펴볼 <code>sapply()</code> 함수는 <code>lapply()</code> 함수와 거의 동일하며, 결과가 리스트가 아닌 벡터 혹은 매트릭스로 출력된다는 점만 차이가 있습니다.</p>
<div class="sourceCode" id="cb245"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb245-1"><a href="r-기초-배우기.html#cb245-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(beaver_data, <span class="cf">function</span>(x) {</span>
<span id="cb245-2"><a href="r-기초-배우기.html#cb245-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">round</span>(<span class="fu">apply</span>(x, <span class="dv">2</span>, mean), <span class="dv">2</span>)</span>
<span id="cb245-3"><a href="r-기초-배우기.html#cb245-3" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div>
<pre><code>## $beaver1
##     day    time    temp   activ 
##  346.20 1312.02   36.86    0.05 
## 
## $beaver2
##     day    time    temp   activ 
##  307.13 1446.20   37.60    0.62</code></pre>
<div class="sourceCode" id="cb247"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb247-1"><a href="r-기초-배우기.html#cb247-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(beaver_data, <span class="cf">function</span>(x) {</span>
<span id="cb247-2"><a href="r-기초-배우기.html#cb247-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">round</span>(<span class="fu">apply</span>(x, <span class="dv">2</span>, mean), <span class="dv">2</span>)</span>
<span id="cb247-3"><a href="r-기초-배우기.html#cb247-3" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div>
<pre><code>##       beaver1 beaver2
## day    346.20  307.13
## time  1312.02 1446.20
## temp    36.86   37.60
## activ    0.05    0.62</code></pre>
<p><code>sapply()</code> 함수는 각 원소에 적용된 값을 벡터로 하는 매트릭스 형태로 결과값이 출력됩니다.</p>
</div>
<div id="기타-함수" class="section level4" number="0.8.2.4">
<h4><span class="header-section-number">0.8.2.4</span> 기타 함수</h4>
<p>열과 행이 합계나 평균처럼 일반적으로 많이 사용되는 계산에는 <code>apply()</code> 함수보다 간단하게 표현할 수 있는 함수들이 있습니다.</p>
<div class="sourceCode" id="cb249"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb249-1"><a href="r-기초-배우기.html#cb249-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rowSums</span>(mtcars)</span></code></pre></div>
<pre><code>##           Mazda RX4       Mazda RX4 Wag          Datsun 710      Hornet 4 Drive 
##               329.0               329.8               259.6               426.1 
##   Hornet Sportabout             Valiant          Duster 360           Merc 240D 
##               590.3               385.5               656.9               271.0 
##            Merc 230            Merc 280           Merc 280C          Merc 450SE 
##               299.6               350.5               349.7               510.7 
##          Merc 450SL         Merc 450SLC  Cadillac Fleetwood Lincoln Continental 
##               511.5               509.9               728.6               726.6 
##   Chrysler Imperial            Fiat 128         Honda Civic      Toyota Corolla 
##               725.7               213.8               195.2               207.0 
##       Toyota Corona    Dodge Challenger         AMC Javelin          Camaro Z28 
##               273.8               519.6               506.1               646.3 
##    Pontiac Firebird           Fiat X1-9       Porsche 914-2        Lotus Europa 
##               631.2               208.2               272.6               273.7 
##      Ford Pantera L        Ferrari Dino       Maserati Bora          Volvo 142E 
##               670.7               379.6               694.7               288.9</code></pre>
<div class="sourceCode" id="cb251"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb251-1"><a href="r-기초-배우기.html#cb251-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colSums</span>(mtcars)</span></code></pre></div>
<pre><code>##    mpg    cyl   disp     hp   drat     wt   qsec     vs     am   gear   carb 
##  642.9  198.0 7383.1 4694.0  115.1  103.0  571.2   14.0   13.0  118.0   90.0</code></pre>
<p><code>rowSums()</code> 함수는 행의 합계를, <code>colSums()</code> 함수는 열의 합계는 구하며 이는 <code>apply(mtcars, 1 or 2, sum)</code> 과 동일합니다.</p>
<div class="sourceCode" id="cb253"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb253-1"><a href="r-기초-배우기.html#cb253-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rowMeans</span>(mtcars)</span></code></pre></div>
<pre><code>##           Mazda RX4       Mazda RX4 Wag          Datsun 710      Hornet 4 Drive 
##               29.91               29.98               23.60               38.74 
##   Hornet Sportabout             Valiant          Duster 360           Merc 240D 
##               53.66               35.05               59.72               24.63 
##            Merc 230            Merc 280           Merc 280C          Merc 450SE 
##               27.23               31.86               31.79               46.43 
##          Merc 450SL         Merc 450SLC  Cadillac Fleetwood Lincoln Continental 
##               46.50               46.35               66.23               66.06 
##   Chrysler Imperial            Fiat 128         Honda Civic      Toyota Corolla 
##               65.97               19.44               17.74               18.81 
##       Toyota Corona    Dodge Challenger         AMC Javelin          Camaro Z28 
##               24.89               47.24               46.01               58.75 
##    Pontiac Firebird           Fiat X1-9       Porsche 914-2        Lotus Europa 
##               57.38               18.93               24.78               24.88 
##      Ford Pantera L        Ferrari Dino       Maserati Bora          Volvo 142E 
##               60.97               34.51               63.16               26.26</code></pre>
<div class="sourceCode" id="cb255"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb255-1"><a href="r-기초-배우기.html#cb255-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colMeans</span>(mtcars)</span></code></pre></div>
<pre><code>##      mpg      cyl     disp       hp     drat       wt     qsec       vs 
##  20.0906   6.1875 230.7219 146.6875   3.5966   3.2172  17.8487   0.4375 
##       am     gear     carb 
##   0.4062   3.6875   2.8125</code></pre>
<p><code>rowMeans()</code> 함수와 <code>colMeans()</code> 함수 역시 각각 행과 열의 평균을 구합니다.</p>
</div>
</div>
<div id="파이프-오퍼레이터" class="section level3" number="0.8.3">
<h3><span class="header-section-number">0.8.3</span> 파이프 오퍼레이터</h3>
<p>파이프 오퍼레이터는 R에서 동일한 데이터를 대상으로 연속으로 작업하게 해주는 오퍼레이터(연산자)입니다.</p>
<p>흔히 프로그래밍에서 x라는 데이터를 <code>F()</code>라는 함수에 넣어 결괏값을 확인하고 싶으면 <code>F(x)</code>의 방법을 사용합니다. 예를 들어 3과 5라는 데이터 중 큰 값을 찾으려면 <code>max(3,5)</code>를 통해 확인합니다. 이를 통해 나온 결괏값을 또 다시 <code>G()</code>라는 함수에 넣어 결괏값을 확인하려면 비슷한 과정을 거칩니다. <code>max(3,5)</code>를 통해 나온 값의 제곱근을 구하려면 <code>result = max(3,5)</code>를 통해 첫 번째 결괏값을 저장하고, <code>sqrt(result)</code>를 통해 두 번째 결괏값을 계산합니다. 물론 <code>sqrt(max(3,5))</code>와 같은 표현법으로 한 번에 표현할 수 있습니다.</p>
<p>이러한 표현의 단점은 계산하는 함수가 많아질수록 저장하는 변수가 늘어나거나 괄호가 지나치게 길어진다는 것입니다. 그러나 파이프 오퍼레이터인 <code>%&gt;%</code>를 사용하면 함수 간의 관계를 매우 직관적으로 표현하고 이해할 수 있습니다. 이를 정리하면 아래 표와 같습니다.</p>
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-130">표 0.3: </span>파이프 오퍼레이터의 표현과 내용 비교
</caption>
<thead>
<tr>
<th style="text-align:center;">
내용
</th>
<th style="text-align:center;">
표현 방법
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
F(x)
</td>
<td style="text-align:center;">
x %&gt;% F
</td>
</tr>
<tr>
<td style="text-align:center;">
G(F(x))
</td>
<td style="text-align:center;">
x %&gt;% F %&gt;% G
</td>
</tr>
</tbody>
</table>
<p>간단한 예제를 통해 파이프 오퍼레이터의 사용법을 살펴보겠습니다. 먼저 다음과 같은 10개의 숫자가 있다고 가정합니다.</p>
<div class="sourceCode" id="cb257"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb257-1"><a href="r-기초-배우기.html#cb257-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="fu">c</span>(<span class="fl">0.3078</span>, <span class="fl">0.2577</span>, <span class="fl">0.5523</span>, <span class="fl">0.0564</span>, <span class="fl">0.4685</span>,</span>
<span id="cb257-2"><a href="r-기초-배우기.html#cb257-2" aria-hidden="true" tabindex="-1"></a>      <span class="fl">0.4838</span>, <span class="fl">0.8124</span>, <span class="fl">0.3703</span>, <span class="fl">0.5466</span>, <span class="fl">0.1703</span>)</span></code></pre></div>
<p>우리가 원하는 과정은 다음과 같습니다.</p>
<ol style="list-style-type: decimal">
<li>각 값들의 로그값을 구할 것</li>
<li>로그값들의 계차를 구할 것</li>
<li>구해진 계차의 지수값을 구할 것</li>
<li>소수 둘째 자리까지 반올림할 것</li>
</ol>
<p>입니다. 즉 <code>log()</code>, <code>diff()</code>, <code>exp()</code>, <code>round()</code>에 대한 값을 순차적으로 구하고자 합니다.</p>
<div class="sourceCode" id="cb258"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb258-1"><a href="r-기초-배우기.html#cb258-1" aria-hidden="true" tabindex="-1"></a>x1 <span class="ot">=</span> <span class="fu">log</span>(x)</span>
<span id="cb258-2"><a href="r-기초-배우기.html#cb258-2" aria-hidden="true" tabindex="-1"></a>x2 <span class="ot">=</span> <span class="fu">diff</span>(x1)</span>
<span id="cb258-3"><a href="r-기초-배우기.html#cb258-3" aria-hidden="true" tabindex="-1"></a>x3 <span class="ot">=</span> <span class="fu">exp</span>(x2)</span>
<span id="cb258-4"><a href="r-기초-배우기.html#cb258-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb258-5"><a href="r-기초-배우기.html#cb258-5" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(x3, <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 0.84 2.14 0.10 8.31 1.03 1.68 0.46 1.48 0.31</code></pre>
<p>첫 번째 방법은 단계별 함수의 결괏값을 변수에 저장하고 저장된 변수를 다시 불러와 함수에 넣고 계산하는 방법입니다. 전반적인 계산 과정을 확인하기에는 좋지만 매번 변수에 저장하고 불러오는 과정이 매우 비효율적이며 코드도 불필요하게 길어집니다.</p>
<div class="sourceCode" id="cb260"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb260-1"><a href="r-기초-배우기.html#cb260-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">exp</span>(<span class="fu">diff</span>(<span class="fu">log</span>(x))), <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 0.84 2.14 0.10 8.31 1.03 1.68 0.46 1.48 0.31</code></pre>
<p>두 번째는 괄호를 통해 감싸는 방법입니다. 앞선 방법에 비해 코드는 짧아졌지만, 계산 과정을 알아보기에는 매우 불편한 방법으로 코드가 짜여 있습니다.</p>
<div class="sourceCode" id="cb262"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb262-1"><a href="r-기초-배우기.html#cb262-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(magrittr)</span>
<span id="cb262-2"><a href="r-기초-배우기.html#cb262-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb262-3"><a href="r-기초-배우기.html#cb262-3" aria-hidden="true" tabindex="-1"></a>x <span class="sc">%&gt;%</span> <span class="fu">log</span>() <span class="sc">%&gt;%</span> <span class="fu">diff</span>() <span class="sc">%&gt;%</span> <span class="fu">exp</span>() <span class="sc">%&gt;%</span> <span class="fu">round</span>(., <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 0.84 2.14 0.10 8.31 1.03 1.68 0.46 1.48 0.31</code></pre>
<p>마지막으로 파이프 오퍼레이터를 사용하는 방법입니다. 코드도 짧으며 계산 과정을 한눈에 파악하기도 좋습니다. 맨 왼쪽에는 원하는 변수를 입력하며, %&gt;% 뒤에는 차례대로 계산하고자 하는 함수를 입력합니다. 변수의 입력값을 ()로 비워둘 경우, 오퍼레이터의 왼쪽에 있는 값이 입력 변수가 됩니다. 반면 <code>round()</code>와 같이 입력값이 두 개 이상 필요하면 마침표(.)가 오퍼레이터의 왼쪽 값으로 입력됩니다.</p>
<p>파이프 오퍼레이터는 크롤링뿐만 아니라 모든 코드에 사용할 수 있습니다. 이를 통해 훨씬 깔끔하면서도 데이터 처리 과정을 직관적으로 이해할 수 있습니다.</p>
</div>
</div>
<div id="데이터-구조-변형하기" class="section level2" number="0.9">
<h2><span class="header-section-number">0.9</span> 데이터 구조 변형하기</h2>
<p>기본적인 R 사용법을 익혔다면 데이터의 모양을 바꾸고 가공하여 내가 원하는 결과물을 출력해야 합니다. 해당 작업은 <code>tidyr</code> 패키지와 <code>dplyr</code> 패키지를 이용해 매우 효율적으로 수행할 수 있으며, dplyr 패키지의 함수 중 일부는 SQL 구문과 매우 유사합니다.</p>
<div id="tidyr-패키지를-이용한-데이터-모양-바꾸기" class="section level3" number="0.9.1">
<h3><span class="header-section-number">0.9.1</span> <code>tidyr</code> 패키지를 이용한 데이터 모양 바꾸기</h3>
<p>깔끔한 데이터(tidy data)는 다음과 같이 구성되어 있습니다.</p>
<ul>
<li>각 변수(variable)는 열로 구성됩니다.</li>
<li>각 관측값(observation)은 행으로 구성됩니다.</li>
<li>각 타입의 관측치는 테이블을 구성합니다.</li>
</ul>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-135"></span>
<img src="images/rbasic_tidy.png" alt="tidy 데이터 요건" width="100%" />
<p class="caption">
그림 0.24: tidy 데이터 요건
</p>
</div>
<p><code>tidyr</code> 패키지에는 이러한 깔끔한 데이터를 만드는데 필요한 여러 함수가 있습니다.</p>
<div id="pivot_longer-세로로-긴-데이터-만들기" class="section level4" number="0.9.1.1">
<h4><span class="header-section-number">0.9.1.1</span> <code>pivot_longer()</code>: 세로로 긴 데이터 만들기</h4>
<p>먼저 가로로 긴(Wide) 데이터를 세로로 길게 만드는데는 <code>pivot_longer()</code> 함수가 사용됩니다. 이 함수는 여러 열을 key-value 페어로 변형해줍니다.</p>
<div class="sourceCode" id="cb264"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb264-1"><a href="r-기초-배우기.html#cb264-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb264-2"><a href="r-기초-배우기.html#cb264-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb264-3"><a href="r-기초-배우기.html#cb264-3" aria-hidden="true" tabindex="-1"></a>table4a</span></code></pre></div>
<pre><code>## # A tibble: 3 x 3
##   country     `1999` `2000`
## * &lt;chr&gt;        &lt;int&gt;  &lt;int&gt;
## 1 Afghanistan    745   2666
## 2 Brazil       37737  80488
## 3 China       212258 213766</code></pre>
<p>위 예제에는 세 국가의 1999, 2000년 데이터가 있습니다. 이 중 country를 제외한 연도별 데이터를 세로로 길게 만들도록 하겠습니다.</p>
<div class="sourceCode" id="cb266"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb266-1"><a href="r-기초-배우기.html#cb266-1" aria-hidden="true" tabindex="-1"></a>long <span class="ot">=</span> table4a <span class="sc">%&gt;%</span> <span class="fu">pivot_longer</span>(<span class="at">names_to =</span> <span class="st">&#39;years&#39;</span>, <span class="at">values_to =</span> <span class="st">&#39;cases&#39;</span>, <span class="sc">-</span>country)</span>
<span id="cb266-2"><a href="r-기초-배우기.html#cb266-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb266-3"><a href="r-기초-배우기.html#cb266-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(long)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 3
##   country     years  cases
##   &lt;chr&gt;       &lt;chr&gt;  &lt;int&gt;
## 1 Afghanistan 1999     745
## 2 Afghanistan 2000    2666
## 3 Brazil      1999   37737
## 4 Brazil      2000   80488
## 5 China       1999  212258
## 6 China       2000  213766</code></pre>
<p>열 이름에 해당하던 1999, 2000 데이터가 names_to에 입력한 years 열에 입력되었습니다. 또한 각 관측값이 values_to에 입력한 cases 열에 입력되었습니다. country 앞에는 마이너스(-) 기호를 붙여 해당 열은 그대로 유지됩니다.</p>
<table class="kable_wrapper table table-striped" style="margin-left: auto; margin-right: auto;">
<tbody>
<tr>
<td>
<table>
<thead>
<tr>
<th style="text-align:left;">
country
</th>
<th style="text-align:right;">
1999
</th>
<th style="text-align:right;">
2000
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Afghanistan
</td>
<td style="text-align:right;">
745
</td>
<td style="text-align:right;">
2666
</td>
</tr>
<tr>
<td style="text-align:left;">
Brazil
</td>
<td style="text-align:right;">
37737
</td>
<td style="text-align:right;">
80488
</td>
</tr>
<tr>
<td style="text-align:left;">
China
</td>
<td style="text-align:right;">
212258
</td>
<td style="text-align:right;">
213766
</td>
</tr>
</tbody>
</table>
</td>
<td>
<table>
<thead>
<tr>
<th style="text-align:left;">
country
</th>
<th style="text-align:left;">
years
</th>
<th style="text-align:right;">
cases
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Afghanistan
</td>
<td style="text-align:left;">
1999
</td>
<td style="text-align:right;">
745
</td>
</tr>
<tr>
<td style="text-align:left;">
Afghanistan
</td>
<td style="text-align:left;">
2000
</td>
<td style="text-align:right;">
2666
</td>
</tr>
<tr>
<td style="text-align:left;">
Brazil
</td>
<td style="text-align:left;">
1999
</td>
<td style="text-align:right;">
37737
</td>
</tr>
<tr>
<td style="text-align:left;">
Brazil
</td>
<td style="text-align:left;">
2000
</td>
<td style="text-align:right;">
80488
</td>
</tr>
<tr>
<td style="text-align:left;">
China
</td>
<td style="text-align:left;">
1999
</td>
<td style="text-align:right;">
212258
</td>
</tr>
<tr>
<td style="text-align:left;">
China
</td>
<td style="text-align:left;">
2000
</td>
<td style="text-align:right;">
213766
</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
</div>
<div id="pivot_wider-가로로-긴-데이터-만들기" class="section level4" number="0.9.1.2">
<h4><span class="header-section-number">0.9.1.2</span> <code>pivot_wider()</code>: 가로로 긴 데이터 만들기</h4>
<p><code>pivot_longer()</code> 함수와 반대로, <code>pivot_wider()</code> 함수를 이용할 경우 세로로 긴 데이터를 가로로 길게 만들 수 있습니다. 위의 데이터에 year 열에 있는 항목들을 열 이름으로, cases 열에 있는 항목들을 가로로 길게 되돌려 보겠습니다.</p>
<div class="sourceCode" id="cb268"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb268-1"><a href="r-기초-배우기.html#cb268-1" aria-hidden="true" tabindex="-1"></a>back2wide <span class="ot">=</span> long <span class="sc">%&gt;%</span> <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> <span class="st">&#39;years&#39;</span>, <span class="at">values_from =</span> <span class="st">&#39;cases&#39;</span>)</span>
<span id="cb268-2"><a href="r-기초-배우기.html#cb268-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb268-3"><a href="r-기초-배우기.html#cb268-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(back2wide)</span></code></pre></div>
<pre><code>## # A tibble: 3 x 3
##   country     `1999` `2000`
##   &lt;chr&gt;        &lt;int&gt;  &lt;int&gt;
## 1 Afghanistan    745   2666
## 2 Brazil       37737  80488
## 3 China       212258 213766</code></pre>
<p>names_from와 values_from에 각각 열이름 및 관측값에 해당하는 값을 입력하면, 원래대로 가로로 긴 테이블 형태가 되었습니다.</p>
</div>
<div id="separate-하나의-열을-여러-열로-나누기" class="section level4" number="0.9.1.3">
<h4><span class="header-section-number">0.9.1.3</span> <code>separate()</code>: 하나의 열을 여러 열로 나누기</h4>
<div class="sourceCode" id="cb270"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb270-1"><a href="r-기초-배우기.html#cb270-1" aria-hidden="true" tabindex="-1"></a>table3</span></code></pre></div>
<pre><code>## # A tibble: 6 x 3
##   country      year rate             
## * &lt;chr&gt;       &lt;int&gt; &lt;chr&gt;            
## 1 Afghanistan  1999 745/19987071     
## 2 Afghanistan  2000 2666/20595360    
## 3 Brazil       1999 37737/172006362  
## 4 Brazil       2000 80488/174504898  
## 5 China        1999 212258/1272915272
## 6 China        2000 213766/1280428583</code></pre>
<p>rate 열에는 데이터가 ###/#### 형태로 들어가 있습니다. / 기호를 기준으로 앞과 뒤로 각각 나누어보도록 하겠습니다.</p>
<div class="sourceCode" id="cb272"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb272-1"><a href="r-기초-배우기.html#cb272-1" aria-hidden="true" tabindex="-1"></a>table3 <span class="sc">%&gt;%</span> </span>
<span id="cb272-2"><a href="r-기초-배우기.html#cb272-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(rate, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;cases&quot;</span>, <span class="st">&quot;population&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 6 x 4
##   country      year cases  population
##   &lt;chr&gt;       &lt;int&gt; &lt;chr&gt;  &lt;chr&gt;     
## 1 Afghanistan  1999 745    19987071  
## 2 Afghanistan  2000 2666   20595360  
## 3 Brazil       1999 37737  172006362 
## 4 Brazil       2000 80488  174504898 
## 5 China        1999 212258 1272915272
## 6 China        2000 213766 1280428583</code></pre>
<p><code>separate()</code> 함수를 사용할 경우 rate 열이 “/”를 기준으로 into에 입력한 cases와 population 열로 분리됩니다.</p>
<div class="sourceCode" id="cb274"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb274-1"><a href="r-기초-배우기.html#cb274-1" aria-hidden="true" tabindex="-1"></a>table3 <span class="sc">%&gt;%</span> </span>
<span id="cb274-2"><a href="r-기초-배우기.html#cb274-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(rate, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;cases&quot;</span>, <span class="st">&quot;population&quot;</span>), <span class="at">remove =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 5
##   country      year rate              cases  population
##   &lt;chr&gt;       &lt;int&gt; &lt;chr&gt;             &lt;chr&gt;  &lt;chr&gt;     
## 1 Afghanistan  1999 745/19987071      745    19987071  
## 2 Afghanistan  2000 2666/20595360     2666   20595360  
## 3 Brazil       1999 37737/172006362   37737  172006362 
## 4 Brazil       2000 80488/174504898   80488  174504898 
## 5 China        1999 212258/1272915272 212258 1272915272
## 6 China        2000 213766/1280428583 213766 1280428583</code></pre>
<p>remove = FALSE 인자를 추가해주면 원래의 열이 사라지지 않고 유지됩니다.</p>
</div>
<div id="unite-여러-열을-하나로-합치기" class="section level4" number="0.9.1.4">
<h4><span class="header-section-number">0.9.1.4</span> <code>unite()</code>: 여러 열을 하나로 합치기</h4>
<p><code>separate()</code> 함수와는 반대로, <code>unite()</code> 함수를 이용시 여러 열을 하나로 합칠 수 있습니다.</p>
<div class="sourceCode" id="cb276"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb276-1"><a href="r-기초-배우기.html#cb276-1" aria-hidden="true" tabindex="-1"></a>table5</span></code></pre></div>
<pre><code>## # A tibble: 6 x 4
##   country     century year  rate             
## * &lt;chr&gt;       &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;            
## 1 Afghanistan 19      99    745/19987071     
## 2 Afghanistan 20      00    2666/20595360    
## 3 Brazil      19      99    37737/172006362  
## 4 Brazil      20      00    80488/174504898  
## 5 China       19      99    212258/1272915272
## 6 China       20      00    213766/1280428583</code></pre>
<p>이번에는 century와 year 열을 합친 후 새로운 열을 만들어보도록 하겠습니다.</p>
<div class="sourceCode" id="cb278"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb278-1"><a href="r-기초-배우기.html#cb278-1" aria-hidden="true" tabindex="-1"></a>table5 <span class="sc">%&gt;%</span> </span>
<span id="cb278-2"><a href="r-기초-배우기.html#cb278-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unite</span>(new, century, year, <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 3
##   country     new   rate             
##   &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;            
## 1 Afghanistan 19_99 745/19987071     
## 2 Afghanistan 20_00 2666/20595360    
## 3 Brazil      19_99 37737/172006362  
## 4 Brazil      20_00 80488/174504898  
## 5 China       19_99 212258/1272915272
## 6 China       20_00 213766/1280428583</code></pre>
<p>century 열과 year열이 합쳐진 후 new 열에 입력되었으며, sep 인자를 통해 구분자는 “_“로 설정하였습니다.</p>
</div>
<div id="tidyr-패키지의-기타-함수" class="section level4" number="0.9.1.5">
<h4><span class="header-section-number">0.9.1.5</span> <code>tidyr</code> 패키지의 기타 함수</h4>
<p>먼저 <code>fill()</code> 함수는 결측치를 채워주는 역할을 합니다.</p>
<div class="sourceCode" id="cb280"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb280-1"><a href="r-기초-배우기.html#cb280-1" aria-hidden="true" tabindex="-1"></a>score <span class="ot">=</span> <span class="fu">tribble</span>(</span>
<span id="cb280-2"><a href="r-기초-배우기.html#cb280-2" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span> person, <span class="sc">~</span> Math, <span class="sc">~</span> Computer,</span>
<span id="cb280-3"><a href="r-기초-배우기.html#cb280-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Henry&quot;</span>,  <span class="dv">1</span>,         <span class="dv">7</span>,</span>
<span id="cb280-4"><a href="r-기초-배우기.html#cb280-4" aria-hidden="true" tabindex="-1"></a>  <span class="cn">NA</span>,       <span class="dv">2</span>,         <span class="dv">10</span>,</span>
<span id="cb280-5"><a href="r-기초-배우기.html#cb280-5" aria-hidden="true" tabindex="-1"></a>  <span class="cn">NA</span>,       <span class="cn">NA</span>,        <span class="dv">9</span>,</span>
<span id="cb280-6"><a href="r-기초-배우기.html#cb280-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;David&quot;</span>,  <span class="dv">1</span>,         <span class="dv">4</span></span>
<span id="cb280-7"><a href="r-기초-배우기.html#cb280-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb280-8"><a href="r-기초-배우기.html#cb280-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb280-9"><a href="r-기초-배우기.html#cb280-9" aria-hidden="true" tabindex="-1"></a>score</span></code></pre></div>
<pre><code>## # A tibble: 4 x 3
##   person  Math Computer
##   &lt;chr&gt;  &lt;dbl&gt;    &lt;dbl&gt;
## 1 Henry      1        7
## 2 &lt;NA&gt;       2       10
## 3 &lt;NA&gt;      NA        9
## 4 David      1        4</code></pre>
<p>score의 2번째와 3번째 행에 NA 데이터가 있어 이를 채워줄 필요가 있습니다.</p>
<div class="sourceCode" id="cb282"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb282-1"><a href="r-기초-배우기.html#cb282-1" aria-hidden="true" tabindex="-1"></a>score <span class="sc">%&gt;%</span> </span>
<span id="cb282-2"><a href="r-기초-배우기.html#cb282-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fill</span>(person, Math)</span></code></pre></div>
<pre><code>## # A tibble: 4 x 3
##   person  Math Computer
##   &lt;chr&gt;  &lt;dbl&gt;    &lt;dbl&gt;
## 1 Henry      1        7
## 2 Henry      2       10
## 3 Henry      2        9
## 4 David      1        4</code></pre>
<p><code>fill()</code> 함수는 결측치가 있을 경우, 각 열의 이전 데이터를 이용해 채워줍니다. 반면에 NA 데이터를 특정 값으로 변경할 수도 있습니다.</p>
<div class="sourceCode" id="cb284"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb284-1"><a href="r-기초-배우기.html#cb284-1" aria-hidden="true" tabindex="-1"></a>score <span class="sc">%&gt;%</span> <span class="fu">replace_na</span>(<span class="at">replace =</span> <span class="fu">list</span>(<span class="at">person =</span> <span class="st">&quot;unknown&quot;</span>, <span class="at">Math =</span> <span class="dv">0</span>))</span></code></pre></div>
<pre><code>## # A tibble: 4 x 3
##   person   Math Computer
##   &lt;chr&gt;   &lt;dbl&gt;    &lt;dbl&gt;
## 1 Henry       1        7
## 2 unknown     2       10
## 3 unknown     0        9
## 4 David       1        4</code></pre>
<p><code>replace_na()</code> 함수를 이용해 person 열의 NA 데이터를 <strong>unknown</strong>으로, Math열의 NA 데이터를 0으로 변경하였습니다.</p>
</div>
</div>
<div id="dplyr-패키지를-이용한-데이터-변형하기" class="section level3" number="0.9.2">
<h3><span class="header-section-number">0.9.2</span> <code>dplyr</code> 패키지를 이용한 데이터 변형하기</h3>
<p>데이터를 필터링 하거나, 요약하거나, 정렬하거나, 새로운 변수를 만드는 등 데이터 분석을 위해서는 데이터 변형하고 가공해야 하는 경우가 많습니다. R의 기본 함수도 이러한 기능을 제공하지만, <code>dplyr</code> 패키지를 이용할 경우 훨씬 빠르고 효율적으로 업무를 처리할 수 있습니다.</p>
<p>nycflights13 패키지의 flights 데이터셋을 예제로 사용하도록 하겠습니다.</p>
<div class="sourceCode" id="cb286"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb286-1"><a href="r-기초-배우기.html#cb286-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb286-2"><a href="r-기초-배우기.html#cb286-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(nycflights13)</span>
<span id="cb286-3"><a href="r-기초-배우기.html#cb286-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb286-4"><a href="r-기초-배우기.html#cb286-4" aria-hidden="true" tabindex="-1"></a>flights</span></code></pre></div>
<pre><code>## # A tibble: 336,776 x 19
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
##  1  2013     1     1      517            515         2      830            819
##  2  2013     1     1      533            529         4      850            830
##  3  2013     1     1      542            540         2      923            850
##  4  2013     1     1      544            545        -1     1004           1022
##  5  2013     1     1      554            600        -6      812            837
##  6  2013     1     1      554            558        -4      740            728
##  7  2013     1     1      555            600        -5      913            854
##  8  2013     1     1      557            600        -3      709            723
##  9  2013     1     1      557            600        -3      838            846
## 10  2013     1     1      558            600        -2      753            745
## # ... with 336,766 more rows, and 11 more variables: arr_delay &lt;dbl&gt;,
## #   carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;,
## #   air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<div id="select-원하는-열-선택하기" class="section level4" number="0.9.2.1">
<h4><span class="header-section-number">0.9.2.1</span> <code>select()</code>: 원하는 열 선택하기</h4>
<p><code>select()</code> 함수를 이용해 특정 열만을 선택할 수 있습니다.</p>
<div class="sourceCode" id="cb288"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb288-1"><a href="r-기초-배우기.html#cb288-1" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">select</span>(year, month, day) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## # A tibble: 6 x 3
##    year month   day
##   &lt;int&gt; &lt;int&gt; &lt;int&gt;
## 1  2013     1     1
## 2  2013     1     1
## 3  2013     1     1
## 4  2013     1     1
## 5  2013     1     1
## 6  2013     1     1</code></pre>
<p><code>select()</code> 함수 내에 선택하고자 하는 열을 입력하여 year, month, day 열을 선택했습니다.</p>
<div class="sourceCode" id="cb290"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb290-1"><a href="r-기초-배우기.html#cb290-1" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">select</span>(year<span class="sc">:</span>day) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## # A tibble: 6 x 3
##    year month   day
##   &lt;int&gt; &lt;int&gt; &lt;int&gt;
## 1  2013     1     1
## 2  2013     1     1
## 3  2013     1     1
## 4  2013     1     1
## 5  2013     1     1
## 6  2013     1     1</code></pre>
<p>콜론(:)을 이용해 year부터 day 까지의 열을 한번에 선택할 수도 있습니다.</p>
<div class="sourceCode" id="cb292"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb292-1"><a href="r-기초-배우기.html#cb292-1" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>(year<span class="sc">:</span>day)) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## # A tibble: 6 x 16
##   dep_time sched_dep_time dep_delay arr_time sched_arr_time arr_delay carrier
##      &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt; &lt;chr&gt;  
## 1      517            515         2      830            819        11 UA     
## 2      533            529         4      850            830        20 UA     
## 3      542            540         2      923            850        33 AA     
## 4      544            545        -1     1004           1022       -18 B6     
## 5      554            600        -6      812            837       -25 DL     
## 6      554            558        -4      740            728        12 UA     
## # ... with 9 more variables: flight &lt;int&gt;, tailnum &lt;chr&gt;, origin &lt;chr&gt;,
## #   dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;, minute &lt;dbl&gt;,
## #   time_hour &lt;dttm&gt;</code></pre>
<p>마이너스(-)를 이용할 경우 해당 열을 제외한 모든 열이 선택됩니다.</p>
<div class="sourceCode" id="cb294"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb294-1"><a href="r-기초-배우기.html#cb294-1" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">&quot;dep&quot;</span>)) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## # A tibble: 6 x 2
##   dep_time dep_delay
##      &lt;int&gt;     &lt;dbl&gt;
## 1      517         2
## 2      533         4
## 3      542         2
## 4      544        -1
## 5      554        -6
## 6      554        -4</code></pre>
<p><code>select()</code> 함수 내에 <code>starts_with()</code> 함수를 이용할 경우, 해당 문자로 시작하는 열을 모두 선택할 수 있습니다. 이 외에도 <code>ends_with()</code> 함수는 해당 문자로 끝나는 열울, <code>contains()</code> 함수는 해당 문자가 포함되는 열을 선택합니다.</p>
</div>
<div id="rename-열이름-바꾸기" class="section level4" number="0.9.2.2">
<h4><span class="header-section-number">0.9.2.2</span> <code>rename()</code>: 열이름 바꾸기</h4>
<div class="sourceCode" id="cb296"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb296-1"><a href="r-기초-배우기.html#cb296-1" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">tail_num =</span> tailnum) <span class="sc">%&gt;%</span> <span class="fu">select</span>(tail_num) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## # A tibble: 6 x 1
##   tail_num
##   &lt;chr&gt;   
## 1 N14228  
## 2 N24211  
## 3 N619AA  
## 4 N804JB  
## 5 N668DN  
## 6 N39463</code></pre>
<p><code>rename()</code> 함수를 이용해 <strong>tailnum</strong> 이던 열 이름을 <strong>tail_num</strong> 으로 변경하였습니다. 해당 함수는 <code>rename(변경하고자 하는 이름 = 변경전 이름)</code> 형태로 입력해야 합니다.</p>
</div>
<div id="filter-필터링" class="section level4" number="0.9.2.3">
<h4><span class="header-section-number">0.9.2.3</span> <code>filter()</code>: 필터링</h4>
<p>특정 열에 원하는 데이터가 있는 부분만 필터링을 해야하는 경우가 많으며, <code>filter()</code> 함수를 사용해 손쉽게 해결할 수 있습니다.</p>
<div class="sourceCode" id="cb298"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb298-1"><a href="r-기초-배우기.html#cb298-1" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">filter</span>(month <span class="sc">==</span> <span class="dv">3</span>, day <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## # A tibble: 6 x 19
##    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
## 1  2013     3     1        4           2159       125      318             56
## 2  2013     3     1       50           2358        52      526            438
## 3  2013     3     1      117           2245       152      223           2354
## 4  2013     3     1      454            500        -6      633            648
## 5  2013     3     1      505            515       -10      746            810
## 6  2013     3     1      521            530        -9      813            827
## # ... with 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
## #   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
## #   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<p><code>filter()</code> 함수 내에 필터링 하고자 하는 조건, 즉 month가 3이고 day가 1인 조건을 입력하면 해당 조건에 부합하는 행만 선택됩니다.</p>
</div>
<div id="summarize-요약값-계산하기" class="section level4" number="0.9.2.4">
<h4><span class="header-section-number">0.9.2.4</span> <code>summarize()</code>: 요약값 계산하기</h4>
<p>요약 통계값은 <code>summarize()</code> 함수를 통해 쉽게 계산할 수 있습니다.</p>
<div class="sourceCode" id="cb300"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb300-1"><a href="r-기초-배우기.html#cb300-1" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">max_dep =</span> <span class="fu">max</span>(dep_time, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb300-2"><a href="r-기초-배우기.html#cb300-2" aria-hidden="true" tabindex="-1"></a>                      <span class="at">min_dep =</span> <span class="fu">min</span>(dep_time, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code></pre></div>
<pre><code>## # A tibble: 1 x 2
##   max_dep min_dep
##     &lt;int&gt;   &lt;int&gt;
## 1    2400       1</code></pre>
<p><code>summarize()</code> 함수를 통해 max_dep에는 dep_time의 최대값을, min_dep에는 dep_time의 최소값을 구해줍니다. <strong>na.rm</strong> 인자를 TRUE로 설정하여 NA 데이터는 제거해 줍니다.</p>
</div>
<div id="group_by-원하는-조건으로-그룹화" class="section level4" number="0.9.2.5">
<h4><span class="header-section-number">0.9.2.5</span> <code>group_by()</code>: 원하는 조건으로 그룹화</h4>
<p>각 그룹별 통계량을 계산할 때는 <code>group_by()</code> 함수를 통해 그룹을 묶고, 계산하는 것이 편합니다.</p>
<div class="sourceCode" id="cb302"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb302-1"><a href="r-기초-배우기.html#cb302-1" aria-hidden="true" tabindex="-1"></a>by_day <span class="ot">=</span> flights <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(year, month, day)</span>
<span id="cb302-2"><a href="r-기초-배우기.html#cb302-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb302-3"><a href="r-기초-배우기.html#cb302-3" aria-hidden="true" tabindex="-1"></a>by_day <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## # A tibble: 6 x 19
## # Groups:   year, month, day [1]
##    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
## 1  2013     1     1      517            515         2      830            819
## 2  2013     1     1      533            529         4      850            830
## 3  2013     1     1      542            540         2      923            850
## 4  2013     1     1      544            545        -1     1004           1022
## 5  2013     1     1      554            600        -6      812            837
## 6  2013     1     1      554            558        -4      740            728
## # ... with 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
## #   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
## #   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<p>year, month, day를 기준으로 그룹을 묶었습니다. 아직 계산을 하지 않았으므로 출력되는 데이터프레임 자체는 원래와 동일하며, <strong>Groups</strong>를 통해 어떠한 조건으로 그룹이 묶여있는지 확인됩니다.</p>
<div class="sourceCode" id="cb304"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb304-1"><a href="r-기초-배우기.html#cb304-1" aria-hidden="true" tabindex="-1"></a>by_day <span class="sc">%&gt;%</span></span>
<span id="cb304-2"><a href="r-기초-배우기.html#cb304-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">delay =</span> <span class="fu">mean</span>(dep_delay, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb304-3"><a href="r-기초-배우기.html#cb304-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## # A tibble: 6 x 4
## # Groups:   year, month [1]
##    year month   day delay
##   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt;
## 1  2013     1     1 11.5 
## 2  2013     1     2 13.9 
## 3  2013     1     3 11.0 
## 4  2013     1     4  8.95
## 5  2013     1     5  5.73
## 6  2013     1     6  7.15</code></pre>
<p>해당 데이터는 그룹별로 묶여 있으므로, <code>summarise()</code> 함수를 적용하면 각 그룹(year, month, day) 별로 dep_delay의 평균을 구합니다.</p>
<div class="sourceCode" id="cb306"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb306-1"><a href="r-기초-배우기.html#cb306-1" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(dest) <span class="sc">%&gt;%</span></span>
<span id="cb306-2"><a href="r-기초-배우기.html#cb306-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb306-3"><a href="r-기초-배우기.html#cb306-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">count =</span> <span class="fu">n</span>(),</span>
<span id="cb306-4"><a href="r-기초-배우기.html#cb306-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">dist =</span> <span class="fu">mean</span>(distance, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb306-5"><a href="r-기초-배우기.html#cb306-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">delay =</span> <span class="fu">mean</span>(arr_delay, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb306-6"><a href="r-기초-배우기.html#cb306-6" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>## # A tibble: 105 x 4
##    dest  count  dist delay
##    &lt;chr&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 ABQ     254 1826   4.38
##  2 ACK     265  199   4.85
##  3 ALB     439  143  14.4 
##  4 ANC       8 3370  -2.5 
##  5 ATL   17215  757. 11.3 
##  6 AUS    2439 1514.  6.02
##  7 AVL     275  584.  8.00
##  8 BDL     443  116   7.05
##  9 BGR     375  378   8.03
## 10 BHM     297  866. 16.9 
## # ... with 95 more rows</code></pre>
<p>한 번에 여러 통계량을 계산할 수도 있으며, <code>n()</code>은 데이터의 갯수를 의미합니다.</p>
</div>
<div id="arrange-데이터-정렬하기" class="section level4" number="0.9.2.6">
<h4><span class="header-section-number">0.9.2.6</span> <code>arrange()</code>: 데이터 정렬하기</h4>
<p><code>arrange()</code> 함수를 통해 원하는 열을 기준으로 데이터를 순서대로 정렬할 수 있으며, 오름차순을 기본으로 합니다.</p>
<div class="sourceCode" id="cb308"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb308-1"><a href="r-기초-배우기.html#cb308-1" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(year, month, day) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## # A tibble: 6 x 19
##    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
## 1  2013     1     1      517            515         2      830            819
## 2  2013     1     1      533            529         4      850            830
## 3  2013     1     1      542            540         2      923            850
## 4  2013     1     1      544            545        -1     1004           1022
## 5  2013     1     1      554            600        -6      812            837
## 6  2013     1     1      554            558        -4      740            728
## # ... with 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
## #   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
## #   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<p><code>arrange()</code> 함수 내에 입력한 [year -&gt; month -&gt; day] 순으로 오름차순 정렬이 됩니다.</p>
<div class="sourceCode" id="cb310"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb310-1"><a href="r-기초-배우기.html#cb310-1" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(dep_delay)) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## # A tibble: 6 x 19
##    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
## 1  2013     1     9      641            900      1301     1242           1530
## 2  2013     6    15     1432           1935      1137     1607           2120
## 3  2013     1    10     1121           1635      1126     1239           1810
## 4  2013     9    20     1139           1845      1014     1457           2210
## 5  2013     7    22      845           1600      1005     1044           1815
## 6  2013     4    10     1100           1900       960     1342           2211
## # ... with 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
## #   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
## #   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<p>정렬하고자 하는 열에 <code>desc()</code> 함수를 추가할 경우, 오름차순이 아닌 내림차순으로 정렬됩니다.</p>
</div>
<div id="join-데이터-합치기" class="section level4" number="0.9.2.7">
<h4><span class="header-section-number">0.9.2.7</span> <code>*_join()</code>: 데이터 합치기</h4>
<p>여러 테이블을 하나로 합치기 위해 <code>*_join()</code> 함수를 이용합니다. 합치는 방법은 그림 <a href="r-기초-배우기.html#fig:joinimg2">0.25</a>과 표 <a href="r-기초-배우기.html#tab:joindesc2">0.4</a> 같이 크게 네가지 종류가 있습니다.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:joinimg2"></span>
<img src="images/rbasic_join.png" alt="*_ join() 함수의 종류" width="100%" />
<p class="caption">
그림 0.25: *_ join() 함수의 종류
</p>
</div>
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:joindesc2">표 0.4: </span>join 함수의 종류
</caption>
<thead>
<tr>
<th style="text-align:center;">
함수
</th>
<th style="text-align:center;">
내용
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;width: 4cm; ">
inner_join()
</td>
<td style="text-align:center;width: 4cm; ">
교집합
</td>
</tr>
<tr>
<td style="text-align:center;width: 4cm; ">
full_join()
</td>
<td style="text-align:center;width: 4cm; ">
합집합
</td>
</tr>
<tr>
<td style="text-align:center;width: 4cm; ">
left_join()
</td>
<td style="text-align:center;width: 4cm; ">
좌측 기준
</td>
</tr>
<tr>
<td style="text-align:center;width: 4cm; ">
right_join()
</td>
<td style="text-align:center;width: 4cm; ">
우측 기준
</td>
</tr>
</tbody>
</table>
<p>다음 두개의 데이터 테이블을 이용하도록 합니다.</p>
<div class="sourceCode" id="cb312"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb312-1"><a href="r-기초-배우기.html#cb312-1" aria-hidden="true" tabindex="-1"></a>flights2 <span class="ot">=</span> flights <span class="sc">%&gt;%</span> </span>
<span id="cb312-2"><a href="r-기초-배우기.html#cb312-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year<span class="sc">:</span>day, hour, tailnum, carrier)</span>
<span id="cb312-3"><a href="r-기초-배우기.html#cb312-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb312-4"><a href="r-기초-배우기.html#cb312-4" aria-hidden="true" tabindex="-1"></a>flights2 <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## # A tibble: 6 x 6
##    year month   day  hour tailnum carrier
##   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;  
## 1  2013     1     1     5 N14228  UA     
## 2  2013     1     1     5 N24211  UA     
## 3  2013     1     1     5 N619AA  AA     
## 4  2013     1     1     5 N804JB  B6     
## 5  2013     1     1     6 N668DN  DL     
## 6  2013     1     1     5 N39463  UA</code></pre>
<div class="sourceCode" id="cb314"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb314-1"><a href="r-기초-배우기.html#cb314-1" aria-hidden="true" tabindex="-1"></a>airlines <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## # A tibble: 6 x 2
##   carrier name                    
##   &lt;chr&gt;   &lt;chr&gt;                   
## 1 9E      Endeavor Air Inc.       
## 2 AA      American Airlines Inc.  
## 3 AS      Alaska Airlines Inc.    
## 4 B6      JetBlue Airways         
## 5 DL      Delta Air Lines Inc.    
## 6 EV      ExpressJet Airlines Inc.</code></pre>
<p>flights2 데이터에는 항공사 명의 약자인 carrier가 있으며, airlines 데이터는 해당 약자의 풀 네임이 적혀있습니다. <code>left_join()</code> 함수를 이용해 왼쪽 데이터프레임을 기준으로 데이터를 합치도록 하며, 두 데이터 모두 carrier 열이 있으므로 이를 기준으로 데이터가 합치도록 하겠습니다.</p>
<div class="sourceCode" id="cb316"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb316-1"><a href="r-기초-배우기.html#cb316-1" aria-hidden="true" tabindex="-1"></a>flights2 <span class="sc">%&gt;%</span></span>
<span id="cb316-2"><a href="r-기초-배우기.html#cb316-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(airlines, <span class="at">by =</span> <span class="st">&quot;carrier&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb316-3"><a href="r-기초-배우기.html#cb316-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## # A tibble: 6 x 7
##    year month   day  hour tailnum carrier name                  
##   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;                 
## 1  2013     1     1     5 N14228  UA      United Air Lines Inc. 
## 2  2013     1     1     5 N24211  UA      United Air Lines Inc. 
## 3  2013     1     1     5 N619AA  AA      American Airlines Inc.
## 4  2013     1     1     5 N804JB  B6      JetBlue Airways       
## 5  2013     1     1     6 N668DN  DL      Delta Air Lines Inc.  
## 6  2013     1     1     5 N39463  UA      United Air Lines Inc.</code></pre>
<p>flights2에서 모든 데이터를 가져오며, airlines의 name 열이 기존 테이블에 추가됩니다. join 구문에 대한 더욱 상세한 예제 및 애니메이션은 다음 주소를 참조하시기 바랍니다.</p>
<pre><code>https://github.com/gadenbuie/tidyexplain</code></pre>
</div>
<div id="mutate-새로운-열-생성하기" class="section level4" number="0.9.2.8">
<h4><span class="header-section-number">0.9.2.8</span> <code>mutate()</code>: 새로운 열 생성하기</h4>
<p><code>mutate()</code> 함수를 사용해 기존 열끼리 계산을 하여 새로운 열을 생성할 수 있습니다.</p>
<div class="sourceCode" id="cb319"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb319-1"><a href="r-기초-배우기.html#cb319-1" aria-hidden="true" tabindex="-1"></a>flights_sml <span class="ot">=</span> flights <span class="sc">%&gt;%</span></span>
<span id="cb319-2"><a href="r-기초-배우기.html#cb319-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(</span>
<span id="cb319-3"><a href="r-기초-배우기.html#cb319-3" aria-hidden="true" tabindex="-1"></a>    year<span class="sc">:</span>day, </span>
<span id="cb319-4"><a href="r-기초-배우기.html#cb319-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ends_with</span>(<span class="st">&quot;delay&quot;</span>), </span>
<span id="cb319-5"><a href="r-기초-배우기.html#cb319-5" aria-hidden="true" tabindex="-1"></a>    distance, </span>
<span id="cb319-6"><a href="r-기초-배우기.html#cb319-6" aria-hidden="true" tabindex="-1"></a>    air_time</span>
<span id="cb319-7"><a href="r-기초-배우기.html#cb319-7" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb319-8"><a href="r-기초-배우기.html#cb319-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb319-9"><a href="r-기초-배우기.html#cb319-9" aria-hidden="true" tabindex="-1"></a>flights_sml <span class="sc">%&gt;%</span></span>
<span id="cb319-10"><a href="r-기초-배우기.html#cb319-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb319-11"><a href="r-기초-배우기.html#cb319-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">gain =</span> dep_delay <span class="sc">-</span> arr_delay,</span>
<span id="cb319-12"><a href="r-기초-배우기.html#cb319-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">speed =</span> distance <span class="sc">/</span> air_time <span class="sc">*</span> <span class="dv">60</span></span>
<span id="cb319-13"><a href="r-기초-배우기.html#cb319-13" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb319-14"><a href="r-기초-배우기.html#cb319-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## # A tibble: 6 x 9
##    year month   day dep_delay arr_delay distance air_time  gain speed
##   &lt;int&gt; &lt;int&gt; &lt;int&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1  2013     1     1         2        11     1400      227    -9  370.
## 2  2013     1     1         4        20     1416      227   -16  374.
## 3  2013     1     1         2        33     1089      160   -31  408.
## 4  2013     1     1        -1       -18     1576      183    17  517.
## 5  2013     1     1        -6       -25      762      116    19  394.
## 6  2013     1     1        -4        12      719      150   -16  288.</code></pre>
<p>먼저 flights에서 일부 열을 선택하여 flights_sml에 저장합니다.그 후, <code>mutate()</code> 함수를 이용해 새로운 열을 만들어 줍니다. gain 열에는 dep_delay와 arr_delay의 차이가, speed 열에는 distance와 air_time 비에 60을 곱한 값이 새롭게 생성됩니다.</p>
<div class="sourceCode" id="cb321"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb321-1"><a href="r-기초-배우기.html#cb321-1" aria-hidden="true" tabindex="-1"></a>flights_sml <span class="sc">%&gt;%</span></span>
<span id="cb321-2"><a href="r-기초-배우기.html#cb321-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb321-3"><a href="r-기초-배우기.html#cb321-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(<span class="fu">c</span>(<span class="st">&#39;dep_delay&#39;</span>, <span class="st">&#39;arr_delay&#39;</span>), <span class="sc">~</span> .x <span class="sc">*</span> <span class="dv">60</span>)</span>
<span id="cb321-4"><a href="r-기초-배우기.html#cb321-4" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb321-5"><a href="r-기초-배우기.html#cb321-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## # A tibble: 6 x 7
##    year month   day dep_delay arr_delay distance air_time
##   &lt;int&gt; &lt;int&gt; &lt;int&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
## 1  2013     1     1       120       660     1400      227
## 2  2013     1     1       240      1200     1416      227
## 3  2013     1     1       120      1980     1089      160
## 4  2013     1     1       -60     -1080     1576      183
## 5  2013     1     1      -360     -1500      762      116
## 6  2013     1     1      -240       720      719      150</code></pre>
<p>동일한 함수를 한번에 여러행에 적용해야 할 때는 <code>mutate()</code> 함수 내에 <code>across()</code> 함수를 입력합니다. 위 예제에서는 dep_delay과 arr_delay열의 데이터에 60을 곱해주었습니다. <code>across()</code> 함수의 자세한 사용법은 다소 생소하고 어려울 수 있으므로 아래 페이지의 내용을 따라가며 익히시는게 좋습니다.</p>
<pre><code>https://dplyr.tidyverse.org/reference/across.html</code></pre>

</div>
</div>
</div>
</div>
<div id="disqus_thread"></div>
<script>

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://quant-cookbook.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                            
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="퀀트-투자의-심장-데이터와-프로그래밍.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
},
"split_bib": false
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
